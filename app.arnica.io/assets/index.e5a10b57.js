var Jo=Object.defineProperty,Xo=Object.defineProperties;var Zo=Object.getOwnPropertyDescriptors;var Ut=Object.getOwnPropertySymbols;var ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable;var lr=(t,e,s)=>e in t?Jo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,_=(t,e)=>{for(var s in e||(e={}))ur.call(e,s)&&lr(t,s,e[s]);if(Ut)for(var s of Ut(e))pr.call(e,s)&&lr(t,s,e[s]);return t},L=(t,e)=>Xo(t,Zo(e));var st=(t,e)=>{var s={};for(var r in t)ur.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&Ut)for(var r of Ut(t))e.indexOf(r)<0&&pr.call(t,r)&&(s[r]=t[r]);return s};var ms=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var y=(t,e,s)=>(ms(t,e,"read from private field"),s?s.call(t):e.get(t)),R=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},U=(t,e,s,r)=>(ms(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);var re=(t,e,s)=>(ms(t,e,"access private method"),s);import{l as as,C as b,V as p,P as I,W as Je,E as cs,a as V,G as Qo,b as ea,M as Ws,h as Xe,d as ta,p as sa,R as ve,e as ra}from"./vendor.b9714d0d.js";import{V as ro,d as na}from"./vendor-vuetify.0d58dbde.js";var bs=Object.freeze(Object.defineProperty({__proto__:null,get CALLBACK_PATH_GITHUB(){return Cd},get CALLBACK_PATH_ADO(){return Nd},get Auth(){return w},get Layout(){return C},get Popup(){return E},get Error(){return To},get Notifications(){return Md},get Integrations(){return te},get Env(){return xt},get RiskReports(){return Go},get Jobs(){return sr},get Members(){return jo},get InventoryReports(){return fe},get IdentityOverride(){return Ce},get Policy(){return Ud},get PolicyV2(){return kd},get Mitigations(){return Gd},get Insights(){return mt},get Dismissals(){return Vs},get SecretsReport(){return jd},get PermissionGrants(){return Fd},get InferenceReport(){return Vd},get Preferences(){return ze},get ProfileNames(){return Xt},get Tier(){return ee},get Billing(){return qd},get HtmlContent(){return Os},get Dialog(){return qa},get APIKeys(){return zd},get Flags(){return Ke},get Demo(){return Q},get Groups(){return qs},get Trends(){return Zh}},Symbol.toStringTag,{value:"Module"}));const ia=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}};ia();function oa(t,e){const s=new Map;for(const[r,n]of t)s.set(r,e(n));return s}var hn,mn;(mn=(hn=Map.prototype).mapValues)!=null||(hn.mapValues=function(t){return oa(this,t)});var gn,fn;(fn=(gn=Map.prototype).map)!=null||(gn.map=function(t){const e=[];for(const[s,r]of this)e.push(t(s,r));return e});var _n,vn;(vn=(_n=Map.prototype).toRecord)!=null||(_n.toRecord=function(){return Object.fromEntries(this.entries())});const aa=(t,e)=>{const s=new Map;if(!t)return s;for(const r of t){const n=e(r),i=s.get(n);i?i.push(r):s.set(n,[r])}return s},ca=(t,e,s=!1)=>{const r=new Map;if(!t)return r;for(const n of t){const i=e(n);if(r.has(i)){if(s)throw new Error("Duplicate key found");console.debug(`Duplicate key found: ${i}`);continue}r.set(i,n)}return r};var yn,In;(In=(yn=Array.prototype).groupBy)!=null||(yn.groupBy=function(t){return aa(this,t)});var wn,En;(En=(wn=Array.prototype).mapBy)!=null||(wn.mapBy=function(t,e){return ca(this,t,e)});var bn,An;(An=(bn=Array.prototype).maxBy)!=null||(bn.maxBy=function(t){return as.exports.maxBy(this,t)});var On,Rn;(Rn=(On=Array.prototype).minBy)!=null||(On.minBy=function(t){return as.exports.minBy(this,t)});var Tn,Sn;(Sn=(Tn=Array.prototype).chunk)!=null||(Tn.chunk=function(t){return as.exports.chunk(this,t)});var $n,Pn;(Pn=($n=Array.prototype).sum)!=null||($n.sum=function(){return this.reduce((t,e)=>t+e,0)});var Dn,Cn;(Cn=(Dn=Array.prototype).min)!=null||(Dn.min=function(){if(this.length===0)return;let t=1/0;for(const e of this)e<t&&(t=e);return t});var Nn,Mn;(Mn=(Nn=Array.prototype).max)!=null||(Nn.max=function(){if(this.length===0)return;let t=-1/0;for(const e of this)e>t&&(t=e);return t});var xn,Ln;(Ln=(xn=Array.prototype).any)!=null||(xn.any=function(e){return this.some(e!=null?e:()=>!0)});var Un,kn;(kn=(Un=Array.prototype).distinct)!=null||(Un.distinct=function(t){const e=new Set;return t!=null||(t=s=>s),this.filter(s=>{const r=t(s);return e.has(r)?!1:(e.add(r),!0)})});var Gn;(Gn=Map.fromRecord)!=null||(Map.fromRecord=t=>new Map(Object.entries(t)));function Sm([t,...e]){var s;return`${(s=t==null?void 0:t.toUpperCase())!=null?s:""}${e.join("")}`}const kt=(t,e)=>`${t}/${e}`;function $m(t){return t.replace(/\/$/,"")}function la(t,e,s="..."){if(!t||t.length<=e)return t;e-=s.length;const r=Math.floor(e/2),n=Math.ceil(e/2);return`${t.substring(0,n)}${s}${t.substring(t.length-r)}`}function dr(t){if(!t)return{};const e={};return"message"in t&&(e.message=t.message),"stack"in t&&(e.stack=t.stack),"name"in t&&(e.name=t.name),e}function ua(t){var o,a,c;if(!t)return"undefined error";const e=new Error,s=dr(t),r=dr(t instanceof Error&&t.cause||void 0);s.stack=`Current: ${(o=e.stack)!=null?o:"[N/A]"}
Initiator: ${(a=s.stack)!=null?a:"[N/A]"}
Cause: ${(c=r.stack)!=null?c:"[N/A]"}`,Object.assign(s,t),s.cause=r;const l=s,{stack:n}=l,i=st(l,["stack"]);return`${s.stack}
${JSON.stringify(i,null,2)}`}function Pm(t){if(!!t)try{return parseInt(t)}catch{console.warn(`parseIntSafe: Unable to parse ${t} as an integer`);return}}const pa=t=>Number.isInteger(t),Gt=(t,e)=>pa(t)?t:t.toFixed(e),da=(t,e=1)=>t<1e3?`${Gt(t,e)}`:t<1e6?`${Gt(t/1e3,e)}k`:t<1e9?`${Gt(t/1e6,e)}m`:`${Gt(t/1e9,e)}b`;var ha=Object.defineProperty,ma=Object.getOwnPropertyDescriptor,ga=(t,e,s,r)=>{for(var n=r>1?void 0:r?ma(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&ha(e,s,n),n};let As=class extends p{constructor(){super(...arguments),this.message=null,this.html=!1,this.el=null,this.left=-100,this.top=-100,this.align="center",this.onHandle=null,this.offHandle=null}beforeMount(){const t=this.onTooltipEnter.bind(this),e=this.onTooltipLeave.bind(this);this.$root.$on("tooltip.enter",t),this.$root.$on("tooltip.leave",e),this.unsubscribe=()=>{this.$root.$off("tooltip.enter",t),this.$root.$off("tooltip.leave",e)}}beforeDestroy(){this.unsubscribe()}onTooltipEnter(t,e,s,r,n){var o,a;this.el=t,this.offHandle&&window.clearTimeout(this.offHandle),this.offHandle=null,this.html=n.html;const i=(a=this.html?e.value:(o=e.value)==null?void 0:o.split(`
`))!=null?a:null;this.onHandle=window.setTimeout(async()=>{this.message=i,this.align=n.align,await this.$nextTick();const{top:c,left:l}=this.calcPosition(t,n);this.top=c,this.left=l},n.on)}onTooltipLeave(t,e,s,r,n){this.onHandle&&window.clearTimeout(this.onHandle),this.onHandle=null,this.offHandle=window.setTimeout(()=>{this.clear()},n.off)}calcPosition(t,{top:e,left:s}){const r=t.getBoundingClientRect(),n=this.$el.getBoundingClientRect();return{top:Math.max(0,Math.min(r.bottom+window.scrollY-e,window.innerHeight-n.height)),left:Math.max(0,r.width/2-n.width/2+r.left+window.scrollX+s)}}clear(){this.message=null,this.top=this.left=-100}};As=ga([b],As);var fa=As,_a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}],staticClass:"component tooltip",style:`top: ${t.top}px; left: ${t.left}px;`},[t.message?[t.html?s("div",{domProps:{innerHTML:t._s(t.message)}}):t._l(t.message,function(r,n){return s("span",{key:n,style:`text-align: ${t.align}`},[t._v(t._s(r))])})]:t._e()],2)},va=[];function P(t,e,s,r,n,i,o,a){var c=typeof t=="function"?t.options:t;e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i);var l;if(o?(l=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(f=__VUE_SSR_CONTEXT__),n&&n.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(x,A){return l.call(A),u(x,A)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}const hr={};var ya=P(fa,_a,va,!1,Ia,null,null,null);function Ia(t){for(let e in hr)this[e]=hr[e]}var wa=function(){return ya.exports}(),Ea=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,ls=(t,e,s,r)=>{for(var n=r>1?void 0:r?ba(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Ea(e,s,n),n};let Be=class extends p{close(){this.$emit("close")}};ls([I({type:String,required:!0})],Be.prototype,"title",2);ls([I({type:String,required:!0})],Be.prototype,"text",2);ls([I({type:String,required:!0})],Be.prototype,"buttonText",2);Be=ls([b],Be);var Aa=Be,Oa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-overlay",{staticClass:"component overlay-simple-message text-center",attrs:{value:!0}},[s("v-container",[t._t("header"),t._t("default",function(){return[s("v-row",[s("v-col",[s("h3",{staticClass:"text-uppercase"},[t._v(t._s(t.title))])])],1),s("v-row",[s("v-col",[s("p",[t._v(t._s(t.text))])])],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{color:"primary"},on:{click:function(r){return t.close()}}},[t._v(" "+t._s(t.buttonText))])],1)],1)]}),t._t("footer")],2)],1)},Ra=[];const mr={};var Ta=P(Aa,Oa,Ra,!1,Sa,null,null,null);function Sa(t){for(let e in mr)this[e]=mr[e]}var $a=function(){return Ta.exports}(),oe,Ee;class Ve{constructor(e){R(this,oe,void 0);R(this,Ee,void 0);if(!e)throw new Error("Invalid lazy factory");U(this,Ee,e)}get value(){var e;if(typeof y(this,oe)=="undefined"){if(U(this,oe,(e=y(this,Ee))==null?void 0:e.call(this)),typeof y(this,oe)=="undefined")throw U(this,Ee,()=>{throw new Error("Invalid lazy factory")}),new Error("Lazy factory produced no value");U(this,Ee,void 0)}return Object.defineProperty(this,"value",{value:y(this,oe)}),y(this,oe)}get isValueCreated(){return typeof y(this,oe)!="undefined"}}oe=new WeakMap,Ee=new WeakMap;var Le;class no{constructor(){R(this,Le,void 0);U(this,Le,new Promise((e,s)=>{this.resolve=e,this.reject=s}))}get promise(){return y(this,Le)}then(e,s){return y(this,Le).then(e,s)}}Le=new WeakMap;var Pa=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,Se=(t,e,s,r)=>{for(var n=r>1?void 0:r?Da(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Pa(e,s,n),n};let pe=class extends p{onChanged(t){this.emitValid(!this.rules||this.rules.every(e=>e(t)))}emitValid(t){return t}};Se([I({type:Object,required:!0})],pe.prototype,"args",2);Se([I({type:String,default:null})],pe.prototype,"hint",2);Se([I({type:Array,default:()=>[]})],pe.prototype,"rules",2);Se([I({type:Boolean,default:!1})],pe.prototype,"valid",2);Se([Je("args.value",{immediate:!0})],pe.prototype,"onChanged",1);Se([cs("update:valid")],pe.prototype,"emitValid",1);pe=Se([b],pe);var Ca=pe,Na=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card-text",{staticClass:"component prompt-dialog-content"},[s("v-text-field",{attrs:{color:"success",hint:t.hint,autofocus:"",rules:t.rules},on:{focus:function(r){return r.target.select()}},model:{value:t.args.value,callback:function(r){t.$set(t.args,"value",r)},expression:"args.value"}})],1)},Ma=[];const gr={};var xa=P(Ca,Na,Ma,!1,La,null,null,null);function La(t){for(let e in gr)this[e]=gr[e]}var Ua=function(){return xa.exports}(),ka=Object.defineProperty,Ga=Object.getOwnPropertyDescriptor,Ze=(t,e,s,r)=>{for(var n=r>1?void 0:r?Ga(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&ka(e,s,n),n};let ye=class extends p{constructor(){super(...arguments),this.initialWidth="unset",this.page=0,this.search=null}get longList(){return this.options.length>this.itemsPerPage}get sortedOptions(){return this.options.sort((t,e)=>this.sorter(t,e))}get filteredOptions(){const t=(this.search||"").toLowerCase();return t?this.sortedOptions.filter(e=>{var s;return e.title.toLowerCase().includes(t)||((s=e.description)==null?void 0:s.toLowerCase().includes(t))}):this.sortedOptions}get start(){const t=this.filteredOptions.length,e=this.itemsPerPage;return t<e?0:Math.min(this.page*e,t)}get end(){const t=this.filteredOptions.length,e=this.itemsPerPage;return t<e?t:Math.min((this.page+1)*e,t)}get total(){return this.filteredOptions.length}get pages(){return Math.ceil(this.total/this.itemsPerPage)}get minHeight(){return`${(this.options.some(e=>e.description)?50:40)*Math.min(this.options.length,this.itemsPerPage)+16}px`}get pagedOptions(){return this.filteredOptions.slice(this.start,this.end)}get selectedItem(){const t=this.args.value;return this.pagedOptions.findIndex(e=>e.value===t)}set selectedItem(t){var e;this.args.value=(e=this.pagedOptions[t])==null?void 0:e.value}async mounted(){await this.$nextTick();const e=this.$refs.list.$el;e&&(this.fixatePaginationWidth(e),this.focusSelected(e))}fixatePaginationWidth(t){const e=t.clientWidth;this.initialWidth=e?`${e}px`:"unset"}focusSelected(t){const e=t.querySelector(".v-list-item.v-item--active.v-list-item--active");e==null||e.focus()}prevPage(){this.page=Math.max(0,this.page-1)}nextPage(){this.page=Math.min(Math.ceil(this.total/this.itemsPerPage)-1,this.page+1)}onClick(t){this.args.value=t,this.resolve(this.args)}};Ze([I({type:Object,required:!0})],ye.prototype,"args",2);Ze([I({type:Array,required:!0})],ye.prototype,"options",2);Ze([I({type:Number,default:10})],ye.prototype,"itemsPerPage",2);Ze([I({type:Function,required:!0})],ye.prototype,"resolve",2);Ze([I({type:Function,default:(t,e)=>t.title.localeCompare(e.title)})],ye.prototype,"sorter",2);ye=Ze([b],ye);var ja=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"component select-dialog-content",attrs:{fluid:""}},[t.longList?s("v-text-field",{attrs:{clearable:"",dense:"",label:"Search",autofocus:""},model:{value:t.search,callback:function(r){t.search=typeof r=="string"?r.trim():r},expression:"search"}}):t._e(),s("v-list",{ref:"list",style:`min-height: ${t.minHeight}; width: ${t.initialWidth}`,attrs:{dense:""}},[s("v-list-item-group",{attrs:{color:"success"},model:{value:t.selectedItem,callback:function(r){t.selectedItem=r},expression:"selectedItem"}},[t.options.length?t._l(t.pagedOptions,function(r,n){return s("v-list-item",{key:n,attrs:{dense:""},on:{click:function(i){return i.stopPropagation(),t.onClick(r)}}},[r.avatar?s("v-avatar",{staticClass:"avatar",attrs:{size:"16"}},[s("img",{attrs:{src:r.avatar}})]):t._e(),r.icon?s("v-list-item-icon",{staticClass:"side-icon"},[s("v-icon",[t._v(t._s(r.icon))])],1):t._e(),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(r.title))]),r.description?s("v-list-item-subtitle",[t._v(t._s(r.description))]):t._e()],1)],1)}):[s("v-list-item",{attrs:{dense:"",disabled:""}},[s("v-list-item-content",[s("v-list-item-title",[t._v("No options available")])],1)],1)]],2)],1),t.longList?s("div",{staticClass:"float-end"},[s("small",[t._v(" "+t._s(t.start+1)+"-"+t._s(t.end)+" of "+t._s(t.total)+" ")]),s("v-btn",{attrs:{icon:"",title:"Previous","aria-label":"Previous page",disabled:t.page<=0},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.prevPage.apply(null,arguments)}}},[s("v-icon",[t._v("mdi-chevron-left")])],1),s("v-btn",{attrs:{icon:"",title:"Next","aria-label":"Next page",disabled:t.page>=t.pages-1},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.nextPage.apply(null,arguments)}}},[s("v-icon",[t._v("mdi-chevron-right")])],1)],1):t._e()],1)},Fa=[];const fr={};var Ha=P(ye,ja,Fa,!1,Ba,null,null,null);function Ba(t){for(let e in fr)this[e]=fr[e]}var Va=function(){return Ha.exports}();class Os{constructor(e){this.html=e}}const qa=new class{constructor(){this._config=null,p.observable(this)}get config(){return this._config}async open(e){return this._config=L(_({},e),{deferred:new no}),this._config.deferred.promise.finally(()=>this._config=null),this._config.deferred.promise}dismiss(){this._config=null}async confirm(e,s,r){return await this.open({content:s!=null?s:"",actions:[{name:"OK",value:!0,color:"success",default:!0},{name:"Cancel",value:!1,color:""}],title:e!=null?e:"Are you sure?",bindData:r||null})}async prompt(e,s,r,n){var a;const i={value:s!=null?s:null},o=await this.open({title:e!=null?e:"",actions:[{name:"OK",color:"success",value:i,submit:!0},{name:"Cancel",color:"",value:null}],content:Ua,bindData:{args:i,hint:r,rules:n}});return(a=o==null?void 0:o.value)!=null?a:null}async select(e,s,r,n){var a;const i={value:r!=null?r:null},o=await this.open({title:s!=null?s:"",actions:[{name:"OK",color:"success",value:i,submit:!0},{name:"Cancel",color:"",value:null}],content:Va,bindData:{args:i,options:e,sorter:n}});return(a=o==null?void 0:o.value)!=null?a:null}};var za=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,Ka=(t,e,s,r)=>{for(var n=r>1?void 0:r?Wa(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&za(e,s,n),n};let Rs=class extends p{constructor(){super(...arguments),this.valid=!1}get model(){const t=!!this.$state.Dialog.config;return t&&this.setFocus(),t}set model(t){t||this.closeDialog()}get dialog(){return this.$state.Dialog.config}closeDialog(){this.$state.Dialog.dismiss()}get component(){var e;const t=(e=this.dialog)==null?void 0:e.content;return!t||typeof t=="string"||t instanceof Os?null:t}get html(){var e;const t=(e=this.dialog)==null?void 0:e.content;return t instanceof Os?t:null}get rows(){var e;const t=(e=this.dialog)==null?void 0:e.content;return typeof t=="string"?t.split(`
`):[]}get resolve(){var t,e;return(e=(t=this.dialog)==null?void 0:t.deferred.resolve)!=null?e:null}get reject(){var t,e;return(e=(t=this.dialog)==null?void 0:t.deferred.reject)!=null?e:null}setResult(t){var e;(e=this.dialog)==null||e.deferred.resolve(t)}async setFocus(){var e;await this.$nextTick();const t=this.$refs.actions;t&&((e=t.querySelector("button[default]"))==null||e.focus())}onAction(t){t.submit&&this.onSubmit(t),this.setResult(t.value)}onSubmit(t){var e,s,r;this.setResult((r=t!=null?t:(s=(e=this.dialog)==null?void 0:e.actions)==null?void 0:s.find(n=>n.submit))==null?void 0:r.value)}};Rs=Ka([b],Rs);var Ya=Rs,Ja=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"component action-dialog"},[s("v-dialog",{staticClass:"component action-dialog action-dialog--container",attrs:{"content-class":"component action-dialog action-dialog--teleport",scrollable:""},on:{"click:outside":t.closeDialog},model:{value:t.model,callback:function(r){t.model=r},expression:"model"}},[t.dialog?[s("v-form",{on:{submit:function(r){return r.preventDefault(),t.onSubmit.apply(null,arguments)}},model:{value:t.valid,callback:function(r){t.valid=r},expression:"valid"}},[s("v-card",[s("v-card-title",{staticClass:"bg-primary text--white"},[t._v(t._s(t.dialog.title))]),t.component?s(t.component,t._b({tag:"component",attrs:{resolve:t.resolve,reject:t.reject}},"component",t.dialog.bindData,!1)):t.html?s("v-card-text",{domProps:{innerHTML:t._s(t.html.html)}}):s("v-card-text",{staticClass:"content-row-container"},t._l(t.rows,function(r,n){return s("span",{key:n},[t._v(t._s(r))])}),0),t.dialog.actions?s("v-card-actions",{ref:"actions",staticClass:"justify-end"},t._l(t.dialog.actions,function(r){return s("v-btn",{key:r.name,attrs:{dense:"",text:"",color:r.color,default:!!r.default,type:r.submit?"submit":null,disabled:!!r.submit&&!t.valid},on:{click:function(n){return t.onAction(r)}}},[t._v(" "+t._s(r.name)+" ")])}),1):t._e()],1)],1)]:t._e()],2)],1)},Xa=[];const _r={};var Za=P(Ya,Ja,Xa,!1,Qa,null,null,null);function Qa(t){for(let e in _r)this[e]=_r[e]}var ec=function(){return Za.exports}(),N=(t=>(t[t.free=0]="free",t[t.team=10]="team",t[t.business=20]="business",t[t.enterprise=30]="enterprise",t))(N||{});const vr=100,tc=/^[A-Za-z _\-0-9\\.]*$/,sc=[t=>!!t||"Organization name is required",t=>t&&t.length<=vr||`Organization name must be less than ${vr} characters`,t=>t&&t.length>2||"Organization name must be more than 2 characters",t=>t&&tc.test(t)||"Organization name must use only uppercase, lowercase, numbers, spaces ( ), underscore (_), dashes (-) and periods (.)"];var rc=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,Ks=(t,e,s,r)=>{for(var n=r>1?void 0:r?nc(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&rc(e,s,n),n};let lt=class extends p{constructor(){super(...arguments),this.confirm=!1}};Ks([I({type:String,default:"blue"})],lt.prototype,"color",2);Ks([I({type:String,default:"red"})],lt.prototype,"confirmColor",2);lt=Ks([b],lt);var ic=lt,oc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.confirm?s("strong",[s("a",{class:`${t.confirmColor}--text`,on:{click:function(r){return r.stopPropagation(),t.$emit("click")},mouseleave:function(r){t.confirm=!1}}},[t._t("confirmation",function(){return[t._v("Yes I'm sure")]})],2)]):s("a",{class:`${t.color}--text`,on:{click:function(r){r.stopPropagation(),t.confirm=!0}}},[t._t("default")],2)},ac=[];const yr={};var cc=P(ic,oc,ac,!1,lc,null,null,null);function lc(t){for(let e in yr)this[e]=yr[e]}var uc=function(){return cc.exports}(),pc=Object.defineProperty,dc=Object.getOwnPropertyDescriptor,us=(t,e,s,r)=>{for(var n=r>1?void 0:r?dc(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&pc(e,s,n),n};let qe=class extends p{};us([I({type:String,default:""})],qe.prototype,"color",2);us([I({type:String,required:!0})],qe.prototype,"icon",2);us([I({type:String,required:!0})],qe.prototype,"label",2);qe=us([b],qe);var hc=qe,mc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-chip",{attrs:{color:t.color}},[s("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon))]),t._t("default",function(){return[t._v(" "+t._s(t.label)+" ")]})],2)},gc=[];const Ir={};var fc=P(hc,mc,gc,!1,_c,null,null,null);function _c(t){for(let e in Ir)this[e]=Ir[e]}var vc=function(){return fc.exports}(),yc=Object.defineProperty,Ic=Object.getOwnPropertyDescriptor,wc=(t,e,s,r)=>{for(var n=r>1?void 0:r?Ic(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&yc(e,s,n),n};const Ec={owner:{icon:"mdi-account-check",color:"primary",label:"Owner",remove:"Delete"},member:{icon:"mdi-account",color:"",label:"Member",remove:"Leave"}};let Ts=class extends p{constructor(){var t,e,s;super(...arguments),this.email=(t=this.$state.Auth.user)==null?void 0:t.email,this.organizationName=(s=(e=this.$state.Auth.user)==null?void 0:e.userInfo)==null?void 0:s.orgName,this.organizations=null,this.overrideTenant=null,this.showOrgsWithNoIntegrations=!1,this.showOrgsWithArnicaOwnerEmail=this.$state.Env.isDev,this.showOrgsWithNoIdentities=!1,this.showOrgsWithFreeTier=!0,this.orgNameRules=sc}async beforeMount(){if(this.$state.Auth.isArnicaAdmin){const[t,e]=await Promise.all([this.$api.Orgs.getAll(),this.$state.Auth.getSelectedOrgId()]);this.organizations=t!=null?t:null,this.overrideTenant=e}}get role(){var t,e;return Ec[(e=(t=this.$state.Auth.user)==null?void 0:t.userInfo)!=null&&e.isOrgOwner?"owner":"member"]}get orgName(){var t,e;return(e=(t=this.$state.Auth.user)==null?void 0:t.userInfo)==null?void 0:e.orgName}get orgId(){var t,e;return(e=(t=this.$state.Auth.user)==null?void 0:t.userInfo)==null?void 0:e.orgId}get updateOrgNameDisabled(){var t,e,s;return!((t=this.organizationName)!=null&&t.length)||this.organizationName===((s=(e=this.$state.Auth.user)==null?void 0:e.userInfo)==null?void 0:s.orgName)}get filteredOrganizations(){return this.organizations===null?null:this.organizations.filter(t=>{var e,s,r,n;return t.id===this.overrideTenant?!0:!(t.deleted||!this.showOrgsWithNoIntegrations&&!((e=t.meta)!=null&&e.integrationCount)||!this.showOrgsWithArnicaOwnerEmail&&((s=t.owner)==null?void 0:s.endsWith("@arnica.io"))||!this.showOrgsWithNoIdentities&&!((n=(r=t.meta)==null?void 0:r.lastReport)!=null&&n.identities)||!this.showOrgsWithFreeTier&&t.tier===N.free)})}set filteredOrganizations(t){this.organizations=t}onSave(){this.$state.Layout.userMenu.editProfile=!1}onClose(){this.$state.Layout.userMenu.editProfile=!1}async leaveOrganization(){await this.$api.Orgs.leave(),await this.$state.Auth.signOut(),window.location.reload()}async updateOrgName(){var t;if(this.organizationName!==null&&typeof this.organizationName!="undefined"){if(await this.$api.Orgs.updateName(this.organizationName),!this.$state.Auth.user)throw new Error("User is required");if(!((t=this.$state.Auth.user)!=null&&t.userInfo))throw new Error("User info is required");this.$state.Auth.user.userInfo.orgName=this.organizationName}else throw new Error("Organization name is required")}};Ts=wc([b({components:{ConfirmLink:uc,RoleChip:vc}})],Ts);var bc=Ts,Ac=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{staticClass:"component layout-component edit-profile-dialog",attrs:{"max-width":"600px",scrollable:"",transition:"dialog-bottom-transition"},model:{value:t.$state.Layout.userMenu.editProfile,callback:function(r){t.$set(t.$state.Layout.userMenu,"editProfile",r)},expression:"$state.Layout.userMenu.editProfile"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v("User Profile")])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{disabled:"",label:"Email",readonly:""},model:{value:t.email,callback:function(r){t.email=r},expression:"email"}})],1),t.orgName?s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{label:"Organization Name",rules:t.orgNameRules},model:{value:t.organizationName,callback:function(r){t.organizationName=r},expression:"organizationName"}})],1):t._e(),t.orgName?s("v-col",{attrs:{cols:"2"}},[s("v-btn",{attrs:{disabled:t.updateOrgNameDisabled},on:{click:t.updateOrgName}},[t._v("Save")])],1):t._e(),t.orgId?s("v-col",{attrs:{cols:"12"}},[s("role-chip",{attrs:{color:t.role.color,icon:t.role.icon,label:t.role.label}}),t._v(" of the "),s("v-icon",{attrs:{small:""}},[t._v("mdi-office-building")]),t.orgName?[s("strong",[t._v(t._s(t.orgName))]),t._v(" "),s("small",[t._v("["+t._s(t.orgId)+"]")])]:[s("strong",[t._v(t._s(t.orgId))])],t._v(" organization\xA0|\xA0 "),s("confirm-link",{on:{click:t.leaveOrganization}},[t._v(t._s(t.role.remove)+"...")])],2):t._e()],1),t.$state.Auth.isArnicaAdmin?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-alert",{attrs:{outlined:"",color:"warning"}},[s("v-autocomplete",{attrs:{"item-text":function(r){return`${r.name} [${r.id}]`},items:t.filteredOrganizations,clearable:"","auto-select-first":"","item-value":"id"},scopedSlots:t._u([{key:"item",fn:function(r){var n,i,o,a,c,l=r.item;return[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(t._f("middleEllipses")(l.name,50)))]),s("v-list-item-subtitle",[t._v(t._s(t._f("middleEllipses")(l.id,50)))])],1),s("v-list-item-action",[s("v-list-item-action-text",[t._v(" owner: "+t._s(l.owner))]),s("v-list-item-action-text",[t._v(t._s((n=(i=l.meta)===null||i===void 0?void 0:i.integrationCount)!==null&&n!==void 0?n:0)+" integrations, "+t._s((o=(a=l.meta)===null||a===void 0||(c=a.lastReport)===null||c===void 0?void 0:c.identities)!==null&&o!==void 0?o:0)+" identities ")]),s("v-list-item-action-text",[t._v(" created: "),l.createdDate?s("span",[t._v(t._s(t._f("dateFromNow")(l.createdDate)))]):s("span",[t._v("unknown")]),t._v(", "+t._s(t._f("tierName")(l.tier))+" tier ")])],1)]}}],null,!1,2099927054),model:{value:t.overrideTenant,callback:function(r){t.overrideTenant=r},expression:"overrideTenant"}}),t.overrideTenant!==t.$state.Auth._selectedOrgId?s("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(r){return r.stopPropagation(),t.$state.Auth.setSelectedOrgId(t.overrideTenant)}}},[t._v("Switch to tenant")]):t._e(),s("v-btn",{attrs:{small:""},on:{click:function(r){r.stopPropagation(),t.overrideTenant=null,t.$state.Auth.setSelectedOrgId(null)}}},[t._v("Reset")]),s("v-checkbox",{attrs:{dense:"","hide-details":"",label:"Show orgs with no integrations"},model:{value:t.showOrgsWithNoIntegrations,callback:function(r){t.showOrgsWithNoIntegrations=r},expression:"showOrgsWithNoIntegrations"}}),s("v-checkbox",{attrs:{dense:"","hide-details":"",label:"Show orgs with @arnica.io owner"},model:{value:t.showOrgsWithArnicaOwnerEmail,callback:function(r){t.showOrgsWithArnicaOwnerEmail=r},expression:"showOrgsWithArnicaOwnerEmail"}}),s("v-checkbox",{attrs:{dense:"","hide-details":"",label:"Show orgs with no identities"},model:{value:t.showOrgsWithNoIdentities,callback:function(r){t.showOrgsWithNoIdentities=r},expression:"showOrgsWithNoIdentities"}}),s("v-checkbox",{attrs:{dense:"","hide-details":"",label:"Show orgs with free tier"},model:{value:t.showOrgsWithFreeTier,callback:function(r){t.showOrgsWithFreeTier=r},expression:"showOrgsWithFreeTier"}})],1)],1)],1):t._e()],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){return r.stopPropagation(),t.onClose.apply(null,arguments)}}},[t._v("Close")])],1)],1)],1)},Oc=[];const wr={};var Rc=P(bc,Ac,Oc,!1,Tc,null,null,null);function Tc(t){for(let e in wr)this[e]=wr[e]}var io=function(){return Rc.exports}(),Sc=Object.defineProperty,$c=Object.getOwnPropertyDescriptor,Ys=(t,e,s,r)=>{for(var n=r>1?void 0:r?$c(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Sc(e,s,n),n};let ut=class extends p{get onboardingDismissed(){var t,e;return(e=(t=this.$state.Preferences.user)==null?void 0:t.onboardingDismissed)!=null?e:this.$state.Preferences.defaults.onboardingDismissed}set onboardingDismissed(t){this.$state.Preferences.save({onboardingDismissed:t})}async onDarkChanged(t){await this.$state.Preferences.save({dark:t})}async onPinnedChanged(t){await this.$state.Preferences.save({pinned:t})}onClose(){this.$state.Layout.userMenu.preferences=!1}};Ys([Je("$vuetify.theme.dark")],ut.prototype,"onDarkChanged",1);Ys([Je("$state.Layout.drawer.pinned")],ut.prototype,"onPinnedChanged",1);ut=Ys([b],ut);var Pc=ut,Dc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{staticClass:"component layout-component settings-dialog",attrs:{"max-width":"600px",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.$state.Layout.userMenu.preferences,callback:function(r){t.$set(t.$state.Layout.userMenu,"preferences",r)},expression:"$state.Layout.userMenu.preferences"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v("Settings")])]),s("v-card-text",[s("v-switch",{scopedSlots:t._u([{key:"label",fn:function(){return[s("v-icon",[t._v("mdi-theme-light-dark")]),t._v(" Theme: "+t._s(t.$vuetify.theme.dark?"Dark":"Light")+" ")]},proxy:!0}]),model:{value:t.$vuetify.theme.dark,callback:function(r){t.$set(t.$vuetify.theme,"dark",r)},expression:"$vuetify.theme.dark"}}),s("v-switch",{scopedSlots:t._u([{key:"label",fn:function(){return[s("v-icon",[t._v("mdi-pin")]),t._v(" Menu: "+t._s(t.$state.Layout.drawer.pinned?"Pinned":"Unpinned")+" ")]},proxy:!0}]),model:{value:t.$state.Layout.drawer.pinned,callback:function(r){t.$set(t.$state.Layout.drawer,"pinned",r)},expression:"$state.Layout.drawer.pinned"}}),s("v-switch",{scopedSlots:t._u([{key:"label",fn:function(){return[s("v-icon",[t._v("mdi-account-plus")]),t._v(" Skip product tour: "+t._s(t.onboardingDismissed?"Skip":"Keep")+" ")]},proxy:!0}]),model:{value:t.onboardingDismissed,callback:function(r){t.onboardingDismissed=r},expression:"onboardingDismissed"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.onClose}},[t._v("Close")])],1)],1)],1)},Cc=[];const Er={};var Nc=P(Pc,Dc,Cc,!1,Mc,null,null,null);function Mc(t){for(let e in Er)this[e]=Er[e]}var xc=function(){return Nc.exports}(),Lc=Object.defineProperty,Uc=Object.getOwnPropertyDescriptor,kc=(t,e,s,r)=>{for(var n=r>1?void 0:r?Uc(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Lc(e,s,n),n};let Ss=class extends p{get email(){var t;return(t=this.$state.Auth.user)==null?void 0:t.email}get emailVerified(){return this.$state.Auth.isEmailVerified}get orgId(){var t,e;return(e=(t=this.$state.Auth.user)==null?void 0:t.userInfo)==null?void 0:e.orgId}get orgName(){var t,e;return(e=(t=this.$state.Auth.user)==null?void 0:t.userInfo)==null?void 0:e.orgName}get public(){var t;return(t=this.$state.Auth.user)==null?void 0:t.public}get isUserMenuVisible(){return this.$state.Layout.userMenu.show}get showOrgDetails(){return!this.public&&this.orgId}};Ss=kc([b({components:{EditProfileDialog:io,SettingsDialog:xc}})],Ss);var Gc=Ss,jc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"component layout-component user-menu"},[t.isUserMenuVisible?[s("v-list",{attrs:{dense:"",nav:""}},[s("v-list-item",{attrs:{link:"",disabled:""}},[s("v-list-item-content",[s("v-list-item-title",[s("v-icon",{attrs:{small:""}},[t._v("mdi-email")]),t._v(" "+t._s(t.email)+" "),t.emailVerified?s("v-icon",{attrs:{small:"",color:"green"}},[t._v("mdi-check-bold")]):t._e()],1),t.showOrgDetails?s("v-list-item-subtitle",[s("v-chip",{staticClass:"float-right re-enable",attrs:{"x-small":"",outlined:"",label:"",to:{name:"upgrade"}}},[t._v(t._s(t.$tier.title))]),s("v-icon",{attrs:{small:""}},[t._v("mdi-office-building")]),t.orgName?[t._v(" "+t._s(t.orgName)+" "),s("small",[t._v("["+t._s(t.orgId)+"]")])]:[t._v(" "+t._s(t.orgId)+" ")]],2):t._e()],1)],1),s("v-divider"),t.emailVerified&&!t.public?[s("v-list-item",{attrs:{link:""},on:{click:function(r){r.stopPropagation(),t.$state.Layout.userMenu.editProfile=!0}}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-account-edit")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Edit Account")])],1)],1),s("v-list-item",{attrs:{link:""},on:{click:function(r){r.stopPropagation(),t.$state.Layout.userMenu.preferences=!0}}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-cog")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Preferences")])],1)],1)]:t._e(),s("v-list-item",{attrs:{link:""},on:{click:function(r){return r.stopPropagation(),t.$state.Auth.signOut()}}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-logout")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Sign-Out")])],1)],1)],2)]:t._e(),t.public?t._e():[s("edit-profile-dialog"),s("settings-dialog")]],2)},Fc=[];const br={};var Hc=P(Gc,jc,Fc,!1,Bc,null,null,null);function Bc(t){for(let e in br)this[e]=br[e]}var Vc=function(){return Hc.exports}(),qc=Object.defineProperty,zc=Object.getOwnPropertyDescriptor,Wc=(t,e,s,r)=>{for(var n=r>1?void 0:r?zc(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&qc(e,s,n),n};let $s=class extends p{onImgError(){const t=this.$state.Auth.user;t&&(t.picture="")}};$s=Wc([b({components:{UserMenu:Vc}})],$s);var Kc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$state.Layout.userMenu.show?s("v-menu",{staticClass:"component layout-component app-menu",attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on;return[s("v-btn",t._g({attrs:{icon:"","x-large":""}},n),[s("v-avatar",{attrs:{color:"gray",size:"32"}},[t.$state.Auth.user&&t.$state.Auth.user.picture?s("v-img",{attrs:{src:t.$state.Auth.user.picture},on:{error:t.onImgError},scopedSlots:t._u([{key:"placeholder",fn:function(){return[s("v-progress-circular",{attrs:{indeterminate:"",color:"success",size:"30"}})]},proxy:!0}],null,!0)}):s("v-icon",{attrs:{dark:""}},[t._v("mdi-account-circle")])],1)],1)]}}],null,!1,816987333)},[s("user-menu")],1):t._e()},Yc=[];const Ar={};var Jc=P($s,Kc,Yc,!1,Xc,null,null,null);function Xc(t){for(let e in Ar)this[e]=Ar[e]}var Zc=function(){return Jc.exports}(),Qc=Object.defineProperty,el=Object.getOwnPropertyDescriptor,Js=(t,e,s,r)=>{for(var n=r>1?void 0:r?el(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Qc(e,s,n),n};let pt=class extends p{get registered(){return!!this.$state.Auth.scopes.registered}get component(){return this.registered?"router-link":"a"}get href(){return this.registered?"#/":"https://www.arnica.io"}};Js([I({type:Boolean,default:!1})],pt.prototype,"mini",2);Js([I({type:String,required:!0})],pt.prototype,"background",2);pt=Js([b],pt);var tl=pt,sl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.component,{tag:"component",attrs:{to:"/",href:t.href}},[t.background==="dark"?[s("img",{directives:[{name:"show",rawName:"v-show",value:t.mini,expression:"mini"}],staticStyle:{width:"40px"},attrs:{src:"/img/ArnicaA-DarkMode-NoBG.png",alt:"Arnica logo"}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.mini,expression:"!mini"}],staticClass:"logo",attrs:{src:"/img/ArnicaFull-DarkMode-NoBG.png",alt:"Arnica Logo"}})]:[s("img",{directives:[{name:"show",rawName:"v-show",value:t.mini,expression:"mini"}],staticStyle:{width:"40px"},attrs:{src:"/img/arnica-logo-a-light.png",alt:"Arnica logo"}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.mini,expression:"!mini"}],staticClass:"logo",attrs:{src:"/img/ArnicaFull-OnWhite-NoBG.png",alt:"Arnica Logo"}})]],2)},rl=[];const Or={};var nl=P(tl,sl,rl,!1,il,null,null,null);function il(t){for(let e in Or)this[e]=Or[e]}var oo=function(){return nl.exports}(),ol=Object.defineProperty,al=Object.getOwnPropertyDescriptor,cl=(t,e,s,r)=>{for(var n=r>1?void 0:r?al(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&ol(e,s,n),n};let Ps=class extends p{get showFullAppBar(){var t;return((t=this.$route.meta)==null?void 0:t.appBar)!==!1}get scmTypes(){var e;if(!((e=this.$route.meta)!=null&&e.scmDropDown))return null;const t=this.$state.Integrations.scmTypes;return t.length>1?t:null}get routeIcon(){var t,e;return(e=(t=this.$route.meta)==null?void 0:t.icon)!=null?e:null}async toggleTheme(){const t=this.$vuetify.theme.dark=!this.$vuetify.theme.dark;this.$state.Auth.scopes.registered&&await this.$state.Preferences.save({dark:t})}async dismissProductTour(){this.$state.Layout.onboarding.dismissed||await this.$state.Preferences.save({onboardingDismissed:!0})}};Ps=cl([b({components:{AppMenu:Zc,ArnicaLogo:oo}})],Ps);var ll=Ps,ul=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showFullAppBar?s("v-app-bar",{staticClass:"component layout-component app-bar app-bar-full",attrs:{app:"",elevation:"0","expand-left":!t.$state.Layout.drawer.show}},[s("v-progress-linear",{attrs:{active:t.$state.Layout.loading,indeterminate:"",color:"primary",absolute:"",bottom:"",height:"5px"}}),t.$state.Layout.drawer.show?t._e():s("arnica-logo",{staticClass:"logo",attrs:{background:t.$vuetify.theme.dark?"dark":"light"}}),t.routeIcon?s("v-icon",{attrs:{left:"",dense:""}},[t._v(t._s(t.routeIcon))]):t._e(),s("v-app-bar-title",{staticClass:"text-no-wrap"},[t._v(" "+t._s(t.$state.Layout.title)+" ")]),s("v-spacer"),t.scmTypes?s("v-select",{staticClass:"ml-4 mr-4",staticStyle:{"max-width":"200px"},attrs:{items:t.scmTypes,dense:"",filled:"","hide-details":"",outlined:""},scopedSlots:t._u([{key:"item",fn:function(r){var n=r.item;return[s("v-icon",{staticClass:"mr-2"},[t._v(t._s(n.icon))]),t._v(" "+t._s(n.text)+" ")]}},{key:"selection",fn:function(r){var n=r.item;return[s("v-icon",{staticClass:"mr-2"},[t._v(t._s(n.icon))]),t._v(" "+t._s(n.text)+" ")]}}],null,!1,2912109852),model:{value:t.$state.Layout.scmType,callback:function(r){t.$set(t.$state.Layout,"scmType",r)},expression:"$state.Layout.scmType"}}):t._e(),t.$state.Auth.authenticated?void 0:[s("v-btn",{staticClass:"sign-in-btn",attrs:{to:"/login",title:"Sign In / Sign Up",color:"primary"}},[t._v(" Sign In / Sign Up ")])],s("v-btn",{attrs:{icon:""},on:{click:function(r){return r.stopPropagation(),t.toggleTheme.apply(null,arguments)}}},[t.$vuetify.theme.dark?s("v-icon",[t._v("mdi-white-balance-sunny")]):s("v-icon",[t._v("mdi-weather-night")])],1),t.$state.Auth.authenticated&&t.$state.Layout.onboarding.isDoneOnboarding?s("v-btn",{attrs:{icon:"",to:{name:"notifications"}}},[s("v-icon",[t._v("mdi-bell")]),t.$state.Notifications.unreadCount>0?s("v-badge",{staticClass:"mr-0",attrs:{content:t.$state.Notifications.unreadCount,color:"red"}}):t._e()],1):t._e(),s("app-menu")],2):s("div",{staticClass:"component layout-component app-bar app-bar-partial"},[s("v-btn",{attrs:{icon:""},on:{click:function(r){return r.stopPropagation(),t.toggleTheme.apply(null,arguments)}}},[t.$vuetify.theme.dark?s("v-icon",[t._v("mdi-white-balance-sunny")]):s("v-icon",[t._v("mdi-weather-night")])],1)],1)},pl=[];const Rr={};var dl=P(ll,ul,pl,!1,hl,"458a6da6",null,null);function hl(t){for(let e in Rr)this[e]=Rr[e]}var ml=function(){return dl.exports}(),gl=Object.defineProperty,fl=Object.getOwnPropertyDescriptor,_l=(t,e,s,r)=>{for(var n=r>1?void 0:r?fl(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&gl(e,s,n),n};let Ds=class extends p{get currentYear(){return new Date().getFullYear()}copy(){var e,s,r;const t=(r=(s=(e=this.$state.Auth.user)==null?void 0:e.userInfo)==null?void 0:s.org)==null?void 0:r.id;if(!!t)try{navigator.clipboard.writeText(t),this.$state.Popup.info(`<code>${t}</code> copied to clipboard!`,{timeout:1e3,html:!0})}catch(n){this.$state.Popup.error(String(n),{timeout:this.$state.Popup.INDEFINITELY})}}};Ds=_l([b({components:{EditProfileDialog:io}})],Ds);var vl=Ds,yl=function(){var t,e,s,r,n,i,o=this,a=o.$createElement,c=o._self._c||a;return o.$state.Layout.footer?c("v-footer",{staticClass:"component app-footer",attrs:{app:"",inset:o.$state.Layout.drawer.show,height:o.$state.Layout.footer?"35px":0,color:o.$state.Auth.isNonDefaultOrgId?"warning":"",light:o.$state.Auth.isNonDefaultOrgId}},[c("v-layout",{attrs:{"justify-center":""}},[c("small",[o._v(" \xA9 "+o._s(o.currentYear)+", Arnica Inc. All Rights Reserved. "),o.$state.Auth.authenticatedAndEmailVerified?[c("a",{attrs:{href:"javascript:",id:"feedback"}},[o._v("Feedback")])]:o._e()],2)]),o.$state.Auth.isNonDefaultOrgId?c("v-chip",{staticClass:"org-chip",attrs:{light:"",small:"",label:"",outlined:""},on:{click:function(l){return l.stopPropagation(),o.copy.apply(null,arguments)}}},[c("span",[o._v(o._s((t=o.$state.Auth.user)===null||t===void 0||(e=t.userInfo)===null||e===void 0||(s=e.org)===null||s===void 0?void 0:s.name)+" ["+o._s((r=o.$state.Auth.user)===null||r===void 0||(n=r.userInfo)===null||n===void 0||(i=n.org)===null||i===void 0?void 0:i.id)+"]")]),o._v(" \xA0 "),c("v-icon",{attrs:{"x-small":""}},[o._v("mdi-content-copy")]),o._v(" \xA0 "),c("v-icon",{attrs:{"x-small":""},on:{click:function(l){l.stopPropagation(),o.$state.Layout.userMenu.editProfile=!0}}},[o._v("mdi-pencil")]),c("edit-profile-dialog")],1):o._e()],1):o._e()},Il=[];const Tr={};var wl=P(vl,yl,Il,!1,El,null,null,null);function El(t){for(let e in Tr)this[e]=Tr[e]}var bl=function(){return wl.exports}(),Al=Object.defineProperty,Ol=Object.getOwnPropertyDescriptor,Rl=(t,e,s,r)=>{for(var n=r>1?void 0:r?Ol(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Al(e,s,n),n};let Cs=class extends p{};Cs=Rl([b],Cs);var Tl=Cs,Sl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-snackbar",{staticClass:"component layout demo-snack-bar",attrs:{app:"",timeout:-1,rounded:"",outlined:!0,elevation:"10",color:"success"},scopedSlots:t._u([{key:"action",fn:function(r){var n=r.attrs;return[t.$state.Jobs.jobs&&t.$state.Jobs.jobs.length?s("div",{staticClass:"mr-5",staticStyle:{display:"flex","flex-direction":"column","align-items":"end"}},[t.$state.Jobs.hasIngestOrDetectJobsInProgress?[t._v(" Scanning in progress. "),s("button",t._b({on:{click:function(i){return t.$state.Demo.disable()}}},"button",n,!1),[t._v("Exit demo "),s("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)]:[t._v(" Scanning complete. "),s("button",t._b({on:{click:function(i){return t.$state.Demo.disable()}}},"button",n,!1),[t._v("View your data "),s("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-right-circle")])],1)]],2):s("div",{staticClass:"mr-5",staticStyle:{display:"flex","flex-direction":"column"}},[t._v(" Ready to integrate? "),s("button",t._b({on:{click:function(i){return t.$state.Demo.disable()}}},"button",n,!1),[t._v("Get Started "),s("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-right-circle")])],1)])]}}]),model:{value:t.$state.Demo.enabled,callback:function(r){t.$set(t.$state.Demo,"enabled",r)},expression:"$state.Demo.enabled"}},[s("v-icon",{staticClass:"icon"},[t._v("mdi-bell")]),s("strong",[t._v("Viewing demo data")])],1)},$l=[];const Sr={};var Pl=P(Tl,Sl,$l,!1,Dl,null,null,null);function Dl(t){for(let e in Sr)this[e]=Sr[e]}var Cl=function(){return Pl.exports}(),Nl=Object.defineProperty,Ml=Object.getOwnPropertyDescriptor,xl=(t,e,s,r)=>{for(var n=r>1?void 0:r?Ml(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Nl(e,s,n),n};let Ns=class extends p{};Ns=xl([b],Ns);var Ll=Ns,Ul=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"component loading-centered",attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{align:"center"}},[s("v-progress-circular",{attrs:{indeterminate:"",color:"#40bca3",size:"100"}})],1)],1)},kl=[];const $r={};var Gl=P(Ll,Ul,kl,!1,jl,null,null,null);function jl(t){for(let e in $r)this[e]=$r[e]}var Fl=function(){return Gl.exports}(),It;class ao{constructor(e){R(this,It,void 0);U(this,It,e)}then(e,s){return y(this,It).then(e,s)}}It=new WeakMap;class Hl extends ao{constructor(e,s){super(e),this.value=s,p.observable(this),e.then(r=>this.value=r)}}var jn,Fn;(Fn=(jn=Promise.prototype).observe)!=null||(jn.observe=function(e){return new Hl(this,e)});class co{constructor(e,s=null){this.key=e,this._item=null,p.observable(this);const r=this.getStore().getItem(this.key);this._item=r?JSON.parse(r):s}get item(){return this._item}set item(e){(e!=null?e:null)!==null?(this._item=e,this.getStore().setItem(this.key,JSON.stringify(e))):(this._item=null,this.getStore().removeItem(this.key))}}class lo extends co{getStore(){return window.localStorage}}class Bl extends co{getStore(){return window.sessionStorage}}var Hn,Bn;(Bn=(Hn=Array.prototype).nonNullable)!=null||(Hn.nonNullable=function(){return this.filter(e=>e!=null)});var Vn,qn;(qn=(Vn=Array.prototype).pushAll)!=null||(Vn.pushAll=function(e){for(const s of e)this.push(s)});var zn,Wn;(Wn=(zn=Array.prototype).filterAsync)!=null||(zn.filterAsync=async function(e){const s=await Promise.all(this.map(e));return this.filter((r,n)=>s[n])});var Kn,Yn;(Yn=(Kn=Array.prototype).mapAsync)!=null||(Kn.mapAsync=async function(e,s){return Promise.all(this.map(e,s))});var Jn,Xn;(Xn=(Jn=Array.prototype).pushUnique)!=null||(Jn.pushUnique=function(e){this.includes(e)||this.push(e)});var Zn;(Zn=Array.guarantee)!=null||(Array.guarantee=t=>t?Array.isArray(t)?t:[t]:[]);class Vl extends Error{constructor(e){super(e!=null?e:"Operation cancelled")}}globalThis.setTimeout.async||(globalThis.setTimeout.async=function(t){let e;const s=new Promise((r,n)=>{const i=globalThis.setTimeout(r,t);e=()=>{clearTimeout(i),n(new Vl)}});return s.cancel=e,s});var Qn;(Qn=Error.stringify)!=null||(Error.stringify=ua);const ue=Object.getPrototypeOf(new Map().entries());var ei;(ei=ue.filter)!=null||(ue.filter=function*(e){for(const s of this)e(s)&&(yield s)});var ti;(ti=ue.map)!=null||(ue.map=function*(e){for(const s of this)yield e(s)});var si;(si=ue.toArray)!=null||(ue.toArray=function(){return Array.from(this)});var ri,ni;(ni=(ri=Map.prototype).getOrSet)!=null||(ri.getOrSet=function(e,s){const r=this.get(e);if(r)return r;const n=s(e);return this.set(e,n),n});var ii,oi;(oi=(ii=Map.prototype).setOrUpdate)!=null||(ii.setOrUpdate=function(e,s,r){const n=this.get(e);if(n){const o=r(e,n);return this.set(e,o),o}const i=s(e);return this.set(e,i),i});var ai,ci;(ci=(ai=Map.prototype).pop)!=null||(ai.pop=function(e){const s=this.get(e);return s!==void 0&&this.delete(e),s});var li;(li=Object.deepClone)!=null||(Object.deepClone=function(e){return as.exports.cloneDeep(e)});var ui;(ui=Object.keyOf)!=null||(Object.keyOf=function(e,s){return e in s});var pi;(pi=Object.hasProp)!=null||(Object.hasProp=function(e,s){return!!e&&typeof e=="object"&&s in e&&e[s]!==void 0&&e[s]!==null});Promise.resolved||Object.defineProperty(Promise,"resolved",{value:Promise.resolve(),writable:!1,enumerable:!1});var di;(di=Promise.raceTo)!=null||(Promise.raceTo=function(e,s=r=>!!r){return new Promise(async(r,n)=>{try{await Promise.allSettled(e.map(async i=>{try{const o=await i;s(o)&&r(o)}catch(o){n(o instanceof Error?o:new AggregateError([o]))}}))}finally{r(void 0)}})});var hi,mi;(mi=(hi=Promise.prototype).noAwait)!=null||(hi.noAwait=function(){});var gi,fi;(fi=(gi=Promise.prototype).ignoreErrors)!=null||(gi.ignoreErrors=async function(){try{return await this}catch{return}});var _i,vi;(vi=(_i=String.prototype).escapeHtml)!=null||(_i.escapeHtml=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")});var yi,Ii;(Ii=(yi=String.prototype).encodeURI)!=null||(yi.encodeURI=function(){return encodeURIComponent(this)});var wi,Ei;(Ei=(wi=String.prototype).toNumber)!=null||(wi.toNumber=function(){return Number(this)});var bi,Ai;(Ai=(bi=String.prototype).toBoolean)!=null||(bi.toBoolean=function(){return this==="true"});var Oi,Ri;(Ri=(Oi=String.prototype).toBase64)!=null||(Oi.toBase64=function(e=!1){return Buffer.from(this).toString(e?"base64url":"base64")});var Ti,Si;(Si=(Ti=String.prototype).toDate)!=null||(Ti.toDate=function(){return new Date(this)});var $i,Pi;(Pi=($i=String.prototype).byteLength)!=null||($i.byteLength=function(){return Buffer.byteLength(this)});var Di,Ci;(Ci=(Di=String.prototype).entropy)!=null||(Di.entropy=function(){const s=new Set(this).size,r=this.length;return Math.log2(s**r)});var Ni,Mi;(Mi=(Ni=String.prototype).lines)!=null||(Ni.lines=function(){return this.split(`
`)});var xi,Li;(Li=(xi=String.prototype).toSnakeCase)!=null||(xi.toSnakeCase=function(){return this.toLowerCase().replaceAll(/\s+/g,"_")});var Ui,ki;(ki=(Ui=String.prototype).toAlphaNumeric)!=null||(Ui.toAlphaNumeric=function(){return this.replaceAll(/[^A-Za-z0-9_]+/g,"")});var Gi,ji;(ji=(Gi=String.prototype).lineRange)!=null||(Gi.lineRange=function(e,s){return this.lines().slice(e,s+1).join(`
`)});var Fi,Hi;(Hi=(Fi=String.prototype).capitalize)!=null||(Fi.capitalize=function(){return this.split(" ").map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`).join(" ")});var Bi,Vi;(Vi=(Bi=String.prototype).isNumber)!=null||(Bi.isNumber=function(){const e=this.trim(),s=Number(e);return!!e&&!Number.isNaN(s)});var qi,zi;(zi=(qi=String.prototype).escapeForRegEx)!=null||(qi.escapeForRegEx=function(){return this.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});const ql=new Set(["a","an","the","and","as","but","for","if","nor","or","so","yet","at","by","in","of","off","on","per","to","up","via"]);var Wi,Ki;(Ki=(Wi=String.prototype).titleCase)!=null||(Wi.titleCase=function(){const e=this.trim().split(/\s+/);for(let s=0;s<e.length;s++){const r=e[s];if(!r||r===r.toUpperCase())continue;if(r.includes("-")){e[s]=r.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("-");continue}const i=e[s-1];(s===0||r.includes("-")||i&&/:\s*/.test(i)||!ql.has(r))&&(e[s]=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase())}return e.join(" ")});var Yi,Ji;(Ji=(Yi=String.prototype).removeLeadingSlash)!=null||(Yi.removeLeadingSlash=function(){return this.replace(/^\/+/,"")});Error.tryResolveMessage=function(e){var s;try{if(!(e instanceof Error))return null;if(!V.isAxiosError(e))return e.message||null;const r=(s=e.response)==null?void 0:s.data,n=typeof r=="object"&&r&&"message"in r?r:null;return(n==null?void 0:n.message)||e.message||null}catch{return null}};function zl(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}var Xi,Zi;(Zi=(Xi=String.prototype).extractHtmlContent)!=null||(Xi.extractHtmlContent=function(){return zl(this)});window.global=window;console.debug("polyfills loaded");class Ht extends Error{constructor(e="Unauthorized",s){super(e,s?{cause:s}:void 0),this.name="UnauthorizedError"}}var Wl={region:"us-east-2",apiUrl:"https://api.app.arnica.io",uiBucketName:"arnicacontrolplane-sitebucket397a1860-12y9qip351778",distributionId:"E13J5NFA0H1TI3"};class Kl{logEvent(e,s,r,n){n!=null||(n={intercom:!0,heap:!0,fs:!0});const{intercom:i,heap:o,fs:a}=n,c=_(_({},s),r);i&&window.Intercom("trackEvent",e,c),o&&window.heap.track(e,c),a&&window.FS.event(e,c)}updateUserProperties(e){var n;const r={email:e.email.toLocaleLowerCase(),"Tenant ID":e.orgId,"Tenant Name":e.orgName,isArnicaOrgOwner:(n=e.isOrgOwner)!=null?n:!1,"Tenant Tier":ee.name};window.heap.addUserProperties(r),window.Intercom("update",r),window.FS.setUserVars(r)}init(e){var r,n;const s=(r=e.email)==null?void 0:r.toLocaleLowerCase();window.Intercom("boot",{app_id:"tdqi2s75",email:s,created_at:Date.now(),user_hash:(n=e.userInfo)==null?void 0:n.intercomHash}),s&&(window.FS.identify(s,{displayName:s,email:s}),window.heap.identify(s))}}const Ae=new Kl;class M{constructor(){this.isAxiosError=V.isAxiosError,this.client=this.build()}get logRequests(){return!0}get logResponses(){return!0}get baseUrl(){return`${Wl.apiUrl}/${this.pathPrefix}`}build(){const e=V.create({baseURL:this.baseUrl,onDownloadProgress:s=>{},onUploadProgress:s=>{}});return e.interceptors.request.use(this.demoInterceptRequest.bind(this),void 0,{runWhen:()=>Q.enabled}),e.interceptors.response.use(this.demoInterceptResponse.bind(this),this.demoInterceptError.bind(this),{runWhen:()=>Q.enabled}),e.interceptors.request.use(this.onRequest.bind(this)),e.interceptors.response.use(this.onResponse.bind(this),this.onResponseError.bind(this)),e}demoInterceptRequest(e){return Q.requestInterceptor(e)}async demoInterceptError(e){return await Q.errorInterceptor(e)}async demoInterceptResponse(e){return await Q.responseInterceptor(e)}async onRequest(e){var s,r;return this.logRequests&&console.debug(`${this.name}: request`,e),e.tracker=e.silent?void 0:Symbol(),C.track(e.tracker),(s=e.retires)!=null||(e.retires=1),e.noCache&&((r=e.params)!=null||(e.params={}),e.params.nonce=Date.now()),await this.authenticate(e),e}async onResponse(e){if(this.logResponses&&console.debug(`${this.name}: response`,e),C.untrack(e.config.tracker),e.status===401)throw new Ht("Unauthorized");return await this.followSignedUrlDownload(e)}async onResponseError(e){var r,n,i,o;if(console.error(`${this.name}: response error`,e,(n=(r=e.response)==null?void 0:r.data)!=null?n:"no payload"),!V.isAxiosError(e))throw e;const s=e.config;if(C.untrack(s.tracker),(i=s.retires)!=null||(s.retires=1),s.retires--,s.retires<=0)throw e;if(((o=e.response)==null?void 0:o.status)===401)return await this.authenticate(s),await this.client.request(s);throw e}async followSignedUrlDownload(e){var r;const{data:s}=e;if(s&&typeof s=="object"&&"signedUrl"in s){const{signedUrl:n}=s;return n?await this.client.get(n,{anonymous:!0,responseType:(r=e.config.params)!=null&&r.forDownload?"text":"json"}):(e.data=null,e)}return e}async authenticate(e){var r;if(e.anonymous)return;const s=await this.getIdToken();((r=e.headers)!=null?r:e.headers={}).Authorization=s}async getIdToken(){try{if(!w.authenticated)throw new Ht("User is not authenticated");const e=await w.getIdToken();if(!e)throw new Ht("No ID token");return e}catch(e){throw Ae.logEvent("User Session Timed Out - Redirected To Sign In",void 0,{group:"General"}),await k.replace({name:"login"}),e}}}const Ne=new class extends M{get name(){return"UsersApi"}get pathPrefix(){return"users"}async me(e=!1,s=!1){var r,n,i;try{const a=(await this.client.get("/me",{params:{addOrg:e,autoGenerateOrg:s}})).data;return(r=a.orgId)!=null||(a.orgId=null),(n=a.requiresActivation)!=null||(a.requiresActivation=!1),Ae.updateUserProperties(a),a}catch(o){if((this.isAxiosError(o)&&((i=o.response)==null?void 0:i.status))!==403)throw o;return{requiresActivation:!0,email:"",username:"",orgName:null,orgId:null,org:null,status:null,isOrgOwner:null,preferences:null}}}async all(){try{return(await this.client.get("")).data}catch(e){debugger;throw E.error(String(e)),e}}async invite(e){await this.client.put("",e)}async remove(e){try{await this.client.delete(`/${encodeURIComponent(e)}`)}catch(s){throw E.error(String(s)),s}}async updatePreferences(e){try{await this.client.put("/me/preferences",e)}catch(s){throw E.error(String(s)),s}}},Xs=new class extends M{get name(){return"PaymentApi"}get pathPrefix(){return"payment"}async createCheckoutSession(e,s,r){try{const n=window.btoa(Date.now().toString());return window.sessionStorage.setItem(n,window.location.href),(await this.client.post(`/checkout/session/${e}/${s}/${r}`,null,{params:{state:n}})).data}catch(n){throw E.error(String(n)),n}}async createBillingPortalSession(){try{return(await this.client.post("/portal/session",null,{params:{returnUrl:window.location.href}})).data}catch(e){throw E.error(String(e)),e}}async registerCallback(e,s){try{return(await this.client.post(`/callback/${e}/${s}`)).data}catch(r){throw E.error(String(r)),r}}async getBillingSummary(){return(await this.client.get("/billing/summary")).data}},dt=new class extends M{get name(){return"AdminApi"}get pathPrefix(){return""}onResponseError(e){var s;if(((s=e==null?void 0:e.config)==null?void 0:s.url)==="/admin/tenantOverride")throw e;return super.onResponseError(e)}async ping(){return(await this.client.get("/")).data}async forceSignOut(){try{debugger;return await w.signOut(),(await this.client.post("/forceSignOut")).data}finally{}}async getTenantOverride(){var e;try{return(await this.client.get("/admin/tenantOverride",{silent:!0})).data||null}catch(s){if(this.isAxiosError(s)&&((e=s.response)==null?void 0:e.status)===404)return null;throw s}}async setTenantOverride(e){var s;try{return(await this.client.post("/admin/tenantOverride",{arnicaOrgId:e})).data||null}catch(r){if(this.isAxiosError(r)&&((s=r.response)==null?void 0:s.status)===404)return null;throw r}}async getIdentityOverrides(){return(await this.client.get("/identities/override")).data}async setIdentityOverrideItem(e){await this.client.put("/identities/override",e)}},Ms=new class extends M{get name(){return"PolicyApi"}get pathPrefix(){return"policy"}async save(e){await this.client.post("",e)}async getAll(){return(await this.client.get("")).data}async get(e){return(await this.client.get(e)).data}},Bt=new class extends M{get name(){return"PolicyV2Api"}get pathPrefix(){return"policies-v2"}async get(e){return(await this.client.get(e||"")).data}async save(e){return(await this.client.put(`${e.sub.encodeURI()}/${e.id.encodeURI()}`,e)).data}async getTypeOptions(e,s,r,n){return(await this.client.post(`options/${r.sub.encodeURI()}/rules/${s.encodeURI()}/${e.encodeURI()}`,r,{params:{sub:n}})).data}},K="https://dev.azure.com";class ne{static organizationUrl(e,s=K){return`${s}/${e.encodeURI()}`}static projectUrl(e,s,r=K){return`${this.organizationUrl(e,r)}/${s.encodeURI()}`}static repositoryUrl(e,s,r,n=K){return`${this.projectUrl(e,s,n)}/_git/${r.encodeURI()}`}static branchUrl(e,s,r,n,i=K){return`${this.repositoryUrl(e,s,r,i)}?version=GB${n.encodeURI()}`}static fileUrl(e,s,r,n,i,o=K){return`${this.branchUrl(e,s,r,n,o)}&path=${i.encodeURI()}`}static lineUrl(e,s,r,n,i,o,a=K){return`${this.fileUrl(e,s,r,n,i,a)}&line=${o}&lineEnd=${o+1}&lineStartColumn=1&lineEndColumn=1&lineStyle=plain&_a=contents`}static generateUserURL(e,s=K){return`${this.organizationUrl(e,s)}/_settings/users`}static generateGroupsURL(e,s,r=K){return`${this.organizationUrl(e,r)}/_settings/groups?subjectDescriptor=${s.encodeURI()}`}static generateRepoPermissionsURL(e,s,r,n=K){return`${this.projectUrl(e,s,n)}/_settings/repositories?repo=${r.encodeURI()}&_a=permissionsMid`}static generateBranchPermissionsURL(e,s,r,n,i=K){return`${this.projectUrl(e,s,i)}/_settings/repositories?repo=${r}&_a=permissionsMid&refs=refs/heads/${n.encodeURI()}`}static generateBranchPolicyURL(e,s,r,n,i=K){return`${this.projectUrl(e,s,i)}/_settings/repositories?_a=policiesMid&repo=${r.encodeURI()}&refs=refs/heads/${n.encodeURI()}`}static getProjectAndRepo(e,s){return e?`${e}/${s}`:s}static getCloneURL(e,s,r,n){return`https://${e}@dev.azure.com/${encodeURIComponent(s)}/${encodeURIComponent(r)}/_git/${encodeURIComponent(n)}`}static commitUrl(e,s,r,n,i=K){return`${this.repositoryUrl(e,s,r,i)}/commit/${n.encodeURI()}`}}const at={stringify(t){var e;return`${t.integrationType}/${t.integrationOrgId}/${ne.getProjectAndRepo(t.project,t.repo)}/${(e=t.branch)!=null?e:""}`},sortKey(t){var e;return`${t.integrationType}/${t.integrationOrgId}/${ne.getProjectAndRepo(t.project,t.repo)}/${(e=t.branch)!=null?e:""}`},is(t){const e=t;return!!e&&typeof e=="object"&&!!e.integrationOrgId&&!!e.integrationType&&!!e.repo}};class Zs{constructor(e){var s;this.product=null,this.asset=e.asset,this.trends=e.trends,this.timeUnit=(s=e.timeUnit)!=null?s:xt.trendsTimeUnit}get id(){return at.sortKey(this.asset)}static fromDto(e){return new Zs(e)}}const Wt=new class extends M{get name(){return"InsightsApi"}get pathPrefix(){return"insights"}async get(e=!1){try{return(await this.client.get("",{silent:e})).data}catch(s){return E.error(String(s)),{insights:[],dateGenerated:new Date().toISOString()}}}async trends(e=!1){try{return(await this.client.get("trends",{silent:e})).data.map(Zs.fromDto)}catch(s){return E.error(String(s)),[]}}async generate(e){try{await this.client.post("",e,{silent:!0})}catch(s){E.error(String(s))}}},Yl=new class extends M{get name(){return"OrgsApi"}get pathPrefix(){return"organization"}async create(e){return(await this.client.post("",{orgName:e})).data}async leave(){await this.client.delete("")}async getAll(){return(await this.client.get("",{silent:!0})).data}async updateName(e){await this.client.patch("",{orgName:e})}},Jl=new class extends M{get name(){return"CallbacksApi"}get pathPrefix(){return"callbacks"}async register(e){return(await this.client.post(e.type,e,{anonymous:!0})).data}},_e=new class extends M{get name(){return"IntegrationsApi"}get pathPrefix(){return"integrations"}async create(e){await this.client.post(e.type,e,{params:_({},e)})}async registerCallback(e){var s;return w.authenticated?(s=(await this.client.post(e.type,e)).data)!=null?s:{created:!1}:await Jl.register(e)}async getAll(e=!1,s=!1){return(await this.client.get("",{params:{healthCheck:e},silent:s})).data}async delete(e,s){await this.client.delete(`/${encodeURIComponent(e)}/${encodeURIComponent(s)}`)}async getGitHubTeams(e){return(await this.client.get(`/github/orgs/${e}/teams`)).data}},$={AZURE_DEVOPS:"AZURE_DEVOPS",GITHUB:"GITHUB",BITBUCKET:"BITBUCKET"},Me={github:$.GITHUB,"azure-devops":$.AZURE_DEVOPS,"bitbucket-server":$.BITBUCKET,slack:null,msteams:null,"scm-comm":null},Vt={[$.GITHUB]:"github",[$.AZURE_DEVOPS]:"azure-devops",[$.BITBUCKET]:"bitbucket-server"},Fm={github:"source-control","azure-devops":"source-control","bitbucket-server":"source-control",slack:"communication",msteams:"communication"};function Xl(t,e){if(typeof t=="string"){if(!e)throw new Error("integrationType is required when integrationFieldsOrOrgId is a string");return`${t}_${e}`}return Xl(t.integrationOrgId,t.integrationType)}function uo(t){return t==="pending"||t==="running"}function Zl(t){return!uo(t)}function Hm(t){return t==="permission-error"||t==="error"}var B=(t=>(t.IDENTITY="IDENTITY",t.GROUP="GROUP",t.ORG="ORG",t.PROJECT="PROJECT",t.REPO="REPO",t.BRANCH="BRANCH",t.APP_PERMISSION="APP_PERMISSION",t.APP_FULL_NAME="APP_FULL_NAME",t.SECRET_FINDING="SECRET_FINDING",t.CODE_ANALYSIS="CODE_ANALYSIS",t.SERVICE_ACCOUNT="SERVICE_ACCOUNT",t))(B||{});const gs=t=>t,Ql=(t,e)=>`${t}/${e}`,eu=(t,e,s)=>`${t}/${e}/${s}`,tu=(t,e,s,r)=>`${t}/${e}/${s}/${r}`,su=(t,e)=>`${t}/${e}`,ru=(t,e,s)=>`${t}/${e}/${s}`;function Z(t,e,s){return e?s?`${t}/${e}/${s}`:`${t}/${e}`:`${t}`}function X(t,e,s,r){return e?s?r?`${t}/${e}/${s}/${r}`:`${t}/${e}/${s}`:`${t}/${e}`:`${t}`}function nu(t,e,s){return`${t}-${e}-${s}`}function iu(t,e,s,r,n){return`${t}-${e}-${s}-${r}${n?`-${n}`:""}`}const Bm={"pending-mitigation":"pending",mitigating:"running",mitigated:"complete","error-mitigating":"error","pending-revert":"pending",reverting:"running",reverted:"complete","mitigate-pr-closed":"error","revert-pr-closed":"error","error-reverting":"error","awaiting-mitigation-pull-request-approval":"complete","awaiting-revert-pull-request-approval":"complete"},fs={RESTRICT_PUSH:"RESTRICT_PUSH",MODIFY_RESTRICT_PUSH:"MODIFY_RESTRICT_PUSH",MODIFY_CODEOWNERS:"MODIFY_CODEOWNERS",CREATE_CODEOWNERS:"CREATE_CODEOWNERS",ENABLE_AND_MODIFY_CODEOWNERS:"ENABLE_AND_MODIFY_CODEOWNERS",REDUCE_MAINTAIN_TO_WRITE:"REDUCE_MAINTAIN_TO_WRITE",REDUCE_ADMIN_TO_MAINTAIN:"REDUCE_ADMIN_TO_MAINTAIN",REDUCE_ADMIN_TO_WRITE:"REDUCE_ADMIN_TO_WRITE",REDUCE_ORG_OWNER_TO_MEMBER:"REDUCE_ORG_OWNER_TO_MEMBER",ARCHIVE:"ARCHIVE",REMOVE_USER:"REMOVE_USER",CONFIGURE_CODEOWNERS:"CONFIGURE_CODEOWNERS",ENFORCE_ARNICA_STATUS_CHECK:"ENFORCE_ARNICA_STATUS_CHECK"};var ou=(t=>(t.REMOVE_USER="REMOVE_USER",t.DISABLE_REPOSITORY="DISABLE_REPOSITORY",t.REMOVE_EXCESSIVE_REVIEWERS="REMOVE_EXCESSIVE_REVIEWERS",t.REMOVE_EXCESSIVE_CONTRIBUTORS="REMOVE_EXCESSIVE_CONTRIBUTORS",t.ENABLE_PR_REVIEWS="ENABLE_PR_REVIEWS",t.REMOVE_EXCESSIVE_ADMINS="REMOVE_EXCESSIVE_ADMINS",t.ENFORCE_ARNICA_STATUS_CHECK="ENFORCE_ARNICA_STATUS_CHECK",t))(ou||{});const _s={ORG:"ORG",PROJECT:"PROJECT",REPO:"REPO",BRANCH:"BRANCH"};function au(t,e){return e?_s.BRANCH:t?_s.REPO:_s.ORG}function Pr(t){return t.status==="mitigated"}function Vm(t){return t==="error-mitigating"||t==="error-reverting"||t==="mitigate-pr-closed"||t==="revert-pr-closed"}function qm(t){return t==="pending-revert"||t==="pending-mitigation"||t==="mitigating"||t==="reverting"}function zm(t,e){const s=new Set(t);for(const r of e)r.users.forEach(n=>s.add(n));return Array.from(s)}function cu(t){const e=new Set(t.usersDirectlyKeepingPermissions);for(const s of t.usersInTeamKeepingPermissions)s.users.forEach(r=>e.add(r));return Array.from(e)}function Dr(t){let e=0;return e+=t.usersDirectlyLosingPermissions.length,t.usersInTeamLosingPermissions.forEach(s=>{e+=s.users.length}),e}function lu(t){let e=0;return e+=t.usersDirectlyKeepingPermissions.length,t.usersInTeamKeepingPermissions.forEach(s=>{e+=s.users.length}),e}function uu(t){return[t.org,t.project,t.repo,t.branch,t.filename].nonNullable().map(e=>encodeURIComponent(e)).join("/")}const nt=new class extends M{get name(){return"DismissalsApi"}get pathPrefix(){return"dismiss"}async get(e){return(await this.client.get(e)).data}async create(...e){return(await this.client.post("",e)).data}async delete(e){return(await this.client.delete(`${encodeURIComponent(e)}`)).data}async dismissSecretItems(e,...s){const r=s.map(n=>({scmType:Me[n.integrationType],orgNames:[n.org],riskReportItemId:uu(n),riskReportItemType:B.SECRET_FINDING,comment:e}));await this.create(...r)}async dismissFindingItems(e,s,...r){const n=r.map(i=>({scmType:Me[i.integrationType],orgNames:[i.organization],riskReportItemId:e===B.SERVICE_ACCOUNT?i.user.name:i.commitSha,riskReportItemType:e,comment:s}));await this.create(...n)}async updateDismissalStatus(e,s,r){const n=`${encodeURIComponent(s.sortKey)}/${encodeURIComponent(e)}`;await this.client.put(n,{reason:r})}async takeDecision(e,s,r,n){const i=`decision/${encodeURIComponent(e.sortKey)}`;await this.client.put(i,{reason:s,suggestionDate:r,decisionAccepted:n})}},F=new class extends M{get name(){return"MitigationsApi"}get pathPrefix(){return"mitigations"}async get(e){return(await this.client.get(e)).data}async generate(e,s){return(await this.client.post(`${e}/generate`,s)).data}async generateOrgOwners(e,s){return(await this.client.post(`${e}/generate-org-owner`,s)).data}async create(e,s){return(await this.client.post(e,s)).data}async createOrgOwner(e,s){return(await this.client.post(`${e}/org-owner`,s)).data}async createStaleUser(e,s){return(await this.client.post(`${e}/hardening/stale-user`,s)).data}async createStaleRepo(e,s){return(await this.client.post(`${e}/hardening/stale-repo`,s)).data}async createUnenforceablePolicy(e,s){return(await this.client.post(`${e}/hardening/unenforceable-policy`,s)).data}async createMisconfiguredCodeowners(e,s){return(await this.client.post(`${e}/hardening/misconfigured-codeowners`,s)).data}async revert(e){return await this.client.patch("",e)}async delete(e){return await this.client.delete("",{data:e})}},po=new class extends M{get name(){return"JobsApi"}get pathPrefix(){return"jobs"}async create(){await this.client.post("")}async rerun(e){await this.client.put(e)}async delete(e){await this.client.delete(e)}async get(e=!1){return(await this.client.get("",{silent:e})).data}},ho=new class extends M{get name(){return"PermissionsApi"}get pathPrefix(){return"permission-grant"}async get(){return(await this.client.get("")).data}},Cr="REPORT_NOT_READY",S={GH_TOTAL_IDENTITIES:"GH_TOTAL_IDENTITIES",GH_AGGREGATED_REPOSITORIES:"GH_AGGREGATED_REPOSITORIES",GH_TOTAL_REPOSITORIES:"GH_TOTAL_REPOSITORIES",GH_TOTAL_ORGS:"GH_TOTAL_ORGS",GH_INACTIVE_IDENTITIES:"GH_INACTIVE_IDENTITIES",GH_REPOSITORIES_NO_BRANCH_PROTECTION:"GH_REPOSITORIES_NO_BRANCH_PROTECTION",GH_APP:"GH_APP",GH_CODEOWNER_ERRORS:"GH_CODEOWNER_ERRORS",GH_USER_REPO_PERMISSION:"GH_USER_REPO_PERMISSION"},G={ADO_TOTAL_IDENTITIES:"ADO_TOTAL_IDENTITIES",ADO_TOTAL_REPOSITORIES:"ADO_TOTAL_REPOSITORIES",ADO_EXCESSIVE_LICENSES:"ADO_EXCESSIVE_LICENSES",ADO_USER_ASSET_PERMISSION:"ADO_USER_ASSET_PERMISSION"},Oe={ADOADMIN:"ADOADMIN",ADOCODECONTRIBUTORS:"ADOCODECONTRIBUTORS",ADOPRAPPROVERS:"ADOPRAPPROVERS"},H={GHWRITE:"GHWRITE",GHMAINTAIN:"GHMAINTAIN",GHREPOADMIN:"GHREPOADMIN",GHORGOWNER:"GHORGOWNER",GHCODEOWNERS:"GHCODEOWNERS",GHAPP:"GHAPP"};var qt=(t=>(t.ADOInactiveUsers="ADOInactiveUsers",t.ADOStaleRepositories="ADOStaleRepositories",t.ADOUnenforceablePolicy="ADOUnenforceablePolicy",t))(qt||{});const jt={GHInactiveUsers:"GHInactiveUsers",GHStaleRepositories:"GHStaleRepositories",GHMisconfiguredCodeowners:"GHMisconfiguredCodeowners",GHUnenforceablePolicy:"GHUnenforcedArnicaStatusCheck"},pu={identities:0,group:1,asset:{org:2,repo:3,project:4,branch:5},profileNames:6,repositoryID:7,groupDescriptor:8,mitigateAsEnableReviewers:9,isCrossRepoPolicy:10,reverted:11,mitigationStatus:12};function du(){return{identitiesToIndex:new Map,groupToIndex:new Map,orgToIndex:new Map,repoToIndex:new Map,projectToIndex:new Map,branchToIndex:new Map,profileIdentityToIndex:new Map,profileDisplayNameToIndex:new Map,repositoryIDToIndex:new Map,groupDescriptorsToIndex:new Map}}function hu(t,e){const s=pu,{identitiesToIndex:r,groupToIndex:n,orgToIndex:i,repoToIndex:o,projectToIndex:a,branchToIndex:c,profileIdentityToIndex:l,profileDisplayNameToIndex:u,repositoryIDToIndex:h,groupDescriptorsToIndex:f}=du();function x(m){var d;if(!i.size)for(let g=0;g<e.asset.org.length;g++)i.set(e.asset.org[g],g);t[s.asset.org]=(d=i.get(m))!=null?d:-1}function A(m){var d;if(!o.size)for(let g=0;g<e.asset.repo.length;g++)o.set(e.asset.repo[g],g);t[s.asset.repo]=(d=o.get(m!=null?m:""))!=null?d:void 0}function D(m){var d;if(!a.size)for(let g=0;g<e.asset.project.length;g++)a.set(e.asset.project[g],g);t[s.asset.project]=(d=a.get(m!=null?m:""))!=null?d:void 0}function j(m){var d;if(!c.size)for(let g=0;g<e.asset.branch.length;g++)c.set(e.asset.branch[g],g);t[s.asset.branch]=(d=c.get(m!=null?m:""))!=null?d:void 0}const O={get identities(){return t[s.identities].map(m=>e.identities[m]).nonNullable()},set identities(m){if(!r.size)for(let d=0;d<e.identities.length;d++)r.set(e.identities[d],d);t[s.identities]=m.map(d=>r.get(d)).nonNullable()},get group(){var m,d;return(d=e.group[(m=t[s.group])!=null?m:-1])!=null?d:null},set group(m){var d;if(!n.size)for(let g=0;g<e.group.length;g++)n.set(e.group[g],g);t[s.group]=(d=n.get(m!=null?m:""))!=null?d:null},get asset(){return{get org(){var d;return(d=e.asset.org[t[s.asset.org]])!=null?d:""},set org(d){x(d)},get repo(){var d,g;return(g=e.asset.repo[(d=t[s.asset.repo])!=null?d:-1])!=null?g:void 0},set repo(d){A(d)},get project(){var d,g;return(g=e.asset.project[(d=t[s.asset.project])!=null?d:-1])!=null?g:void 0},set project(d){D(d)},get branch(){var d,g;return(g=e.asset.branch[(d=t[s.asset.branch])!=null?d:-1])!=null?g:void 0},set branch(d){j(d)}}},set asset(m){var d,g,q,W;x((d=m.org)!=null?d:""),A((g=m.repo)!=null?g:void 0),D((q=m.project)!=null?q:void 0),j((W=m.branch)!=null?W:void 0)},get profileNames(){var m;return(m=t[s.profileNames])==null?void 0:m.map(d=>({get identity(){var g;return(g=e.profileNames.identity[d[0]])!=null?g:""},get displayName(){var g;return(g=e.profileNames.displayName[d[1]])!=null?g:""}})).filter(d=>d.identity&&d.displayName)},set profileNames(m){if(!l.size)for(let d=0;d<e.profileNames.identity.length;d++)l.set(e.profileNames.identity[d],d);if(!u.size)for(let d=0;d<e.profileNames.displayName.length;d++)u.set(e.profileNames.displayName[d],d);t[s.profileNames]=m==null?void 0:m.map(d=>{var g,q;return[(g=l.get(d.identity))!=null?g:-1,(q=u.get(d.displayName))!=null?q:-1]})},get repositoryID(){var m,d;return(d=e.repositoryID[(m=t[s.repositoryID])!=null?m:-1])!=null?d:void 0},set repositoryID(m){var d;if(!h.size)for(let g=0;g<e.repositoryID.length;g++)h.set(e.repositoryID[g],g);t[s.repositoryID]=(d=h.get(m!=null?m:""))!=null?d:void 0},get groupDescriptor(){var m,d;return(d=e.groupDescriptor[(m=t[s.groupDescriptor])!=null?m:-1])!=null?d:null},set groupDescriptor(m){var d;if(!f.size)for(let g=0;g<e.groupDescriptor.length;g++)f.set(e.groupDescriptor[g],g);t[s.groupDescriptor]=(d=f.get(m!=null?m:""))!=null?d:null},get mitigateAsEnableReviewers(){return t[s.mitigateAsEnableReviewers]},set mitigateAsEnableReviewers(m){t[s.mitigateAsEnableReviewers]=m},get isCrossRepoPolicy(){return t[s.isCrossRepoPolicy]},set isCrossRepoPolicy(m){t[s.isCrossRepoPolicy]=m},get reverted(){return t[s.reverted]},set reverted(m){t[s.reverted]=m},get mitigationStatus(){return t[s.mitigationStatus]},set mitigationStatus(m){t[s.mitigationStatus]=m}};return t[s.mitigateAsEnableReviewers]===void 0&&delete O.mitigateAsEnableReviewers,t[s.isCrossRepoPolicy]===void 0&&delete O.isCrossRepoPolicy,t[s.reverted]===void 0&&delete O.reverted,t[s.mitigationStatus]===void 0&&delete O.mitigationStatus,O}function mu(t){const e=t.index;function*s(){for(const r of t.reportItems)yield hu(r,e)}return{reportItems:s(),summary:t.summary,optimizedReport:t}}function gu(t){return!!t&&typeof t=="object"&&"index"in t&&"reportItems"in t&&Array.isArray(t.reportItems)&&"summary"in t&&typeof t.summary=="object"&&!!t.summary&&"scmType"in t.summary&&t.summary.scmType==="AZURE_DEVOPS"}class xe extends Error{constructor(e,s){super(e),this.errors=s,Object.setPrototypeOf(this,xe.prototype)}}const J=new class extends M{get name(){return"ReportsApi"}get pathPrefix(){return"report"}get GetReportError(){return xe}async get(e,s,r=!1){return(await this.client.get(e,{params:{days:s},silent:r})).data}async getSBOMReport(){const e=await this.get("sbom");return e!=null?e:null}async getBusinessImportanceReport(){const e=await this.get("business-importance");return e!=null?e:null}async getSBOMReportDetails(e,s=!1){var r,n;try{return(r=(await this.client.get("sbom/details",{params:L(_({},e),{forDownload:s})})).data)!=null?r:null}catch(i){if(V.isAxiosError(i)&&((n=i.response)==null?void 0:n.status)===404)return[];throw i}}async getAllRisks(e={}){var a,c;const s=[],r=[];for(const l in $)if(l===$.GITHUB)for(const u of Object.values(H))s.push(this.getRisk(u,e)),r.push(`SCM Type: ${l}, Report Type: ${u}`);else if(l===$.AZURE_DEVOPS)for(const u of Object.values(Oe))r.push(`SCM Type: ${l}, Report Type: ${u}`),s.push(this.getRisk(u,e));const n=await Promise.allSettled(s),i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if((u==null?void 0:u.status)==="fulfilled"){const h=u.value;if(!h)continue;"error"in h?(o.push(h.error),console.warn(h.error)):i.push(h)}else{const h=(a=u==null?void 0:u.reason)!=null?a:"unknown";if(typeof h=="object"){const f=(c=h==null?void 0:h.response)==null?void 0:c.data,x=f==null?void 0:f.code,A=f==null?void 0:f.error;x===Cr&&o.push(`Query: [${r[l]}] had an error: ${A}`)}else o.push(h),console.warn(h)}}if(o.length>0)throw new xe("Error getting some of the report queries",o);return i}async getRisk(e,s={}){var r,n;try{return(r=(await this.client.get(`risk/${e}`,s)).data)!=null?r:null}catch(i){if(V.isAxiosError(i)&&((n=i.response)==null?void 0:n.status)===404)return{};throw i}}async getRiskByProjectId(e,s,r,n={},i=!0){var o,a;try{const l=(o=(await this.client.get(`risk/${e}/${s.encodeURI()}/${r.encodeURI()}`,L(_({},n),{params:{optimize:i}}))).data)!=null?o:null;return gu(l)?mu(l):l}catch(c){if(V.isAxiosError(c)&&((a=c.response)==null?void 0:a.status)===404)return null;throw c}}async getGitHubTotalIdentitiesInventoryReport(e={}){return await this.getInventory(S.GH_TOTAL_IDENTITIES,e)}async getInventory(e,s={}){var n,i;const r=fe.getInventoryReport(e);if(!s.noCache&&r)return r;try{return(n=(await this.client.get(`inventory/${e}`,s)).data)!=null?n:null}catch(o){if(V.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===404)return{};throw o}}async getInventoryReports(e={}){var a,c;const s=[],r=[];for(const l in S)s.push(this.getInventory(l,e)),r.push(`Report Type: ${l}`);for(const l in G)s.push(this.getInventory(l,e)),r.push(`Report Type: ${l}`);const n=await Promise.allSettled(s),i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if((u==null?void 0:u.status)==="fulfilled"){const h=u.value;if(!h)continue;"error"in h?(o.push(h.error),console.warn(h.error)):i.push(h)}else{const h=(a=u==null?void 0:u.reason)!=null?a:"unknown";if(typeof h=="object"){const f=(c=h==null?void 0:h.response)==null?void 0:c.data,x=f==null?void 0:f.code,A=f==null?void 0:f.error;x===Cr&&o.push(`Query: [${r[l]}] had an error: ${A}`)}else o.push(h),console.warn(h)}}if(o.length>0)throw new xe("Error getting some of the report queries",o);return i}},fu=new class extends M{get name(){return"UploadsApi"}get pathPrefix(){return"uploads"}followSignedUrlDownload(e){return Promise.resolve(e)}async getGitHubAuditsPreSignedURL(e){try{return(await this.client.post("github/audits",e)).data}catch(s){throw console.error("getGitHubAuditsPreSignedURL",e,s),s}}async file(e,s){return(await V.put(e,s)).data}async gitHubAudits(e,s){const{signedUrl:r}=await this.getGitHubAuditsPreSignedURL(e);if(!!r)return await this.file(r,s)}};class _u extends M{get name(){return"NotificationsApi"}get pathPrefix(){return"notifications"}get logRequests(){return!1}get logResponses(){return!1}async get(e=!0){const r=(await this.client.get("",{silent:e})).data;return r.sort((n,i)=>n.timestamp>i.timestamp?-1:1),r}async updateStatus(e,s){await this.client.patch(encodeURIComponent(e.timestamp),{read:s})}async markAllAsRead(){await this.client.post("read")}async deleteAll(){await this.client.delete("")}async delete(e){await this.client.delete(encodeURIComponent(e.timestamp))}}const xs=new _u,zt=new class extends M{get name(){return"APIKeysAPI"}get pathPrefix(){return"api-keys"}async createAPIKey(e){return(await this.client.post("",e)).data}async getAPIKeys(){return(await this.client.get("")).data}async delete(e){await this.client.delete(`/${encodeURIComponent(e)}`)}},vu=new class extends M{get name(){return"FlagsApi"}get pathPrefix(){return"flags"}async tryGetFlag(e){try{const r=(await this.client.get(encodeURIComponent(e))).data;return typeof r=="string"&&r.length===0?null:r}catch{return null}}async getFlags(...e){try{return(await this.client.get("",{params:Object.fromEntries(e.map(r=>[r,""]))})).data}catch{return Object.fromEntries(e.map(r=>[r,null]))}}};var Ue;class yu extends M{constructor(){super(...arguments);R(this,Ue,new Map)}get name(){return"Github"}get pathPrefix(){return""}get baseUrl(){return"https://api.github.com"}onRequest(s){return s.anonymous=!0,super.onRequest(s)}async tryGetUser(s,r=!0){const n=r?y(this,Ue).get(s):void 0;if(n!==void 0)return n;try{const i=await this.client.get(`users/${s}`),o=i.data.login===s?i.data:null;return y(this,Ue).set(s,o),o}catch{return y(this,Ue).set(s,null),null}}}Ue=new WeakMap;const Iu=new yu,it=new class extends M{get name(){return"GroupsApi"}get pathPrefix(){return"groups"}async get(e){return(await this.client.get(e)).data}async create(e){return(await this.client.post(e.scm,e)).data}async update(e,s,r){return(await this.client.patch(`${e}/${s.encodeURI()}`,r)).data}async delete(e,s){await this.client.delete(`${e}/${s.encodeURI()}`)}},Ls=new class extends M{get name(){return"CodeRiskApi"}get pathPrefix(){return"risk/code"}async getCodeRiskReport(e=!1,s,r,n,i,o,a){var h;const c={silent:e},l=n?`${n}/${i}`:i;return(h=(await this.client.get(`${o.encodeURI()}/${a.encodeURI()}/${s.encodeURI()}/${r.encodeURI()}/${l.encodeURI()}`,c)).data)!=null?h:null}async getCodeRiskReportDetails(e,s,r){var n,i;try{return(n=(await this.client.get(`${e.encodeURI()}/${s.encodeURI()}/details/${r.encodeURI()}`)).data)!=null?n:null}catch(o){if(V.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===404)return null;throw o}}async getCodeRiskSingleFindingReport(e,s=!1){var n;const r={silent:s};try{const o=(n=(await this.client.get(`${e.encodeURI()}`,r)).data)!=null?n:null;return Array.guarantee(o).nonNullable()}catch(i){return console.error(i),null}}async createSharableLink(e){return(await this.client.post(`${e.encodeURI()}/link`)).data}},wu=new class extends M{get name(){return"BotsApi"}get pathPrefix(){return"bots"}async getChannels(e,s){return(await this.client.get(`${e}/channels`,{params:{integrationOrgId:s||""}})).data}async getUsers(e,s){return(await this.client.get(`${e}/users`,{params:{integrationOrgId:s||""}})).data}},vs="https://github.com",Eu="arnica-admins",ng="{unknown}",bu="http://arnica.io/claims/groups";class mo extends Qo{constructor(e,s){var r;super(),this.userInfo=s,Object.assign(this,e),this.groups=(r=this[bu])!=null?r:[],this.isArnicaAdmin=!!this.groups.find(n=>n===Eu)}get isEmailVerified(){return!!this.email&&!!this.email_verified}get public(){var e;return!!((e=this.userInfo)!=null&&e.public)}get registered(){var e;return!!((e=this.userInfo)!=null&&e.scopes.includes("registered"))}}class Au extends M{get name(){return"AuthApi"}get pathPrefix(){return"auth"}async getIdToken(){try{const e=await w.getIdToken();if(!e)throw new Ht("No ID token");return e}catch(e){throw await k.replace({name:"login"}),e}}async onResponseError(e){var s;try{return await super.onResponseError(e)}catch{if(!V.isAxiosError(e)||((s=e.response)==null?void 0:s.status)!==401)throw e;return await w.signOut(),C.reloadHome(),null}}async getUserInfo(){const e=await this.client.get("user");return e.data?new mo({email:e.data.email,email_verified:!0},e.data):null}}const Us=new Au;var Nr=Object.freeze(Object.defineProperty({__proto__:null,Users:Ne,Payment:Xs,Admin:dt,Policy:Ms,PolicyV2:Bt,Insights:Wt,Orgs:Yl,Integrations:_e,Dismissals:nt,Mitigations:F,Jobs:po,Permissions:ho,GetReportError:xe,Reports:J,Uploads:fu,Notifications:xs,APIKeys:zt,Flags:vu,Github:Iu,Groups:it,CodeRisk:Ls,Bots:wu,Auth:Us},Symbol.toStringTag,{value:"Module"}));p.use({install(){p.prototype.$api=Nr,p.api=Nr}});function Ou(t,{borderColor:e,borderWidth:s,fillColor:r,index:n}){const i=typeof n=="number"?n:-1,{x:o,y:a}=t.scales;if(!o||!a||i===-1)return;const c=o.width/(o.max+1),l=c*n+o.left,{height:u,top:h}=a;o.getPixelForTick(i);const f=t.ctx;f.beginPath(),e&&(f.strokeStyle=e,f.lineWidth=s!=null?s:2,f.rect(l,h,c,u),f.stroke()),r&&(f.fillStyle=r,f.fillRect(l,h,c,u))}function Ru(t,{borderColor:e,borderWidth:s,fillColor:r,index:n}){const i=typeof n=="number"?n:-1,o=e!=null?e:r,{x:a,y:c}=t.scales;if(!a||!c||!o||i===-1)return;const l=a.getPixelForValue(i,i),u=t.ctx;u.beginPath(),u.lineWidth=s!=null?s:2,u.strokeStyle=o,u.moveTo(l,c.bottom),u.lineTo(l,c.top),u.stroke()}ea.register({id:"highlight",beforeDraw(t,e,s){if(!(s!=null&&s.enabled))return;const{borderColor:r,fillColor:n}=s;!r&&!n||(t.getSortedVisibleDatasetMetas().some(i=>i.type==="bar")?Ou(t,s):Ru(t,s))}});var Tu=Object.defineProperty,Su=Object.getOwnPropertyDescriptor,Pt=(t,e,s,r)=>{for(var n=r>1?void 0:r?Su(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Tu(e,s,n),n};let Re=class extends p{get classes(){return Object.entries({"no-spin":this.type==="number","text-align-center":this.centered,outlined:this.outlined}).filter(([,t])=>t).map(([t])=>t).join(" ")}};Pt([Ws("input")],Re.prototype,"value",2);Pt([I({type:String,default:"text"})],Re.prototype,"type",2);Pt([I({type:Boolean,default:!1})],Re.prototype,"outlined",2);Pt([I({type:Boolean,default:!0})],Re.prototype,"centered",2);Re=Pt([b({inheritAttrs:!1})],Re);var $u=Object.defineProperty,Pu=Object.getOwnPropertyDescriptor,Qs=(t,e,s,r)=>{for(var n=r>1?void 0:r?Pu(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&$u(e,s,n),n};let ht=class extends p{get classes(){return Object.entries({outlined:this.outlined}).filter(([,t])=>t).map(([t])=>t).join(" ")}};Qs([Ws("change")],ht.prototype,"value",2);Qs([I({type:Boolean,default:!1})],ht.prototype,"outlined",2);ht=Qs([b({inheritAttrs:!1})],ht);var Du=Object.defineProperty,Cu=Object.getOwnPropertyDescriptor,Dt=(t,e,s,r)=>{for(var n=r>1?void 0:r?Cu(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Du(e,s,n),n};let Te=class extends p{get indexOfValue(){return this.items.indexOf(this.value)}get classes(){return Object.entries({"text-align-center":this.centered,outlined:this.outlined}).filter(([,t])=>t).map(([t])=>t).join(" ")}onChange(t){const e=t.target.value;this.$emit("change",e)}};Dt([Ws("change")],Te.prototype,"value",2);Dt([I({type:Boolean,default:!1})],Te.prototype,"outlined",2);Dt([I({type:Boolean,default:!1})],Te.prototype,"centered",2);Dt([I({type:Array,required:!0})],Te.prototype,"items",2);Te=Dt([b({inheritAttrs:!1})],Te);var Nu=Object.freeze(Object.defineProperty({__proto__:null,get InlineTextbox(){return Re},get InlineCheckbox(){return ht},get InlineSelect(){return Te}},Symbol.toStringTag,{value:"Module"}));for(const[t,e]of Object.entries(Nu))console.debug(`Registering component: '${t}'`),p.component(t,e);function Mu(t,e){var r;const s=document.createComment(" ");Object.defineProperty(s,"setAttribute",{value:()=>{}}),e.text=" ",e.elm=s,e.isComment=!0,delete e.context,delete e.tag,(r=e.data)==null||delete r.directives,e.componentInstance&&(e.componentInstance.$el=s),t.parentNode&&t.parentNode.replaceChild(s,t)}const xu={show(t){t.style.display=""},enable(t){t.disabled=!1}},Lu={hide(t){t.style.display="none"},disable(t){t.disabled=!0},remove(t,e){Mu(t,e)}},Mr={"v-btn":[()=>["disable","class!v-btn--disabled"]],"*":[()=>["hide"]]};var ke,wt,Et,bt,At,Ge,je,ae,ss,go,rs,fo,Ot,ks,ns,_o,Rt,Gs,Tt,js;const se=class{constructor(e,s,r){R(this,ss);R(this,Rt);R(this,Tt);R(this,wt,void 0);R(this,Et,void 0);R(this,bt,void 0);R(this,At,void 0);R(this,Ge,void 0);R(this,je,void 0);R(this,ae,void 0);var n,i,o,a;re(n=se,rs,fo).call(n,e.modifiers,r),U(this,wt,!!e.modifiers.exact),U(this,Et,!!e.modifiers.max),U(this,bt,Object.entries(xu).filter(([c])=>e.modifiers[c]).map(([,c])=>c)),U(this,At,Object.entries(Lu).filter(([c])=>e.modifiers[c]).map(([,c])=>c)),U(this,Ge,re(i=se,Ot,ks).call(i,e.modifiers,"*")),U(this,je,re(o=se,Ot,ks).call(o,e.modifiers,"!")),U(this,ae,re(a=se,ns,_o).call(a,e.arg,s))}static bind(e,s,r){var i;const n=new se(s,e,r);y(se,ke).set(e,n),re(i=n,Tt,js).call(i,e,r)}static update(e,s,r){var i;const n=y(se,ke).get(e);if(!n){console.warn("tier directive missing element config",e);return}re(i=n,Tt,js).call(i,e,r)}static unbind(e){y(se,ke).delete(e)}};let ie=se;ke=new WeakMap,wt=new WeakMap,Et=new WeakMap,bt=new WeakMap,At=new WeakMap,Ge=new WeakMap,je=new WeakMap,ae=new WeakMap,ss=new WeakSet,go=function(){if(y(this,ae)===null)return!1;const e=ee.current;return y(this,wt)?e==y(this,ae):y(this,Et)?e<=y(this,ae):e>=y(this,ae)},rs=new WeakSet,fo=function(e,s){var n,i,o;if(Object.keys(e).length>0)return;const r=(o=Mr[(i=(n=s.componentOptions)==null?void 0:n.tag)!=null?i:"*"])!=null?o:Mr["*"];if(!!r)for(const a of r){const c=a(s);!c||c.forEach(l=>e[l]=!0)}},Ot=new WeakSet,ks=function(e,s){return Object.keys(e).map(r=>{var n;return(n=r.match(`^class\\${s}(.*)`))==null?void 0:n[1]}).filter(r=>!!r)},ns=new WeakSet,_o=function(e,s){if(!e||!(e in N))return console.warn("Invalid tier name",s),null;const r=N[e];return Number.isNaN(r)?(console.error("Invalid tier",s),null):r},Rt=new WeakSet,Gs=function(e,s,r,n,i){e.forEach(o=>o(n,i)),s.forEach(o=>n.classList.add(o)),r.forEach(o=>n.classList.remove(o))},Tt=new WeakSet,js=function(e,s){!y(this,ae)||(y(this,ss,go)?re(this,Rt,Gs).call(this,y(this,bt),y(this,Ge),y(this,je),e,s):re(this,Rt,Gs).call(this,y(this,At),y(this,je),y(this,Ge),e,s))},R(ie,rs),R(ie,Ot),R(ie,ns),R(ie,ke,new WeakMap);p.directive("tier",{bind:ie.bind,update:ie.update,unbind:ie.unbind});const De={off:500,on:200,left:0,top:-5,align:"center",html:!1},ys={off(t){return t?Number.parseInt(t,10):De.off},on(t){return t?Number.parseInt(t,10):De.on},left(t){return t?Number.parseInt(t,10):De.left},top(t){return t?Number.parseInt(t,10):De.top},align(t){return typeof t=="string"?t:De.align},html(t){return t!=="false"}};class Kt{static resolveConfigurations(e){const r=Object.keys(e.modifiers).map(i=>i.split(":")).map(([i,o])=>{var a;return[i,(a=ys[i])==null?void 0:a.call(ys,o)]}),n=Object.fromEntries(r);return _(_({},De),n)}static bind(e,s,r,n){var c;const i=(c=r.context)==null?void 0:c.$root;if(!i){console.warn("TooltipDirective: no root");return}const o=Kt.resolveConfigurations(s),a={enter(l){i.$emit("tooltip.enter",e,s,r,n,o,l)},leave(l){i.$emit("tooltip.leave",e,s,r,n,o,l)}};e.addEventListener("mouseenter",a.enter),e.addEventListener("mouseleave",a.leave),e.__TooltipDirectiveHandlers=a}static unbind(e){!e.__TooltipDirectiveHandlers||(e.removeEventListener("mouseenter",e.__TooltipDirectiveHandlers.enter),e.removeEventListener("mouseleave",e.__TooltipDirectiveHandlers.leave))}}p.directive("tooltip",{bind:Kt.bind,unbind:Kt.unbind});class er{static async inserted(e,s){var a,c;const r=Object.keys(s.modifiers).at(0),n=document.createComment(`${e.tagName} ${r}`);if((a=e.parentNode)==null||a.replaceChild(n,e),!r){console.warn("FlagDirective: no flag name");return}const i=await Ke.tryGetFlag(r);await er.checkFlag(s,i)&&((c=n.parentNode)==null||c.replaceChild(e,n))}static async checkFlag(e,s){if(typeof e.value!="function")return e.value===s;try{return!!await e.value(s)}catch(r){return console.warn("FlagDirective: error evaluating flag value",r),!1}}}p.directive("flag",{inserted:er.inserted});class Uu{static inserted(e,s){var o;const r=Object.keys(s.modifiers);if(!r.length){console.warn("ScopeDirective: no scopes");return}const n=w.scopes;if(!r.some(a=>!!n[a])){const a=document.createComment(`${e.tagName} ${r.join(",")}`);(o=e.parentNode)==null||o.replaceChild(a,e)}}}p.directive("scope",{inserted:Uu.inserted});const ku=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function Gu(t){return typeof t!="number"?t:Number.isNaN(t)?"-":ku.format(t)}p.filter("currency",Gu);function ju(t){return Xe(t).format("MMM DD, YYYY HH:mm:ss")}function Fu(t){if(t===null)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"Invalid":e.toLocaleString()}function Hu(t,e){if(t===null)return"-";const s=Xe(t);return s.isValid()?s.format(e):"-"}function Bu(t){return Xe(t).fromNow()}p.filter("dateMMM",ju);p.filter("dateTime",Fu);p.filter("dateTimeFormat",Hu);p.filter("dateFromNow",Bu);function Vu(t,e){return la(t,e)}p.filter("middleEllipses",Vu);p.filter("shortenNumber",da);p.filter("formatNumber",t=>t.toLocaleString());const Fs=Object.fromEntries(Object.entries(N).filter(([t])=>isNaN(+t)).map(([t,e])=>[e,{upper:t.toLocaleUpperCase(),lower:t.toLocaleLowerCase(),title:`${t.charAt(0).toLocaleUpperCase()}${t.slice(1).toLocaleLowerCase()}`,default:t}]).concat([[-1,{upper:"INVALID",lower:"invalid",title:"Invalid",default:"invalid"}]]));function we(t,e){var s;return((s=Fs[t])!=null?s:Fs[-1])[e!=null?e:"default"]}we.RESOLVER=Fs;p.filter("tierName",we);function vo(t,e){var o,a;const s=[],r=t==null?void 0:t.extra.dataflow_trace;if(r!=null&&r.intermediate_vars){const c=(a=(o=r==null?void 0:r.intermediate_vars)==null?void 0:o.map(l=>e(l.location)))!=null?a:[];s.pushAll(c.nonNullable())}const n=e(t);n&&s.push(n);const i=e(r==null?void 0:r.taint_source.location);return i&&s.push(i),s}function ig(t){const e=vo(t,s=>{var r;return(r=s==null?void 0:s.start)==null?void 0:r.line});return Math.min(...e)}function qu(t){const e=vo(t,s=>s?s.start.offset-(s.start.col-1):void 0);return Math.min(...e)}function og(t){var a,c,l,u;if(!t||!t.start.offset)return[];const e=qu(t),s="no-keep-markup",r=(l=(c=(a=t==null?void 0:t.extra.dataflow_trace)==null?void 0:a.intermediate_vars)==null?void 0:c.map(h=>({startIndex:h.location.start.offset-e,endIndex:h.location.end.offset-e,class:`${s} intermediate-var`,tooltip:"Intermediate Var",content:h.content})))!=null?l:[],n=(u=t==null?void 0:t.extra.dataflow_trace)==null?void 0:u.taint_source,i={startIndex:t.start.offset-e,endIndex:t.end.offset-e,class:`${s} finding`,tooltip:"Taint Sink",content:t.extra.lines.substring(t.start.col-1,t.end.col-1)},o=[];if(o.push(i),o.pushAll(r),n){const h={startIndex:n.location.start.offset-e,endIndex:n.location.end.offset-e,class:`${s} taint-source`,tooltip:"Taint Source",content:n.content};o.push(h)}return o}function zu(t,e){var i,o,a,c;e.sort((l,u)=>l.startIndex-u.startIndex);const s=[];for(let l=0;l<e.length;l++){const u=e[l];let h=(i=e[l+1])==null?void 0:i.startIndex;for(;h&&h<u.endIndex;)console.error("nextStartIndex is smaller than endIndex",h,u.endIndex),l++,h=(o=e[l+1])==null?void 0:o.startIndex;s.push(u)}e=s;const r=[],n=t.substring(0,(a=e[0])==null?void 0:a.startIndex);r.push(n.escapeHtml());for(let l=0;l<e.length;l++){const u=e[l],h=t.substring(u.startIndex,u.endIndex),f=(c=e[l+1])==null?void 0:c.startIndex,x=t.substring(u.endIndex,f),A=u.class,D=u.tooltip;if((A==null?void 0:A.includes('"'))||(A==null?void 0:A.includes("'")))throw new Error(`class name cannot contain " or '`);if((D==null?void 0:D.includes('"'))||(D==null?void 0:D.includes("'")))throw new Error(`tooltip name cannot contain " or '`);const j=A?` class="${A}"`:"",O=D?` title="${D}"`:"";r.push(`<mark${j}${O}>`),r.push(h.escapeHtml()),r.push("</mark>"),r.push(x.escapeHtml())}return r.join("")}const Wu={title:!0,scanner:!0,dataType:!0,detectedOn:!0,metadata:!0,risk:!0,path:!0,lineNumber:!0,arnicaOrgId:!0,sortKey:!0,context:!0,integrationOrgId:!0,integrationType:!0,baseUrl:!0,project:!0,repo:!0,branch:!0,firstDetectedOn:!0,isOnPush:!0,slaStart:!0,policy:!1,integrationTypeAndFindingTypeAndIntegrationOrgId:!1,integrationTypeAndFindingTypeAndIntegrationOrgIdAndRepoAndDetectedOn:!1,fileSortKey:!1,v:!0,license:!0,packageType:!0},Ku=Object.entries(Wu).filter(([,t])=>t).map(([t])=>t).reduce((t,e)=>L(_({},t),{[`#${e}`]:e}),{});Object.keys(Ku).join(", ");var Yu=Object.defineProperty,Ju=Object.getOwnPropertyDescriptor,$e=(t,e,s,r)=>{for(var n=r>1?void 0:r?Ju(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Yu(e,s,n),n};let de=class extends p{constructor(){super(...arguments),this.lines=[]}get markedCode(){return this.highlights.length>1?zu(this.code,this.highlights):this.code.escapeHtml()}async mounted(){if(ta.highlightAll(!1),this.lines.forEach(t=>t.remove()),this.highlights.length>1){const t=this.$refs.code;if(!t)return;const e={element:t.getElementsByClassName("finding")[0],color:"red"},s={element:t.getElementsByClassName("taint-source")[0],color:"purple"},r=[...t.getElementsByClassName("intermediate-var")].map(i=>({element:i,color:"orange"}));if(!e||!s)return;const n=[s,...r!=null?r:[],e];for(let i=0;i<n.length-1;i++){const o=n[i],a=n[i+1];(o==null?void 0:o.element)&&(a==null?void 0:a.element)&&this.lines.push()}}window.addEventListener("scroll",this.onWindowScroll,{capture:!0})}onWindowScroll(){var t;(t=this.lines)==null||t.forEach(e=>e.position())}destroyed(){this.lines.forEach(t=>t.remove()),this.lines=[],window.removeEventListener("scroll",this.onWindowScroll)}};$e([I({type:String,required:!1,default:""})],de.prototype,"language",2);$e([I({type:String,required:!0})],de.prototype,"code",2);$e([I({type:Boolean,required:!1,default:!1})],de.prototype,"showLines",2);$e([I({type:Number,required:!1,default:1})],de.prototype,"startLine",2);$e([I({type:Array,required:!1,default:[]})],de.prototype,"highlights",2);$e([I({type:String,required:!0})],de.prototype,"id",2);de=$e([b],de);var Xu=de,Zu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"component highlight"},[s("pre",{class:`${t.showLines?" line-numbers":""}`,attrs:{"data-start":t.startLine}},[s("code",{ref:"code",class:`language-${t.language}`,domProps:{innerHTML:t._s(t.markedCode)}})])])},Qu=[];const xr={};var ep=P(Xu,Zu,Qu,!1,tp,null,null,null);function tp(t){for(let e in xr)this[e]=xr[e]}var sp=function(){return ep.exports}();p.component("highlight",sp);p.use({install(){p.prototype.$state=bs,p.state=bs}});var St;class Ct{constructor(e){R(this,St,void 0);U(this,St,e)}get current(){return y(this,St).current}}St=new WeakMap;class rp extends Ct{get free(){return this.current<N.free}get team(){return this.current<N.team}get business(){return this.current<N.business}get enterprise(){return this.current<N.enterprise}of(...e){const s=this.current;return!e.some(r=>r>=s)}}class np extends Ct{get free(){return this.current>N.free}get team(){return this.current>N.team}get business(){return this.current>N.business}get enterprise(){return this.current>N.enterprise}of(...e){const s=this.current;return!e.some(r=>r<=s)}}class ip extends Ct{get free(){return this.current<=N.free}get team(){return this.current<=N.team}get business(){return this.current<=N.business}get enterprise(){return this.current<=N.enterprise}of(...e){const s=this.current;return!e.some(r=>r>s)}}class op extends Ct{get free(){return this.current>=N.free}get team(){return this.current>=N.team}get business(){return this.current>=N.business}get enterprise(){return this.current>=N.enterprise}of(...e){const s=this.current;return!e.some(r=>r<s)}}class ap extends Ct{get free(){return this.current===N.free}get team(){return this.current===N.team}get business(){return this.current===N.business}get enterprise(){return this.current===N.enterprise}of(...e){const s=this.current;return!e.some(r=>r!==s)}}const ee=new class{constructor(){this.override=null,this.is=new ap(this),this.min=new op(this),this.max=new ip(this),this.over=new np(this),this.under=new rp(this),p.observable(this)}get current(){var e,s,r,n;return(n=(r=(s=(e=w.user)==null?void 0:e.userInfo)==null?void 0:s.org)==null?void 0:r.tier)!=null?n:N.free}get name(){return we(this.current)}get upper(){return we(this.current,"upper")}get lower(){return we(this.current,"lower")}get title(){return we(this.current,"title")}as(e){return we(this.current,e)}};p.use({install(){p.prototype.$tier=ee,p.tier=ee}});function cp(t,e){var s;if(!t.org&&t.integrationOrgId&&(t.org=t.integrationOrgId),!t.org)throw new Error("org is required");if(e==="repo"&&!t.repo)throw new Error("repo is required");if((e==="project"||t.integrationType==="azure-devops")&&!t.project)throw new Error("project is required");if(e==="branch"&&!t.branch)throw new Error("branch is required");if(e==="path"&&!t.path)throw new Error("path is required");if(e==="commit"&&!t.commitHash)throw new Error("commitHash is required");switch(t.integrationType){case"github":{const r=`${(s=t.baseUrl)!=null?s:"https://github.com"}`;if(e==="commit")return t.path?`${r}/${t.org}/${t.repo}/blob/${t.commitHash}/${t.path}`:`${r}/${t.org}/${t.repo}/commit/${t.commitHash}`;const n=e!=="org"?`/${t.repo}`:"",i=e==="branch"?`/tree/${t.branch}`:e==="path"?`/blob/${t.branch}/${t.path}`:"",o=e==="path"&&t.lineNumber?`#L${t.lineNumber}`:"";return`${r}/${t.org}${n}${i}${o}`}case"azure-devops":return e==="org"?ne.organizationUrl(t.org,t.baseUrl):e==="project"?ne.projectUrl(t.org,t.project,t.baseUrl):e==="repo"?ne.repositoryUrl(t.org,t.project,t.repo,t.baseUrl):e==="branch"?ne.branchUrl(t.org,t.project,t.repo,t.branch,t.baseUrl):e==="path"?t.lineNumber?ne.lineUrl(t.org,t.project,t.repo,t.branch,t.path,t.lineNumber,t.baseUrl):ne.fileUrl(t.org,t.project,t.repo,t.branch,t.path,t.baseUrl):e==="commit"?ne.commitUrl(t.org,t.project,t.repo,t.commitHash,t.baseUrl):null;default:return null}}function yo(t,e,s){const r=new Blob([t],{type:e}),n=document.createElement("a");if(n.download!==void 0){const i=URL.createObjectURL(r);n.setAttribute("href",i),n.setAttribute("download",s),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function lp(t,e="export.csv"){const s=sa.exports.unparse(t,{header:!0});e.endsWith(".csv")||(e+=".csv"),yo(s,"text/csv;charset=utf-8;",e)}function up(t){return Xe(t).fromNow()}function pp(t){return Xe(t).format()}function dp(t,e){return t!=null?t:e}const hp={js:"mdi-language-javascript",jsx:"mdi-react",ts:"mdi-language-typescript",tsx:"mdi-react",vue:"mdi-vuejs",json:"mdi-code-json",yaml:"mdi-code-json",yml:"mdi-code-json",html:"mdi-language-html5",htm:"mdi-language-html5",css:"mdi-language-css3",scss:"mdi-language-css3",sass:"mdi-language-css3",less:"mdi-language-css3",md:"mdi-language-markdown",txt:"mdi-file-document-outline",c:"mdi-language-c",cpp:"mdi-language-cpp",py:"mdi-language-python",java:"mdi-language-java",go:"mdi-language-go",sh:"mdi-bash",rb:"mdi-language-ruby",php:"mdi-language-php",cs:"mdi-language-csharp",xml:"mdi-xml",sql:"mdi-database",rs:"mdi-language-rust",kt:"mdi-language-kotlin",swift:"mdi-language-swift",hs:"mdi-language-haskell",hsc:"mdi-language-haskell",lua:"mdi-language-lua",docker:"mdi-docker",cer:"mdi-certificate",pem:"mdi-certificate",key:"mdi-key"};function mp(t){var s;if(!t)return"mdi-file-document-outline";const e=t.toLowerCase().includes("dockerfile")?"docker":t.split(".").pop();return(s=hp[e!=null?e:""])!=null?s:"mdi-file-document-outline"}var Lr=Object.freeze(Object.defineProperty({__proto__:null,getResourceSCMUrl:cp,downloadFile:yo,csvExport:lp,fromNow:up,dateFormat:pp,fallback:dp,mdiIconByFileExtension:mp},Symbol.toStringTag,{value:"Module"}));p.use({install(){p.prototype.$utils=Lr,p.utils=Lr}});const Ur={light:{hover:"#ECEFF1",success:"#40bca3"},dark:{hover:"#424242",success:"#40bca3"}};p.use(ro,{directives:na});var Qi,eo;const Hs=new ro({rtl:!1,theme:{dark:!1,themes:{dark:(Qi=Ur.dark)!=null?Qi:{},light:(eo=Ur.light)!=null?eo:{}}}});function gp(t){const e=t.afterEach(async()=>{C.appLoaded=!0,await p.nextTick(),e()});return t}async function fp(t){var e,s;((e=t.meta)==null?void 0:e.auth)==="restricted"||((s=t.meta)==null?void 0:s.skipInit)===!0||!w.hasOrgId||await Promise.allSettled([te.init(!1,!0),jo.init(),sr.init(!0,!1)])}function _p(t){return t.afterEach(fp),t}async function vp(t,e,s,r){var i,o,a;const n=(o=(i=e.meta)==null?void 0:i.auth)!=null?o:"required";if(e.name==="error"&&n==="optional"||(await w.init(),n==="optional"))return r();try{switch(n){case"required":{if(!w.authenticatedAndEmailVerified)throw new Error("Authentication required");break}case"restricted":{if(w.authenticatedAndEmailVerified)throw new Error("This page is not available");break}default:return r()}return r()}catch(c){if((a=e.meta)!=null&&a.fallbackRoute)return r(e.meta.fallbackRoute);if(t)return r(t);c instanceof Error&&r(c),r(!1)}}function yp(t,e){return t.beforeEach(vp.bind(null,e)),t}function Ip(t){const e=t.params.scmType;if(!e)return;te.scmTypes.some(r=>r.value===e)&&(C.scmType=e)}function wp(t){return t.afterEach(Ip),t}function Ep(t){var s;const e=(s=t.meta)==null?void 0:s.tier;switch(typeof e){case"undefined":return!0;case"function":return e(ee);case"object":return e.enabled(ee);default:throw new Error("Invalid route tier configuration",e)}}async function bp(t,e,s){var r,n,i;try{if(Ep(t))s();else throw new Error(`This page ('${(i=(n=(r=t.meta)==null?void 0:r.title)!=null?n:t.name)!=null?i:t.path}') is not available for your current tier.<br>Please consider upgrading.`)}catch(o){o instanceof Error&&await E.error(o.message,{timeout:E.INDEFINITELY,html:!0,route:"/upgrade"})}}function Ap(t){return t.beforeEach(bp),t}function Op(t){var e;return(e=t.meta)==null?void 0:e.title}function Rp(t){const e=t.matched.map(Op).nonNullable().join(" \u2502 ");C.title=e!=null?e:null}function Tp(t){return t.afterEach(Rp),t}function Sp(t){Ae.logEvent(`${t.fullPath} Page Visited`,{route:t.fullPath,routeFrom:t.redirectedFrom,time:new Date},{group:"General"},{intercom:!0,heap:!1,fs:!1})}function $p(t){return t.afterEach(Sp),t}function Pp(t){return t=gp(t),t=yp(t,{name:"login"}),t=Ap(t),t=Tp(t),t=wp(t),t=$p(t),t=_p(t),t}const Dp="modulepreload",kr={},Cp="/",v=function(e,s){return!s||s.length===0?e():Promise.all(s.map(r=>{if(r=`${Cp}${r}`,r in kr)return;kr[r]=!0;const n=r.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":Dp,n||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),n)return new Promise((a,c)=>{o.addEventListener("load",a),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};class Np{constructor(){this.subscribers=new Map,this.oneTimes=new Map,p.observable(this),this.emitOneTime=this.emitOneTime.bind(this)}async executeCallbacks(e,s,r){if(!s)return;const n=Array.from(s).map(i=>{const o=i(e,...r);return o instanceof Promise?o:Promise.resolve(o)});await Promise.all(n)}async emitOneTime(e,...s){const r=this.oneTimes.get(e),n=r&&Array.from(r);r==null||r.clear(),this.oneTimes.delete(e),await this.executeCallbacks(e,n,s)}async emit(e,...s){const r=this.subscribers.get(e);await this.executeCallbacks(e,r,s)}on(e,s){var n;const r=(n=this.subscribers.get(e))!=null?n:new Set;this.subscribers.set(e,r),r.add(s)}once(e,s){var n;const r=(n=this.oneTimes.get(e))!=null?n:new Set;this.oneTimes.set(e,r),r.add(s),this.on(e,this.emitOneTime)}off(e,s){const r=[this.subscribers,this.oneTimes];s?r.forEach(n=>{var i;return(i=n.get(e))==null?void 0:i.delete(s)}):r.forEach(n=>{var i;(i=n.get(e))==null||i.clear(),n.delete(e)})}}const Io=new Np,Pe={text:"",color:"primary",html:!1,timeout:4e3};function Mp(...t){return()=>t.forEach(e=>e==null?void 0:e())}const E=new class{constructor(){this._message=_({},Pe),p.observable(this)}get INDEFINITELY(){return-1}get message(){return this._message}clear(){this._message=_({},Pe)}pop(e){return new Promise(s=>{const r=Mp(s,e.onClose);this._message=L(_(_({},Pe),e),{onClose:r})})}async info(e,s){return console.log(e),await this.pop(L(_(_({},Pe),s),{text:e}))}async warn(e,s){return console.warn(e),await this.pop(L(_(L(_({},Pe),{color:"warning"}),s),{text:e}))}async error(e,s){const r=Error.tryResolveMessage(s==null?void 0:s.error);return r&&(e+=`: ${r}`),console.error(e),await this.pop(L(_(L(_({},Pe),{color:"error"}),s),{text:e}))}};class xp{static generateGithubMitigationsMapFromCompletedMitigationItemsAfterIngestion(e){const s=new Map;return e.forEach(r=>{const n=Z(r.integrationOrgId,r.repoName,r.branchName);s.set(n,r)}),s}static removeMitigatedGithubResourcesFromRisksIfNoNewIngestionRunYet(e,s){const r=s.filter(a=>new Date(a.createdAt)>new Date(e.summary.dateGenerated)),n=r.filter(a=>a.typeOfPermissionFixed===e.summary.queryType),i=this.generateGithubMitigationsMapFromCompletedMitigationItemsAfterIngestion(n),o=new Map;if(e.reportItems=e.reportItems.filter(a=>{if(!a.identities||!a.asset)return!1;const c=Z(a.asset.org,a.asset.repo,a.asset.branch);if(i.has(c)){if(o.has(c))return o.get(c);const l=i.get(c);return Pr(l)?(e.summary.excessiveNumberOfPermissions-=Dr(l.usersKeepingLosingPermissions),e.summary.totalNumberOfPermissions-=Dr(l.usersKeepingLosingPermissions),e.summary.queryType===H.GHWRITE&&l.action===fs.CREATE_CODEOWNERS&&(e.summary.totalNumberOfPermissions-=cu(l.usersKeepingLosingPermissions).length),o.set(c,!1),!1):(o.set(c,!0),!0)}else return!0}),e.summary.queryType===H.GHCODEOWNERS)for(const a of r)Pr(a)&&a.typeOfPermissionFixed===H.GHWRITE&&(a.action===fs.CREATE_CODEOWNERS||a.action===fs.ENABLE_AND_MODIFY_CODEOWNERS)&&(e.summary.totalNumberOfPermissions+=lu(a.usersKeepingLosingPermissions))}}class Lp{static generateExcessivePermissionInsightFromReport(e,s,r,n,i,o,a="identity",c="identities"){let l=0,u=0,h=0,f=0;if(!e.length)return null;for(const O of e)l+=O.summary.excessiveNumberOfPermissions,O.summary.queryType===s&&(u=O.summary.excessiveNumberOfPermissions,O.reportItems&&(f=new Set(O.reportItems.flatMap(d=>"identities"in d?d.identities:[])).size),h=O.summary.totalNumberOfPermissions);const x=l==0?0:Math.ceil(u/l*100),A=h!==0?u/h:void 0,D=f==1?a:c,j=f==0?"All existing identities are valid, no excessive permissions were identified at this time.":`${f} ${D} ${r}. Remove these permissions to reduce the total excessive permissions by ${x}%.`;return{title:n,shortSummary:j,percentage:A,page:"permissions",countItem:u,countTotal:h,type:s,scmType:i,severity:o}}static githubExcessiveWriteFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHWRITE,"did not push code to branches without enforced pull requests recently","Excessive Write Permissions",2)}static githubExcessiveCodeOwnersFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHCODEOWNERS,"in CODEOWNERS did not review pull requests recently","Excessive CODEOWNERS Permissions",2)}static githubExcessiveOrgOwnerFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHORGOWNER,"did not perform administrative actions recently","Excessive Org Owners Permissions",1)}static githubExcessiveRepoAdminFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHREPOADMIN,"did not perform administrative actions recently","Excessive Repository Admins Permissions",1)}static githubExcessiveMaintainFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHMAINTAIN,"did not perform any repository maintenance actions recently","Excessive Maintain Permissions",2)}static githubExcessiveAppFromReport(e){return this.githubExcessivePermissionFromReport(e,H.GHAPP,"not been active recently","Excessive App Permissions",2,"app has","apps have")}static adoExcessiveAdminFromReport(e){return this.adoExcessivePermissionFromReport(e,Oe.ADOADMIN,"did not perform administrative actions recently","Excessive Admin Permissions",1)}static adoExcessiveCodeContributorFromReport(e){return this.adoExcessivePermissionFromReport(e,Oe.ADOCODECONTRIBUTORS,"did not push code recently to branches without enforced pull requests","Excessive Code Contributor Permissions",2)}static adoExcessivePRApproverFromReport(e){return this.adoExcessivePermissionFromReport(e,Oe.ADOPRAPPROVERS,"did not approve any PRs recently","Excessive Pull Request Approver Permissions",2)}static adoExcessivePermissionFromReport(e,s,r,n,i,o,a){return this.generateExcessivePermissionInsightFromReport(e,s,r,n,$.AZURE_DEVOPS,i,o,a)}static githubExcessivePermissionFromReport(e,s,r,n,i,o,a){return this.generateExcessivePermissionInsightFromReport(e,s,r,n,$.GITHUB,i,o,a)}}const Up="demo-gitgoat",rt="demo",Is="COMPLETED_MITIGATIONS",kp="Excessive Repository Admins Permissions";class Gr extends Error{constructor(e,s,r){super(e),this.endpoint=e,this.requestConfig=s,this.handler=r,this.name="DemoError"}}class ot{constructor(e,s,r=200,n="OK"){this.config=e,this.data=s,this.status=r,this.statusText=n,this.headers={}}}class jr extends Error{constructor(e,s,r,n){super(s),this.config=e,this.isAxiosError=!0,this.name="ResponseError",this.code=String(r),this.status=String(r),this.response=n!=null?n:new ot(e,null,r,s)}toJSON(){return{code:this.code,message:this.message}}}var is;const cr=class extends M{static get instance(){return y(this,is).value}constructor(){super()}get name(){return"DemoApi"}get pathPrefix(){return"demo"}async getEndpoints(){try{return(await this.client.get("endpoints")).data}catch{return[]}}async generateMitigationResponses(e,s){return(await this.client.post(`mitigations/generate/${e}`,s)).data}};let ct=cr;is=new WeakMap,R(ct,is,new Ve(()=>new cr));const Q=new class Bs{constructor(){this._enabled=new URLSearchParams(window.location.search).has(rt),this.endpoints=new Set,this.localEndpoints=new Map,this.responseAugmenters=new Map,this.wildcards=[],this.completedMitigations=this.loadMitigations(),p.observable(this),this.init()}static resolveEndpoint(e){var i;const s=[e.baseURL,e.url].filter(o=>!!o).map(o=>o.trim().replace(/(^\/)|(\/$)/,"")).join("/"),r=new URL(s),n=`${(i=e.method)==null?void 0:i.toUpperCase()} ${r.pathname}`;return{org:r,endpoint:n}}init(){Io.once("auth.initialized",async()=>{const e=await ct.instance.getEndpoints();e.forEach(s=>this.endpoints.add(s)),this.wildcards.push(...this.getWildcards(e))}),this._enabled&&(localStorage.setItem=()=>{}),this.localEndpoints.set("GET /mitigations/github",this.getMitigations.bind(this)).set("POST /mitigations/github/generate",this.generateMitigationResponses.bind(this)).set("POST /mitigations/github",this.createMitigation.bind(this)).set("PATCH /mitigations",this.revertMitigation.bind(this)),this.responseAugmenters.set("GET /demo/report/risk/GHREPOADMIN",this.augmentRiskReportGitHubRepoAdmin.bind(this)).set("GET /demo/insights",this.augmentInsights.bind(this))}getWildcards(e){return e=e.filter(r=>r.includes(":")),e.map(r=>{const[n,i]=r.split(" ");return new RegExp(`^${n} ${i.replace(/:([^/]+)/g,"[^/]+")}`)})}get enabled(){return this._enabled}set enabled(e){if(this._enabled===e)return;this._enabled=e;const s=new URL(window.location.href);e?s.searchParams.set(rt,"true"):(sessionStorage.removeItem(Is),s.searchParams.delete(rt)),s.hash="",location.href=s.href.replace(`${rt}=true`,rt)}toggle(){return this.enabled=!this.enabled}disable(){this.enabled=!1}enable(){this.enabled=!0}requestInterceptor(e){const s=this.getEndpoint(e);if(!s)return e;const r=new URL(s.href);return r.pathname=`demo${s.pathname}`,console.debug(`demoInterceptRequest: ${s.href} -> ${r.href}`),Reflect.deleteProperty(e,"baseURL"),e.url=r.href,e}async responseInterceptor(e){const{endpoint:s}=Bs.resolveEndpoint(e.config),r=this.responseAugmenters.get(s);return r?await r(e):e}async errorInterceptor(e){var s;if(e instanceof Gr)return await e.handler(e.requestConfig);if(V.isAxiosError(e)&&((s=e.response)==null?void 0:s.status)===501){const r=e.response.data,n=r&&typeof r=="object"&&"message"in r?r.message:null;throw E.warn(n||"Sorry, this operation is not supported in demo mode",{timeout:1e4}),e}throw e}getEndpoint(e){const{org:s,endpoint:r}=Bs.resolveEndpoint(e),n=this.localEndpoints.get(r);if(n)throw new Gr(r,e,n);if(this.endpoints.has(r))return s;for(const i of this.wildcards)if(i.test(r))return s;return null}augmentRiskReportGitHubRepoAdmin(e){const s=e.data;if(!s)return Promise.resolve(e);console.debug("DemoState.augmentRiskReportGitHubRepoAdmin");const r=Object.values(this.completedMitigations);return s&&r.length>0&&xp.removeMitigatedGithubResourcesFromRisksIfNoNewIngestionRunYet(s,r.map(n=>{var i;return L(_({},n),{repoName:(i=n.repoName)!=null?i:"",action:n.mitigationAction,status:n.mitigationStatus,usersKeepingLosingPermissions:{usersDirectlyLosingPermissions:n.usersLosingPermissions,usersDirectlyKeepingPermissions:n.usersKeepingPermissions,usersInTeamKeepingPermissions:[],usersInTeamLosingPermissions:[]},isSelfHosted:!1,arnicaOrgId:"demo-org",phase:2,lastIngestionTimestamp:""})})),Promise.resolve(e)}async augmentInsights(e){const s=e.data;if(!s)return Promise.resolve(e);console.debug("DemoState.augmentInsights");const n=(await J.getAllRisks()).filter(a=>a.summary.queryType in H),i=Lp.githubExcessiveRepoAdminFromReport(n),o=s.insights.map(a=>a.title===kp?i:a);return s.insights=o,e}async generateMitigationResponses(e){const s=e.data;if(!s)throw new jr(e,"Bad Request",400);const r=await ct.instance.generateMitigationResponses(s.queryType,s.resources.map(n=>n.repo).filter(n=>!!n));return r.length||E.warn("This mitigation is not yet supported in demo mode",{timeout:E.INDEFINITELY}),Promise.resolve(new ot(e,r))}getMitigations(e){const s=Object.values(this.completedMitigations);return Promise.resolve(new ot(e,s))}loadMitigations(){var s;return JSON.parse((s=sessionStorage.getItem(Is))!=null?s:"{}")}saveMitigations(){sessionStorage.setItem(Is,JSON.stringify(this.completedMitigations))}createMitigation(e){var n,i;const s=e.data;if(!s)throw new jr(e,"Bad Request",400);for(const o of s){const a=Z(o.orgName,o.repoName,o.branch),c=au(o.repoName,o.branch),l=nu("github",c,a),h={assetIdSCMTypeAndResourceType:l,assetIdSCMTypeAndResourceTypeLastIngestionTimestamp:iu(l,"2022-01-01T00:00:00Z",o.typeOfPermission,o.mitigationAction),repoName:o.repoName,usersLosingPermissions:[...o.usersKeepingLosingPermissions.usersDirectlyLosingPermissions,...o.usersKeepingLosingPermissions.usersInTeamLosingPermissions.flatMap(f=>f.users)],usersKeepingPermissions:[...o.usersKeepingLosingPermissions.usersDirectlyKeepingPermissions,...o.usersKeepingLosingPermissions.usersInTeamKeepingPermissions.flatMap(f=>f.users)],createdBy:(i=(n=w.user)==null?void 0:n.email)!=null?i:"demo-user@example.com",createdAt:new Date().toISOString(),resourceType:c,typeOfPermissionFixed:o.typeOfPermission,mitigationAction:o.mitigationAction,canBeReverted:!0,integrationType:"github",integrationOrgId:Up,resourceId:a,mitigationStatus:"mitigated",updatedAt:new Date().toISOString(),baseUrl:"https://github.com"};this.completedMitigations[h.assetIdSCMTypeAndResourceTypeLastIngestionTimestamp]=h}this.saveMitigations();const r=s.map(o=>({createMitigationRequest:o,mitigationError:null}));return Promise.resolve(new ot(e,r))}revertMitigation(e){const s=e.data;return s&&this.completedMitigations&&(s.assetIdSCMTypeAndResourceTypeLastIngestionTimestamp in this.completedMitigations&&delete this.completedMitigations[s.assetIdSCMTypeAndResourceTypeLastIngestionTimestamp],this.saveMitigations()),Promise.resolve(new ot(e,void 0))}},Gp=[{path:"/admin",component:()=>v(()=>import("./admin-page.b5dd2087.js"),["assets/admin-page.b5dd2087.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!Q.enabled,title:"Admin",icon:"mdi-account-cog"},children:[{path:"/",name:"dashboard",component:()=>v(()=>import("./admin-dashboard-page.0ede7bbd.js"),["assets/admin-dashboard-page.0ede7bbd.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/users-and-roles-summary.034174fe.js","assets/users-and-roles-summary.2a99f2aa.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),redirect:{name:"admin-policy"},meta:{auth:"required",title:"Dashboard",sidebar:!1,icon:"mdi-account-cog"}},{path:"policy",name:"admin-policy",component:()=>v(()=>import("./policy-page.d2a485b5.js"),["assets/policy-page.d2a485b5.js","assets/policy-page.e8becd0b.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Policies",icon:"mdi-arrow-decision"}},{path:"policy-v2",name:"admin-policy-v2",component:()=>v(()=>import("./policy-page.429b0cb6.js").then(function(t){return t.p}),["assets/policy-page.429b0cb6.js","assets/policy-page.7746deed.css","assets/policy-item-secrets.1fc4d868.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css"]),meta:{auth:"required",sidebar:new Ve(()=>Ke.tryGetFlag("policyV2").then(t=>!!(t!=null&&t.front)).observe(!1)),title:"Policies v2",icon:"mdi-arrow-decision",frontIcon:{icon:"mdi-beta",tooltip:"This feature is being migrated from the original policy page"}}},{path:"integrations",name:"admin-integrations",component:()=>v(()=>import("./integrations-page.279fa6c8.js"),["assets/integrations-page.279fa6c8.js","assets/integrations-page.e7efc729.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/get-integration-response.d979763e.js","assets/github-audits-upload-banner.3c124d81.js","assets/email-validation.8dbb333d.js","assets/add-integration-scm.243d995e.js","assets/add-integration-scm.47119265.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Integrations",icon:"mdi-view-grid-plus"}},{path:"jobs",name:"jobs",component:()=>v(()=>import("./jobs-page.b670386f.js"),["assets/jobs-page.b670386f.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/get-integration-response.d979763e.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Jobs",icon:"mdi-factory"}},{path:"users-and-roles",name:"admin-users-and-roles",component:()=>v(()=>import("./admin-users-and-roles-page.c5a41d3c.js"),["assets/admin-users-and-roles-page.c5a41d3c.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/users-and-roles-summary.034174fe.js","assets/users-and-roles-summary.2a99f2aa.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Users and Roles",icon:"mdi-account-group"}},{path:"plan",name:"plan",component:()=>v(()=>import("./admin-plan-page.b4e89b14.js"),["assets/admin-plan-page.b4e89b14.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Manage Plan",icon:"mdi-briefcase-account-outline",sidebar:!0}},{path:"upgrade",name:"upgrade",component:()=>v(()=>import("./upgrade-page.02b13fff.js"),["assets/upgrade-page.02b13fff.js","assets/upgrade-page.f8cffbca.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Upgrade",icon:"mdi-upload-lock-outline",get sidebar(){return ee.under.enterprise}}},{path:"api",name:"api",component:()=>v(()=>import("./api-page.34a3e54b.js"),["assets/api-page.34a3e54b.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"API",icon:"mdi-api",get sidebar(){return ee.is.enterprise}}}]}],jp=[{path:"/inventory",component:()=>v(()=>import("./inventory-page.ce71f0a7.js"),["assets/inventory-page.ce71f0a7.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Inventory",icon:"mdi-warehouse"},children:[{path:"/",name:"summary",component:()=>v(()=>import("./inventory-summary-page.6ad923e1.js"),["assets/inventory-summary-page.6ad923e1.js","assets/inventory-summary-page.34d5c7c4.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Summary",sidebar:!1,icon:"mdi-warehouse",scmDropDown:!0}},{path:"sbom",name:"sbom",component:()=>v(()=>import("./sbom-page.e338368e.js"),["assets/sbom-page.e338368e.js","assets/sbom-page.f1979bce.css","assets/sbom-state-helper.33337c2b.js","assets/sbom-state-helper.6756024d.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/chart.8c5509af.js","assets/chart.1522fb4a.css","assets/get-integration-response.d979763e.js","assets/sbom-utils.ee2bf93e.js","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"SBOM",sidebar:!0,icon:"mdi-clipboard-list",scmDropDown:!1}},{path:"owners",name:"owners",component:()=>v(()=>import("./groups-page.2e028063.js"),["assets/groups-page.2e028063.js","assets/groups-page.e2101dcb.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/generic-data-table-page.e3f5ed8f.js","assets/generic-data-table-page.400d2a46.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Product Owners",sidebar:new Ve(()=>Ke.tryGetFlag("productOwners").then(t=>!!(t!=null&&t.front)).observe(!1)),icon:"mdi-badge-account-outline",scmDropDown:!0}},{path:"importance",name:"importance",component:()=>v(()=>import("./temp-business-importance-page.bbd40652.js"),["assets/temp-business-importance-page.bbd40652.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/get-integration-response.d979763e.js","assets/business-importance-filter.de744ff6.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Business Importance",sidebar:new Ve(()=>Ke.tryGetFlag("businessImportance").then(t=>!!(t!=null&&t.front)).observe(!1)),icon:"mdi-priority-high",scmDropDown:!1}},{path:"*",name:"details",component:()=>v(()=>import("./inventory-details-page.5a315705.js"),["assets/inventory-details-page.5a315705.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/email-validation.8dbb333d.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Details",sidebar:!1,icon:"mdi-warehouse"}}]}],Fp=[{path:"/events",name:"events",component:()=>v(()=>import("./admin-page.b5dd2087.js"),["assets/admin-page.b5dd2087.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),redirect:{name:"mitigations"},meta:{auth:"required",sidebar:!0,title:"Events",icon:"mdi-calendar-multiple"},children:[{path:"mitigations",name:"mitigations",component:()=>v(()=>import("./mitigations-page.73dd714b.js"),["assets/mitigations-page.73dd714b.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Mitigations",icon:"mdi-shield-check",scmDropDown:!0}},{path:"permission-activity",name:"permission-activity",component:()=>v(()=>import("./permission-activity-page.8fa70bb9.js"),["assets/permission-activity-page.8fa70bb9.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-menu.ee817215.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Automation",icon:"mdi-account-reactivate"}}]}];var Hp=Object.defineProperty,Bp=Object.getOwnPropertyDescriptor,wo=(t,e,s,r)=>{for(var n=r>1?void 0:r?Bp(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Hp(e,s,n),n};async function Eo(){var t,e;return await mt.init(),(e=(t=mt.insightsReport)==null?void 0:t.insights)!=null&&e.length?{name:"risks"}:{name:"jobs"}}let Yt=class extends p{constructor(){super(...arguments),this.redirecting=!1}async onDoneOnboardingChange(t){if(!t&&this.redirecting)return;this.redirecting=!0;const e=await Eo();this.$router.push(e)}};wo([Je("$state.Layout.onboarding.isDoneOnboarding")],Yt.prototype,"onDoneOnboardingChange",1);Yt=wo([b({async beforeRouteEnter(t,e,s){if(!C.onboarding.isDoneOnboarding)return s();const r=await Eo();return s(r)}})],Yt);var Vp=Yt,qp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"component page home-page"},[t.$state.Layout.onboarding.isDoneOnboarding?s("v-row",[s("v-col",[s("v-card",[s("v-card-title",[t._v("Congratulations!")]),s("v-card-subtitle",[t._v("You have completed the onboarding process")]),s("v-card-text",[t._v(" What next? "),s("v-list",[t.$state.Jobs.jobs&&t.$state.Jobs.jobs.length===0?s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-factory")])],1),s("v-list-item-content",[s("router-link",{attrs:{to:{name:"jobs"}}},[s("a",[t._v("Create a crawling job")])])],1)],1):t.$state.Jobs.jobs&&t.$state.Jobs.jobs.filter(function(r){return r.status==="complete"}).length>0?s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-server-security")])],1),s("v-list-item-content",[s("router-link",{attrs:{to:{path:"/risks"}}},[s("a",[t._v("View Risks")])])],1)],1):s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-factory")])],1),s("v-list-item-content",[s("router-link",{attrs:{to:{name:"jobs"}}},[s("a",[t._v("Monitor crawling job status")])])],1)],1),s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-view-grid-plus")])],1),s("v-list-item-content",[s("router-link",{attrs:{to:{name:"admin-integrations"}}},[s("a",[t._v("Add another integration")])])],1)],1)],1)],1)],1)],1)],1):t._e()],1)},zp=[];const Fr={};var Wp=P(Vp,qp,zp,!1,Kp,null,null,null);function Kp(t){for(let e in Fr)this[e]=Fr[e]}var Yp=function(){return Wp.exports}();const Hr="permissions",Br="hardening",bo="secrets",Ao="anomalies",Ie="code",Jp="trends";function Vr(t){return`risks.${t}`}const Xp=[{path:"/risks",name:"risks",component:()=>v(()=>import("./risks-page.465344e1.js"),["assets/risks-page.465344e1.js","assets/risks-page.6d7a9db1.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Risks",icon:"mdi-shield-home"},redirect:{name:"insights"},children:[{path:"",name:"insights",component:()=>v(()=>import("./insights-page.433b897c.js"),["assets/insights-page.433b897c.js","assets/insights-page.a1ec4dc5.css","assets/emojis.8a610359.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/github-audits-upload-banner.3c124d81.js","assets/insight.a2ef729e.js","assets/insight.9cdb2b31.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!1,title:"Insights",icon:"mdi-shield-home"}},{path:"permissions/:scmType?",name:Vr(Hr),component:()=>v(()=>import("./risks-tabs-page.7a17e144.js"),["assets/risks-tabs-page.7a17e144.js","assets/risks-tabs-page.7ca3b705.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/insight.a2ef729e.js","assets/insight.9cdb2b31.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{page:Hr},meta:{auth:"required",sidebar:!0,title:"Permissions",icon:"mdi-shield-account",scmDropDown:!0},children:[{path:"gh-org-owner",name:H.GHORGOWNER,component:()=>v(()=>import("./excessive-org-owner-report.ebfac4f4.js"),["assets/excessive-org-owner-report.ebfac4f4.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/github-team-display.3f8d4178.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Org Owner Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"gh-repo-admin",name:H.GHREPOADMIN,component:()=>v(()=>import("./excessive-repo-admin-report.e2e3434e.js"),["assets/excessive-repo-admin-report.e2e3434e.js","assets/github-permission-report.dbceae55.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/github-team-display.3f8d4178.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Repository Admin Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"gh-excessive-maintain",name:H.GHMAINTAIN,component:()=>v(()=>import("./excessive-maintain-report.e4633e38.js"),["assets/excessive-maintain-report.e4633e38.js","assets/github-permission-report.dbceae55.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/github-team-display.3f8d4178.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Maintain Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"gh-excessive-write",name:H.GHWRITE,component:()=>v(()=>import("./excessive-write-report.4d898cef.js"),["assets/excessive-write-report.4d898cef.js","assets/github-permission-report.dbceae55.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/github-team-display.3f8d4178.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Write Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"gh-excessive-codeowners",name:H.GHCODEOWNERS,component:()=>v(()=>import("./excessive-codeowners-report.ad3f5d6b.js"),["assets/excessive-codeowners-report.ad3f5d6b.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/github-permission-report.dbceae55.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/github-team-display.3f8d4178.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive CODEOWNERS Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"gh-excessive-apps",name:H.GHAPP,component:()=>v(()=>import("./excessive-apps-report.1a1e071c.js"),["assets/excessive-apps-report.1a1e071c.js","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive App Permissions",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"ado-excessive-admin",name:Oe.ADOADMIN,component:()=>v(()=>import("./excessive-ado-admins-report.e06c9280.js"),["assets/excessive-ado-admins-report.e06c9280.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/ado-permission-report.9d0396fb.js","assets/ado-permission-report.672958c1.css","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Admin Rights",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"ado-excessive-pr-approvers",name:Oe.ADOPRAPPROVERS,component:()=>v(()=>import("./excessive-pr-approvers-report.f79c4546.js"),["assets/excessive-pr-approvers-report.f79c4546.js","assets/ado-permission-report.9d0396fb.js","assets/ado-permission-report.672958c1.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Pull Request Approvers",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}},{path:"ado-excessive-code-contributors",name:Oe.ADOCODECONTRIBUTORS,component:()=>v(()=>import("./excessive-code-contributors-report.196d491d.js"),["assets/excessive-code-contributors-report.196d491d.js","assets/ado-permission-report.9d0396fb.js","assets/ado-permission-report.672958c1.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-utils.05270da1.js","assets/mitigation-identities-display.3def0ebc.js","assets/expandable-popup-display.fb444385.js","assets/expandable-popup-display.685e8a85.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Excessive Code Contributors",sidebar:!1,scmDropDown:!0,icon:"mdi-shield-account"}}]},{path:"hardening/unenforceable-policy",redirect(){return`/risks/hardening/${C.scmType}/unenforceable-policy`},meta:{auth:"required",sidebar:!1}},{path:"hardening/:scmType?",name:Vr(Br),component:()=>v(()=>import("./risks-tabs-page.7a17e144.js"),["assets/risks-tabs-page.7a17e144.js","assets/risks-tabs-page.7ca3b705.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/insight.a2ef729e.js","assets/insight.9cdb2b31.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{page:Br},meta:{auth:"required",sidebar:!0,title:"Hardening",icon:"mdi-shield-edit",scmDropDown:!0},children:[{path:"ado-inactive-users",name:qt.ADOInactiveUsers,component:()=>v(()=>import("./ado-inactive-users.6267cd16.js"),["assets/ado-inactive-users.6267cd16.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Inactive Users",scmDropDown:!0}},{path:"ado-stale-repos",name:qt.ADOStaleRepositories,component:()=>v(()=>import("./ado-stale-repositories.87a373dd.js"),["assets/ado-stale-repositories.87a373dd.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Stale Repositories",scmDropDown:!0}},{path:"unenforceable-policy",name:qt.ADOUnenforceablePolicy,component:()=>v(()=>import("./ado-unenforceable-policy.2f7f4397.js"),["assets/ado-unenforceable-policy.2f7f4397.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/policy-item-secrets.1fc4d868.js","assets/repo-chip-menu-item.64173d74.js","assets/status-checks-templates.1239e005.js","assets/sbom-utils.ee2bf93e.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Unenforceable Policies",scmDropDown:!0}},{path:"gh-inactive-users",name:jt.GHInactiveUsers,component:()=>v(()=>import("./github-inactive-identities.8e282d92.js"),["assets/github-inactive-identities.8e282d92.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Inactive Users",scmDropDown:!0}},{path:"gh-stale-repos",name:jt.GHStaleRepositories,component:()=>v(()=>import("./github-stale-repositories.de208155.js"),["assets/github-stale-repositories.de208155.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Stale Repositories",scmDropDown:!0}},{path:"gh-misconfig-codeowners",name:jt.GHMisconfiguredCodeowners,component:()=>v(()=>import("./github-misconfigured-codeowners.6f4c1326.js"),["assets/github-misconfigured-codeowners.6f4c1326.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),props:{riskReportMode:!0},meta:{auth:"required",title:"Misconfigured CODEOWNERS",scmDropDown:!0}},{path:"unenforceable-policy",name:jt.GHUnenforceablePolicy,component:()=>v(()=>import("./github-unenforceable-policy.3eadd7b9.js"),["assets/github-unenforceable-policy.3eadd7b9.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/generic-report-view.1acc12c3.js","assets/generic-report-view.7db3c266.css","assets/policy-item-secrets.1fc4d868.js","assets/repo-chip-menu-item.64173d74.js","assets/status-checks-templates.1239e005.js","assets/sbom-utils.ee2bf93e.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/mitigation-action-display.7a2788ef.js","assets/mitigation-menu.ee817215.js","assets/mitigation-utils.05270da1.js","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Unenforceable Policies",scmDropDown:!0}}]},{path:"secrets",name:bo,component:()=>v(()=>import("./secrets-page.6037e156.js"),["assets/secrets-page.6037e156.js","assets/secrets-page.bc73a540.css","assets/dismiss-reason-confirmation.f41262ed.js","assets/dismiss-reason-confirmation.e7fb990e.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/expanded-item-author-github.4b2aeff2.js","assets/emojis.8a610359.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/get-integration-response.d979763e.js","assets/ui-code-risk-item.984c5b16.js","assets/ui-code-risk-item.a80b4c0c.css","assets/sbom-state-helper.33337c2b.js","assets/sbom-state-helper.6756024d.css","assets/chart.8c5509af.js","assets/chart.1522fb4a.css","assets/sbom-utils.ee2bf93e.js","assets/scm-asset.component.52433127.js","assets/inventory-report-filter-menu.e6ae467d.js","assets/mitigation-menu.ee817215.js","assets/generic-data-table-page.e3f5ed8f.js","assets/generic-data-table-page.400d2a46.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Secrets",icon:"mdi-form-textbox-password"}},{path:"anomalies",name:Ao,component:()=>v(()=>import("./anomalies-page.1a19c887.js"),["assets/anomalies-page.1a19c887.js","assets/anomalies-page.c29c47f0.css","assets/dismiss-reason-confirmation.f41262ed.js","assets/dismiss-reason-confirmation.e7fb990e.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/expanded-item-author-github.4b2aeff2.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/generic-data-table-page.e3f5ed8f.js","assets/generic-data-table-page.400d2a46.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Anomalies",icon:"mdi-robot-confused"}},{path:"code/:sortKey?",name:Ie,component:()=>v(()=>import("./code-risk-page.170d5638.js"),["assets/code-risk-page.170d5638.js","assets/code-risk-page.3aff74ef.css","assets/dismiss-reason-confirmation.f41262ed.js","assets/dismiss-reason-confirmation.e7fb990e.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/ui-code-risk-item.984c5b16.js","assets/ui-code-risk-item.a80b4c0c.css","assets/get-integration-response.d979763e.js","assets/sbom-state-helper.33337c2b.js","assets/sbom-state-helper.6756024d.css","assets/chart.8c5509af.js","assets/chart.1522fb4a.css","assets/sbom-utils.ee2bf93e.js","assets/scm-asset.component.52433127.js","assets/chip-menu-item.d32e45e3.js","assets/chip-menu-item.fa056f71.css","assets/generic-data-table-page.e3f5ed8f.js","assets/generic-data-table-page.400d2a46.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Code",icon:"mdi-code-json"}},{path:"dismissed",name:"dismissed",component:()=>v(()=>import("./dismissed-items-page.f4211433.js"),["assets/dismissed-items-page.f4211433.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!0,title:"Exceptions",icon:"mdi-shield-remove"}},{path:"trends",name:Jp,component:()=>v(()=>import("./trends-page.b741b224.js"),["assets/trends-page.b741b224.js","assets/trends-page.27ae0b2b.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/chart.8c5509af.js","assets/chart.1522fb4a.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css","assets/scm-asset.component.52433127.js","assets/get-integration-response.d979763e.js","assets/business-importance-filter.de744ff6.js","assets/generic-data-table-page.e3f5ed8f.js","assets/generic-data-table-page.400d2a46.css"]),meta:{auth:"required",sidebar:new Ve(()=>Ke.tryGetFlag("trends").then(t=>!!(t!=null&&t.front)).observe(!1)),title:"Trends",icon:"mdi-chart-line",frontIcon:{icon:"mdi-beta",tooltip:"This feature is experimental"}}}]}],Oo=[{path:"/",name:"home",component:Yp,async beforeEnter(t,e,s){return C.onboarding.orgId?(await Promise.allSettled([te.init(),sr.init()]),C.onboarding.isDoneOnboarding?s():s({name:"onboarding"})):s({name:"onboarding"})},meta:{auth:"required",orgId:"optional",navDrawer:!1}},{path:"/login",name:"login",component:()=>v(()=>import("./login-page.1584c1fc.js"),["assets/login-page.1584c1fc.js","assets/login-page.5a076873.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"optional",title:"",appBar:!1}},{path:"/logout",name:"logout",async beforeEnter(t,e,s){return await w.auth0SignOut(),s({name:"login"})},meta:{auth:"required",title:"Sign Out",appBar:!1}},{path:"/onboarding",name:"onboarding",component:()=>v(()=>import("./onboarding-page.826620dc.js"),["assets/onboarding-page.826620dc.js","assets/add-integration-scm.243d995e.js","assets/add-integration-scm.47119265.css","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",orgId:"optional",title:"",sidebar:!1,navDrawer:!1}},{path:"/loading",name:"loading",component:()=>v(()=>import("./loading-page.d9002ee9.js"),["assets/loading-page.d9002ee9.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",title:"Loading...",icon:"mdi-progress-clock",sidebar:!1}},...Xp,...Fp,...jp,{path:"/notifications",name:"notifications",component:()=>v(()=>import("./notifications-page.91b64fd9.js"),["assets/notifications-page.91b64fd9.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"required",sidebar:!1,title:"Notifications",icon:"mdi-bell"}},...Gp,{path:"/error",name:"error",component:()=>v(()=>import("./error-page.49e9b361.js"),["assets/error-page.49e9b361.js","assets/vendor.b9714d0d.js","assets/vendor.2ffb2e74.css","assets/vendor-vuetify.0d58dbde.js","assets/vendor-vuetify.04ea0363.css"]),meta:{auth:"optional",title:"Error"}},{path:"/product-tour",name:"product-tour",redirect(){throw Q.enable(),new Error("Redirecting to demo")}}];async function Zp(t,e){var s;try{return await t}catch(r){if(ve.isNavigationFailure(r,ve.NavigationFailureType.redirected))return(s=this.history.pending)!=null?s:this.currentRoute;debugger;throw r}}function Ro(t){return function(e,s,r){const n=t.call(this,e,s,r);return typeof e=="string"||!(e!=null&&e.ignoreRedirectError)||!n?n:Zp.call(this,n,e)}}ve.prototype.push=Ro(ve.prototype.push);ve.prototype.replace=Ro(ve.prototype.replace);p.use(ve);const Qp=[...Oo,{path:"*",name:"fallback",redirect:"/",meta:{auth:"optional"}}],k=new ve({mode:"hash",scrollBehavior(t,e,s){return s||{x:0,y:0}},routes:Qp});p.observable(k);b.registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);Pp(k);console.debug("plugins loaded");var ed=Object.freeze(Object.defineProperty({__proto__:null,vuetify:Hs,router:k},Symbol.toStringTag,{value:"Module"}));const To=new class{constructor(){this._message=null,this._details=null,p.observable(this)}get message(){return this._message}get details(){return this._details}async show(e,s=!0){var r;if(console.warn(e),e instanceof Error)this._message=e.message,this._details=(r=e.stack)!=null?r:null;else if(typeof e=="string")this._message=e,this._details=null;else if(e&&typeof e=="object"&&"name"in e&&e.name){if(e.name==="NetworkError"){await E.error("Network error");return}this._message=String(e.name),this._details=null}else await this.clear();if(s)return await this.navigate("error")}async clear(){return this._message=this._details=null,await this.navigate("home")}async navigate(e){k.currentRoute.name!==e&&await k.push({name:e})}},qr="[arnica]";class td{constructor(){this._show=!0,this.anchored=!0,this.mini=!1}get active(){return w.activated}get show(){var e,s;return this._show&&((e=k.currentRoute.meta)==null?void 0:e.navDrawer)!==!1&&!((s=w.user)!=null&&s.public)}set show(e){this._show=e}toggleShow(){this._show=!this._show}async togglePinned(){this.pinned=!this.anchored,await ze.save({pinned:this.pinned})}set pinned(e){this.anchored=e,this.mini=!e}get pinned(){return this.anchored}}class sd{constructor(){this._show=!0,this.editProfile=!1,this.preferences=!1}get show(){return this._show&&!!w.user}set show(e){this._show=e}}class rd{get dismissed(){var e;return((e=ze.user)!=null?e:ze.defaults).onboardingDismissed}get onboardingStep(){return this.hasOrganization?this.hasAtLeastOneIntegration?-1:2:1}get isDoneOnboarding(){return this.onboardingStep===-1}get orgId(){var e,s,r;return(r=(s=(e=w.user)==null?void 0:e.userInfo)==null?void 0:s.orgId)!=null?r:null}get hasAtLeastOneIntegration(){return te.hasAtLeastOneSourceControlIntegration}get hasOrganization(){return!!this.orgId}}const zr=Symbol("MANUAL_TRACKER");var ce,$t;const C=new($t=class{constructor(){R(this,ce,void 0);U(this,ce,new Set),this._loading=!1,this._title="",this.drawer=new td,this.userMenu=new sd,this.onboarding=new rd,this.scmType=null,this.preferencesLoaded=!1,this.appLoaded=!1,this.footer=!0,p.observable(this)}track(e){!e||(y(this,ce).add(e),this._loading=y(this,ce).size>0)}untrack(e){!e||(y(this,ce).delete(e),this._loading=y(this,ce).size>0)}resetTracking(){console.debug("resetTracking"),y(this,ce).clear(),this._loading=!1}get loading(){return this._loading}set loading(e){e?this.track(zr):this.untrack(zr)}get title(){return this._title}set title(e){this._title=e!=null?e:"",document.title=$t.buildTitle(e)}reloadHome(){const e=new URL(window.location.href);e.hash=e.hash.replace(/\/error(\/.*)?/,""),window.location.href=e.toString(),window.location.reload()}static buildTitle(e){return e?`${qr} - ${e}`:qr}},ce=new WeakMap,$t);var So=(t=>(t.SECRET="SECRET",t))(So||{}),$o=(t=>(t.INFERENCE="INFERENCE",t.CORRELATION="CORRELATION",t))($o||{}),ge=(t=>(t.SAST="SAST",t.SCA="SCA",t.IAC="IAC",t.LICENSE="LICENSE",t.REPUTATION="REPUTATION",t))(ge||{});_(_(_({},So),$o),ge);const ps={NOTIFIED_IN_INTEGRATION:"notified_in_integration",SENT_INTERACTIVE_MESSAGE_IN_INTEGRATION:"sent_interactive_message_in_integration",RE_DETECTED_IN_NEW_BRANCH:"re_detected_in_new_branch"},tr={RESOLVED:"resolved",DISMISS_NO_CAPACITY:"dismiss_no_capacity",DISMISS_NOT_ACCURATE:"dismiss_not_accurate",REQUIRES_REVIEW:"requires_review",PENDING_REVIEW:"pending_review"},Po=_({DISMISS_SECRET_NOT_USED:"dismiss_secret_not_used",DISMISS_RISK_IS_TOLERABLE:"dismiss_risk_is_tolerable"},tr),T=L(_({AWAITING_USER_INPUT:"awaiting_user_input",MITIGATION_IN_PROGRESS:"mitigation_in_progress",MITIGATION_PENDING_PR:"mitigation_pending_pr",MITIGATION_FAILED:"mitigation_failed"},Po),{DISMISS_NO_OPTION_CHOSEN_YET:"dismiss_no_option_chosen_yet"}),nd=_({RISK_ACCEPTED:"risk_accepted",NOT_USED:"not_used"},tr),Do=_({RESOLVED_AUTOMATICALLY:"resolved_automatically",IN_PROGRESS:"in_progress"},nd),ug=Do,id=_(_({COMMITTED:"committed",FIRST_DETECTED:"first_detected",DETECTED_IN_DEFAULT_BRANCH_SLA_STARTED:"detected_in_default_branch_sla_started",RESOLVED_IN_BRANCH:"resolved_in_branch",UNRESOLVED_IN_BRANCH:"unresolved_in_branch",RISK_CHANGED:"risk_changed",DECISION:"decision"},ps),Do),pg=id,dg=L(_(L(_({},ps),{COMMIT_CREATED:"commit_created",SECRET_DETECTED:"secret_detected",DECISION_MADE_FIX_IT_MYSELF:"decision_made_fix_it_myself",DECISION_MADE_FIX_IT_FOR_ME:"decision_made_fix_it_for_me",FIX_IT_FOR_ME_SUCCESS:"fix_it_for_me_success",BRANCH_MERGE_FAILED_PR_CREATED:"branch_merge_failed_pr_created",MITIGATION_STARTED:"mitigation_started",MITIGATION_FAILED:"mitigation_failed",DECISION:"decision"}),Po),{DISMISS_NO_OPTION_CHOSEN_YET:"dismiss_no_option_chosen_yet"}),Co=_({},tr),hg=_(L(_({},ps),{ANOMALY_DETECTED:"anomaly_detected",ALREADY_CONFIRMED:"already_confirmed",AWAITING_USER_INPUT:"awaiting_user_input",FLAGGED:"flagged"}),Co),mg=_(L(_({},ps),{COMMIT_CREATED:"commit_created",ANOMALY_DETECTED:"anomaly_detected",AWAITING_USER_INPUT:"awaiting_user_input",NO_INTEGRATION_NOTIFICATIONS_POLICY_ACTIONS:"no_integration_notifications_policy_actions",NOT_THAT_USER:"not_that_user",IT_WAS_THAT_USER:"it_was_that_user",THIS_IS_ME:"this_is_me",THIS_WAS_THEM:"this_was_them",THIS_WAS_NOT_THEM:"this_was_not_them",THIS_IS_NOT_ME:"this_is_not_me",ALREADY_CONFIRMED:"already_confirmed",NOTIFICATIONS_LIMIT_MET:"notifications_limit_met"}),Co),gg={[T.RESOLVED]:{text:"Resolved",value:T.RESOLVED,icon:"check-circle",color:"green",fgColor:"white"},[T.AWAITING_USER_INPUT]:{text:"Awaiting User Input",value:T.AWAITING_USER_INPUT,icon:"clock-time-four",color:"orange",fgColor:"white"},[T.MITIGATION_IN_PROGRESS]:{text:"Mitigation In Progress",value:T.MITIGATION_IN_PROGRESS,icon:"lightning-bolt-circle",color:"orange",fgColor:"white"},[T.MITIGATION_PENDING_PR]:{text:"Mitigation pending PR",value:T.MITIGATION_PENDING_PR,icon:"shield-alert",color:"orange",fgColor:"white",displayName:"Mitigation Pending PR"},[T.REQUIRES_REVIEW]:{text:"Open",value:T.REQUIRES_REVIEW,icon:"shield-key",color:"red",fgColor:"white"},[T.MITIGATION_FAILED]:{text:"Mitigation Failed",value:T.MITIGATION_FAILED,icon:"shield-remove",color:"red",fgColor:"white"},[T.DISMISS_NO_CAPACITY]:{text:"Dismissed",value:T.DISMISS_NO_CAPACITY,textChip:"No capacity",icon:"minus-circle",color:"blue",fgColor:"white",displayName:"Dismissed - No Capacity"},[T.DISMISS_RISK_IS_TOLERABLE]:{text:"Dismissed",value:T.DISMISS_RISK_IS_TOLERABLE,textChip:"Risk is tolerable",icon:"minus-circle",color:"blue",fgColor:"white",displayName:"Dismissed - Risk Is Tolerable"},[T.DISMISS_NOT_ACCURATE]:{text:"Dismissed",value:T.DISMISS_NOT_ACCURATE,textChip:"Not accurate",icon:"minus-circle",color:"blue",fgColor:"white",displayName:"Dismissed - Not Accurate"},[T.DISMISS_SECRET_NOT_USED]:{text:"Dismissed",value:T.DISMISS_SECRET_NOT_USED,textChip:"Code not used",icon:"minus-circle",color:"blue",fgColor:"white",displayName:"Dismissed - Code Not Used"},[T.DISMISS_NO_OPTION_CHOSEN_YET]:{text:"Dismissed",value:T.DISMISS_NO_OPTION_CHOSEN_YET,color:"blue",icon:"minus-circle",textChip:"No option chosen yet",fgColor:"white",displayName:"Dismissed - No Option Chosen Yet"}},No={status:[T.AWAITING_USER_INPUT,T.MITIGATION_IN_PROGRESS,T.MITIGATION_PENDING_PR,T.REQUIRES_REVIEW,T.MITIGATION_FAILED],integrationType:[],org:[],repo:[],branch:[],specificType:[],risk:[]};function fg(t,e,s){const r=t[s];if(!(r!=null&&r.length))return!0;const n=e[s];return n&&r.includes(n)}const _g={status:(t,e)=>{var r;if(!t.status.length)return!0;const s=(r=e.metadata)==null?void 0:r.status;return!!s&&t.status.includes(s)}},ze=new class{constructor(){var e;this._defaults={pinned:!0,dark:(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)").matches,scmType:null,onboardingDismissed:!1,secrets:{filters:No}},this._queued=[],this._saving=!1,p.observable(this)}getQueued(){const e=this._queued.reduce((s,r)=>_(_({},s),r),{});return this._queued.length=0,e}get defaults(){return _({},this._defaults)}get user(){var e,s,r;return(r=(s=(e=w.user)==null?void 0:e.userInfo)==null?void 0:s.preferences)!=null?r:null}async load(e){let s=this.defaults;return e!=null||(e=await Ne.me()),e!=null&&e.preferences&&(s=_(_({},s),e.preferences),e.preferences=s),Hs.framework.theme.dark=s.dark,C.drawer.pinned=s.pinned,C.scmType=s.scmType,s}async save(e){var s;if(!Q.enabled&&(this._queued.push(e),!this._saving)){this._saving=!0;try{if(e=this.getQueued(),!Object.keys(e).length)return;const r=await Ne.me(),n={dark:Hs.framework.theme.dark,pinned:C.drawer.anchored,scmType:C.scmType,onboardingDismissed:C.onboarding.dismissed},i=_(_(_(_({},this.defaults),n),r.preferences),e);await Ne.updatePreferences(i);const o=(s=w.user)==null?void 0:s.userInfo;o&&(o.preferences=i)}finally{this._saving=!1;const r=this.getQueued();Object.keys(r).length&&await this.save(r)}}}},Jt="CALLBACK_MESSAGE_KEY";class Nt{sendToAnalytics(e){Ae.logEvent("Onboarding Integration Complete",{integrationType:e},{group:"Onboarding"})}async handleIntegrationError(e){var n,i;console.warn(e);const s=typeof e=="object"&&"response"in e?e.response:null,r=s?((n=s.data)==null?void 0:n.message)||((i=s.data)==null?void 0:i.error)||s.statusText:e instanceof Error?e.message:String(e);w.authenticated&&E.error(`Sorry, unable to add integration.
${r}`,{timeout:E.INDEFINITELY})}}const ws=[{value:$.AZURE_DEVOPS,text:"Azure DevOps",icon:"mdi-microsoft-azure-devops"},{value:$.GITHUB,text:"GitHub",icon:"mdi-github"}],te=new class{constructor(){this.integrations=null,this.integrationsByOrgIdAndType=null,p.observable(this)}async init(e=!1,s=!1){var r,n;if(!!((r=w.user)!=null&&r.registered)&&(this.integrations=await _e.getAll(e,s),this.integrationsByOrgIdAndType=((n=this.integrations)!=null?n:[]).mapBy(i=>i.integrationOrgIdAndType),this.integrations&&C.scmType&&(this.integrations.find(o=>Me[o.integrationType]===C.scmType)||(C.scmType=null)),!C.scmType)){const[i]=this.scmTypes;i&&(C.scmType=i.value),await ze.save({scmType:C.scmType})}}get hasAtLeastOneSourceControlIntegration(){var e;return!!((e=this.integrations)!=null&&e.some(s=>s.category==="source-control"))}get sourceControlIntegrations(){var e,s;return(s=(e=this.integrations)==null?void 0:e.filter(r=>r.category==="source-control"))!=null?s:[]}get scmTypes(){const e=this.integrations;return e?ws.filter(s=>e.some(r=>Me[r.integrationType]===s.value)):[]}getSCMTypeIcon(e){var s;return(s=ws.find(r=>r.value===e))==null?void 0:s.icon}getSCMTypeText(e){var s;return(s=ws.find(r=>r.value===e))==null?void 0:s.text}getIntegrationTypeText(e){return this.getSCMTypeText(Me[e])}get hasSlack(){var e;return!!((e=this.integrations)!=null&&e.some(s=>s.integrationType==="slack"))}get hasGitHub(){var e;return!!((e=this.integrations)!=null&&e.some(s=>s.integrationType==="github"))}};class Mo extends Nt{async redirect(){window.history.replaceState(null,"",window.location.origin),await k.push({name:"loading"});try{C.onboarding.dismissed?await k.push({name:te.hasAtLeastOneSourceControlIntegration?"jobs":"home"}):Q.enable()}catch(e){console.warn("Failed to redirect",e)}}provideUserFeedback(){E.info("Integration added successfully")}async handle(e){try{const s=await this.createIntegration(e);w.authenticated&&await te.init(),this.sendToAnalytics(s),await this.redirect(),this.provideUserFeedback()}catch(s){await this.handleIntegrationError(s)}}}const od="/callback/ado",ad="code",cd="state",ld="error",ud={access_denied:"Access denied to Azure DevOps, please try again."};class pd extends Mo{static get path(){return od}async createIntegration(e){var i;const s=e.get(ld);if(s)throw new Error((i=ud[s])!=null?i:s);const r=e.get(ad),n=e.get(cd);if(!r||!n)throw new Error("Invalid callback");return await _e.create({type:"azure-devops",code:r,state:n}),"azure-devops"}}const dd="/callback/auth0";class xo extends Nt{static get path(){return dd}async handle(e){try{const s=e.get("error");if(s){E.error(s.toString()),console.error(s);return}if(e.get("code")&&e.get("state")){if(!w.auth0Client)throw console.log("Auth0Client is not defined"),new Error("Auth0 client not initialized");await w.auth0Client.handleRedirectCallback(),await w.setUserInternal(),window.history.replaceState(null,"",window.location.origin)}else console.log("Not a redirect")}catch(s){console.error(s)}}provideUserFeedback(){}}const Wr="/callback/github",Kr="code",hd="installation_id",Yr="setup_action";var Fe,be;class md extends Mo{constructor(){super(...arguments);R(this,Fe,!1);R(this,be,!1)}static get path(){return Wr}async createIntegration(s){var a;const r=s.get(Yr),n=r&&this[`on_${r}`];if(!n)throw new Error("Invalid callback state");const i=s.get(Kr),o=Number.parseInt((a=s.get(hd))!=null?a:"");return window.history.replaceState(null,"",window.location.origin),await n.call(this,{code:i,installationId:o,setupAction:r})}provideUserFeedback(){y(this,Fe)?E.info("Your integration is being created. Awaiting organization owner to approve...",{timeout:E.INDEFINITELY,html:!0}):y(this,be)?E.warn(`Your integration is being created in the background...<br>
      It appears that GitHub is taking longer than expected to process,<br>
      in the meantime you can add more integrations`,{timeout:E.INDEFINITELY,html:!0}):E.info("Integration added successfully",{timeout:E.INDEFINITELY,html:!0})}async redirect(){y(this,Fe)?(await k.push({name:"loading"}),await k.push({name:C.onboarding.dismissed?"admin-integrations":"product-tour"})):y(this,be)?(await k.push({name:"loading"}),await k.push({name:C.onboarding.dismissed?"onboarding":"product-tour"})):await super.redirect()}async on_install({code:s,installationId:r}){if(!s||!r||Number.isNaN(r))throw new Error("Invalid callback state");const n=await _e.registerCallback({type:"github",code:s,installationId:r,setupAction:"install"});if(U(this,be,(n==null?void 0:n.created)===!1),n&&n.uuid){const i={redirect:`${Wr}?${Yr}=postInstall&${Kr}=${n.uuid}`};window.sessionStorage.setItem(Jt,JSON.stringify(i))}return"github"}async on_request({code:s}){if(!s)throw new Error("Invalid callback state");return U(this,Fe,!0),await _e.registerCallback({type:"github",code:s,setupAction:"request"}),"github"}async on_postInstall({code:s}){if(!s)throw new Error("Invalid callback state");const r=await _e.registerCallback({type:"github",code:s,setupAction:"postInstall"});return U(this,be,(r==null?void 0:r.created)===!1),"github"}}Fe=new WeakMap,be=new WeakMap;const Jr="/callback/msteams",Xr="code",Zr="action";class gd extends Nt{static get path(){return Jr}provideUserFeedback(){E.info("Integration added successfully")}async handle(e){try{const s=await this.createIntegration(e);w.authenticated&&await te.init(),this.sendToAnalytics(s),await this.redirect(),this.provideUserFeedback()}catch(s){await this.handleIntegrationError(s)}}async createIntegration(e){const s=e.get(Zr),r=s&&this[`on_${s}`];if(!r)throw new Error("Invalid callback");const n=e.get(Xr);return window.history.replaceState(null,"",window.location.origin),await r.call(this,{code:n,action:s})}async redirect(){window.history.replaceState(null,"",window.location.origin),await k.push({name:"loading"});try{await k.push({name:te.hasAtLeastOneSourceControlIntegration?"admin-integrations":"home",ignoreRedirectError:!0})}catch(e){console.warn("Failed to redirect",e)}}async on_install({code:e,action:s}){if(!e)throw new Error("Invalid callback");return w.authenticated?await this.on_postInstall({code:e,action:s}):(this.saveCallbackMessage(e),"msteams")}async on_postInstall({code:e}){if(!e)throw new Error("Invalid callback");return w.authenticated?await _e.create({type:"msteams",code:e}):(this.saveCallbackMessage(e),await k.replace({name:"login",ignoreRedirectError:!0})),"msteams"}saveCallbackMessage(e){const s={redirect:`${Jr}?${Zr}=postInstall&${Xr}=${e}`};window.sessionStorage.setItem(Jt,JSON.stringify(s))}}const fd="/callback/payment",_d="type",vd="action",yd="state";class Id extends Nt{static get path(){return fd}async handle(e){try{const s=e.get(vd),r=s&&this[`on_${s}`];if(!r)throw new Error("Invalid callback action");const n=e.get(_d);if(!n)throw new Error("Invalid callback type");const i=e.get(yd);window.history.replaceState(null,"",window.location.origin),await r.call(this,{type:n,action:s,state:i})}catch(s){await this.handleIntegrationError(s)}}provideUserFeedback(){}async redirect(e){if(await k.push({name:"loading"}),!e){window.location.reload();return}try{const s=window.sessionStorage.getItem(e);if(!s)return;window.sessionStorage.removeItem(e),window.location.href=s,window.location.reload()}catch(s){console.warn("Failed to redirect",s)}}async on_success({type:e,action:s,state:r}){await Xs.registerCallback(e,s),await this.redirect(r)}async on_cancel({state:e}){await this.redirect(e)}}const wd="/callback/slack",Ed="code",bd="state";class Ad extends Nt{static get path(){return wd}provideUserFeedback(){E.info("Integration added successfully")}async handle(e){try{const s=e.get(Ed),r=e.get(bd);if(!s&&r){console.warn("Invalid callback");return}else if(!s||!r)throw new Error("Invalid callback");if(localStorage.getItem("slackState")!==r)throw new Error("There was an error trying to integrate with Slack");await _e.create({type:"slack",code:s}),await te.init(),this.provideUserFeedback(),this.sendToAnalytics("slack"),window.history.replaceState(null,"",window.location.origin),await k.push({name:te.hasAtLeastOneSourceControlIntegration?"admin-integrations":"home"})}catch(s){window.history.replaceState(null,"",window.location.origin),await this.handleIntegrationError(s)}}}var os,to;const Od=new(to=class{constructor(){R(this,os,new Map([md,pd,Ad,Id,xo,gd].map(e=>[e.path,e])))}resolve(e){const s=y(this,os).get(e);return s?new s:null}},os=new WeakMap,to),Rd="channels:history,channels:read,chat:write,commands,groups:history,groups:read,groups:write,im:history,im:read,im:write,users:read,users:read.email",wg="arnica-notifications",Eg="arnica-security-notifications",Qe="dev.notaloevera.io",Mt="app.arnica.io",et="localhost",Td={[et]:"notaloevera",[Qe]:"notaloeveradev",[Mt]:"arnica-github-connector"},Sd={[et]:"00FA8F7A-1882-42C4-8059-4B1BB3C1C341",[Qe]:"40748290-4BF5-437A-9D3B-0AA1367FE083",[Mt]:"ADC046C2-87BC-45ED-AF64-3366C13EC563"},$d={[et]:"2828620050563.3278753913728",[Qe]:"2828620050563.3207229799382",[Mt]:"2828620050563.2899731731831"},Pd={[et]:{domain:"dev-6ab2c2jb.us.auth0.com",client_id:"rHAIKZYFNs2IIjCwZvepy4zAuFI86jZs"},[Qe]:{domain:"dev-6ab2c2jb.us.auth0.com",client_id:"rHAIKZYFNs2IIjCwZvepy4zAuFI86jZs"},[Mt]:{domain:"arnica-prod.us.auth0.com",client_id:"yp3AP4SVzUXMqAhsOqRqizp57BXc0M69"}},Dd={[et]:"minute",[Qe]:"hour",[Mt]:"day"},Lo=class{static githubInstallationUrl(t,e){return`https://github.com/organizations/${t}/settings/installations/${e}`}static get githubAppUrl(){const t=Td[location.hostname];if(!t)throw new Error("Invalid hostname");return`https://github.com/apps/${t}/installations/new`}static get adoAppUrl(){const t=Sd[location.hostname];if(!t)throw new Error("Invalid hostname");return`https://app.vssps.visualstudio.com/oauth2/authorize?client_id=${t}&response_type=Assertion&state=1&scope=%20vso.auditlog%20vso.auditstreams_manage%20vso.build_execute%20vso.code_manage%20vso.code_status%20vso.entitlements%20vso.environment_manage%20vso.extension%20vso.graph_manage%20vso.identity_manage%20vso.memberentitlementmanagement_write%20vso.notification_manage%20vso.packaging%20vso.profile_write%20vso.project_manage%20vso.release%20vso.security_manage%20vso.test%20vso.threads_full%20vso.tokenadministration%20vso.tokens&redirect_uri=${window.location.origin}/callback/ado`}static get slackAppUrl(){const t=new URL("https://slack.com/oauth/v2/authorize"),e=window.crypto.randomUUID();localStorage.setItem("slackState",e);const s=$d[location.hostname];if(!s)throw new Error("Invalid hostname");return t.searchParams.set("client_id",s),t.searchParams.set("scope",Rd),t.searchParams.set("user_scope",""),t.searchParams.set("state",e),t.searchParams.set("redirect_uri",window.location.origin+"/callback/slack"),t.toString()}static get auth0Config(){const t=Pd[location.hostname];if(!t)throw new Error("Invalid hostname");return t}static get trendsTimeUnit(){const t=Dd[location.hostname];if(!t)throw new Error("Invalid hostname");return t}};let xt=Lo;xt.isLocalDev=location.hostname===et;xt.isDev=Lo.isLocalDev||location.hostname===Qe;const Cd="/callback/github",Nd="/callback/ado",w=new class Uo{constructor(){this.sessionToken=new Bl("signedToken",null),this._user=null,this._signedToken=null,this._selectedOrgId=null,this.initialized=!1,this.loading=!0,this.popupOpen=!1,p.observable(this)}async getSelectedOrgId(){return this.isArnicaAdmin?(this._selectedOrgId=await dt.getTenantOverride(),this._selectedOrgId):null}async setSelectedOrgId(e){this.isArnicaAdmin&&e!==this._selectedOrgId&&(this._selectedOrgId=e,await dt.setTenantOverride(e),location.reload())}async init(){if(!this.initialized)try{if(await this.signedTokenBasedAuthentication())return;const e=L(_({},xt.auth0Config),{redirect_uri:`${window.location.origin}${xo.path}`,cacheLocation:"localstorage"});if(this.auth0Client=await ra(e),await this.setUserInternal(),await Uo.handleCallbacks(),!this._user)return;if(!this._user.isEmailVerified){this.initialized=!0;return}await this.afterEmailIsVerified()}catch(e){throw Ae.logEvent("Error in Auth Init",void 0,{group:"General"}),e instanceof Error&&(this.error=e),await To.show(e),e}finally{this.initialized=!0,this.loading=!1}}async triggerStoredCallback(){try{const e=window.sessionStorage.getItem(Jt);if(!e)return;window.sessionStorage.removeItem(Jt);const s=JSON.parse(e);await p.nextTick(),window.location.href=s.redirect}catch(e){console.warn(e)}}static async handleCallbacks(){const e=new URLSearchParams(window.location.search),s=window.location.pathname,r=Od.resolve(s);r&&await r.handle(e)}get isNonDefaultOrgId(){return!!this._selectedOrgId}get user(){return this._user}get scopes(){var e,s;return Object.fromEntries((((s=(e=this.user)==null?void 0:e.userInfo)==null?void 0:s.scopes)||[]).map(r=>[r,!0]))}async reloadUser(){await this.getTokenSilently({ignoreCache:!0}),await this.setUserInternal(!0)}async setUserInternal(e=!1){var s;if(!this._user||e){const r=await((s=this.auth0Client)==null?void 0:s.getUser({}));if(r){const n=await Us.getUserInfo();this._user=new mo(r,n==null?void 0:n.userInfo)}}}get authenticated(){return!!this.user}get isEmailVerified(){var e,s;return(s=(e=this._user)==null?void 0:e.isEmailVerified)!=null?s:!1}get authenticatedAndEmailVerified(){return this.authenticated&&this.isEmailVerified}get activated(){var e,s;return((s=(e=this.user)==null?void 0:e.userInfo)==null?void 0:s.requiresActivation)!==!0}get hasOrgId(){var e,s;return!!((s=(e=this.user)==null?void 0:e.userInfo)!=null&&s.orgId)}get isArnicaAdmin(){var e,s;return(s=(e=this.user)==null?void 0:e.isArnicaAdmin)!=null?s:!1}async signOut(){Ae.logEvent("User Logged Out",void 0,{group:"General"}),this.sessionToken.item=null,await k.replace({name:"logout",ignoreRedirectError:!0})}async auth0SignOut(){var e;await((e=this.auth0Client)==null?void 0:e.logout({localOnly:!0,federated:!1})),this._user=null}async loginWithRedirect(e){var s;return(s=this.auth0Client)==null?void 0:s.loginWithRedirect(L(_({},e),{prompt:"login",scope:"openid groups email"}))}async getIdToken(e){var s;return this._signedToken||((s=await this.getTokenSilently(e))==null?void 0:s.id_token)}async getTokenSilently(e){var s;try{return await((s=this.auth0Client)==null?void 0:s.getTokenSilently(L(_({},e),{detailedResponse:!0})))}catch(r){if(r&&typeof r=="object"&&"error"in r&&r.error==="login_required"){this._user=null,await k.push({name:"login",query:{reason:"expired"}});return}throw r}}async afterEmailIsVerified(){if(!this._user)throw new Error("User is not authenticated");await Io.emit("auth.initialized",this),this._user.userInfo=await Ne.me(!0,!0),Ae.init(this._user),await this.getSelectedOrgId(),ze.load(this._user.userInfo),await this.triggerStoredCallback()}async signedTokenBasedAuthentication(){var r;const e=new URL(window.location.href),s=((r=e.searchParams.get("t"))==null?void 0:r.trim())||this.sessionToken.item||null;return s?(this._signedToken=`Token ${s}`,e.searchParams.delete("t"),this.sessionToken.item=s,window.history.replaceState({},"",e.toString()),this._user=await Us.getUserInfo(),!0):!1}},Md=new class{constructor(){this._notifications=[],p.observable(this)}get unreadCount(){return this._notifications.filter(e=>!e.read).length}async init(){await this.reload(),this.poll()}async poll(){var e;try{if(!w.authenticatedAndEmailVerified||!((e=w.user)!=null&&e.registered))return;this._notifications=await xs.get(!0)}catch(s){console.error("poll",s)}finally{setTimeout(()=>this.poll(),5e3)}}get notifications(){return this._notifications}clear(){this._notifications=[]}get count(){return this._notifications.length}async reload(){var e;!w.authenticatedAndEmailVerified||!((e=w.user)!=null&&e.registered)||(this._notifications=await xs.get(!1))}};function Es(t){return t.identities}function Qr(t){return t.appFullName}class xd{filterOutDismissedItems(e,s){if(e.reportItems=this.filterDismissedIdentities(e.reportItems,s),e.summary.scmType===$.GITHUB)e.reportItems=this.githubReportItemsWithoutDismissedItems(e.reportItems,s);else if(e.summary.scmType===$.AZURE_DEVOPS){if(e.reportItems.length!==0&&!e.reportItems.every(r=>Es(r)))throw new Error("Missing expected risk report item properties");e.reportItems=this.adoReportItemsWithoutDismissedItems(e.reportItems,s)}else throw new Error("Unknown SCM type in report")}filterDismissedIdentities(e,s){const r=this.generateDismissalsMapFromIdentities(s),n=this.generateDismissalsMapFromApps(s);if(e.every(i=>Es(i)))return e.filter(i=>{var a,c;const o=new Set;return i.identities=((a=i.identities)!=null?a:[]).filter(l=>{const u=r.get(l);return u&&(u.size===0||u.has(i.asset.org))?(o.add(l),!1):!0}),i.profileNames=(c=i.profileNames)==null?void 0:c.filter(l=>!o.has(l.identity)),i.identities.length!==0});if(e.every(i=>Qr(i)))return e.filter(i=>!n.get(kt(i.asset.org,i.appFullName)));throw new Error("Risk Item type is not supported")}githubReportItemsWithoutDismissedItems(e,s){const r=this.generateDismissalsMapFromDismissalItems(s);if(e&&e.length&&e.length!==0){if(e.every(n=>Es(n)))return e.filter(n=>{const i=r.get(B.GROUP),o=r.get(B.ORG),a=r.get(B.REPO),c=r.get(B.BRANCH);return!(n.group&&n.teamSlug&&i&&i.has(kt(n.asset.org,n.teamSlug))||o!=null&&o.has(gs(n.asset.org))||n.asset.repo&&a&&a.has(su(n.asset.org,n.asset.repo))||n.asset.repo&&n.asset.branch&&c&&c.has(ru(n.asset.org,n.asset.repo,n.asset.branch)))});if(e.every(n=>Qr(n))){const n=r.get(B.APP_FULL_NAME),i=r.get(B.ORG);return e.filter(o=>!(o.appFullName&&n&&n.has(kt(o.asset.org,o.appFullName))||i!=null&&i.has(gs(o.asset.org))))}else throw new Error("Risk report item type is not supported")}return[]}adoReportItemsWithoutDismissedItems(e,s){const r=this.generateDismissalsMapFromDismissalItems(s);return e.filter(n=>{const i=r.get(B.GROUP),o=r.get(B.ORG),a=r.get(B.PROJECT),c=r.get(B.REPO),l=r.get(B.BRANCH);if(n.group&&i&&i.has(kt(n.asset.org,n.group))||o!=null&&o.has(gs(n.asset.org)))return!1;const u=n.asset;return!(u.project&&a&&a.has(Ql(u.org,u.project))||u.project&&u.repo&&c&&c.has(eu(u.org,u.project,u.repo))||u.project&&u.repo&&u.branch&&l&&l.has(tu(u.org,u.project,u.repo,u.branch)))})}generateDismissalsMapFromIdentities(e){const s=new Map;for(const r of e)r.riskReportItemType===B.IDENTITY&&s.set(r.riskReportItemId,new Set(r.orgNames));return s}generateDismissalsMapFromApps(e){const s=new Map;for(const r of e)r.riskReportItemType===B.APP_FULL_NAME&&s.set(r.riskReportItemId,new Set(r.orgNames));return s}generateDismissalsMapFromDismissalItems(e){const s=new Map;return e.forEach(r=>{s.setOrUpdate(r.riskReportItemType,()=>new Set([r.riskReportItemId]),(n,i)=>i.add(r.riskReportItemId))}),s}}const Vs=new class{constructor(){this.githubDismissedItems=null,this.adoDismissedItems=null,this.recentlyDismissedItems=new Map}async init(){const[e,s]=await Promise.all([nt.get($.AZURE_DEVOPS),nt.get($.GITHUB)]);this.adoDismissedItems=e,this.githubDismissedItems=s}async dismissItem(e){(await nt.create(e)).forEach(r=>{this.recentlyDismissedItems.set(r.riskReportItemSCMTypeAndItemTypeAndId,r)}),this.silentlyGenerateInsightsAndReports().catch(r=>{console.error("An error occurred while generating insights",r)})}async undismissItem(e){await nt.delete(e),this.recentlyDismissedItems.delete(e),this.silentlyGenerateInsightsAndReports().catch(s=>{console.error("An error occurred while generating insights",s)})}async silentlyGenerateInsightsAndReports(){await mt.generateInsights({withDetectionReports:!1}).then(e=>{mt.init(!0),Go.init({silent:!0})}).catch(e=>{console.error("An error occurred while generating insights",e)})}},en={sortKey(t,e){return`${t}_totalIdentities_${e}`},getSortKeyComponents(t){const[e,s]=t.split("_totalIdentities_");return{scmType:e,identityId:s}}},Ce=new class{constructor(){this.isInitializedAtLeastOnce=!1,this.identityOverrides=new Map,p.observable(this)}async init(){if(this.isInitializedAtLeastOnce)return;this.identityOverrides=new Map;const e=await dt.getIdentityOverrides();for(const s of e)this.identityOverrides.set(s.identityId,s);this.isInitializedAtLeastOnce=!0}async update(e){const s=en.sortKey($.GITHUB,e.identityId),r=this.identityOverrides.get(s)?Object.assign({},this.identityOverrides.get(s),e):L(_({},e),{namesToRemove:[]});this.identityOverrides.set(s,r),await dt.setIdentityOverrideItem(r)}get(e,s){if(!this.identityOverrides||this.identityOverrides.size===0)return null;const r=en.sortKey(e,s),n=this.identityOverrides.get(r);return n&&n||null}};var le,so;const fe=new(so=class{constructor(){R(this,le,void 0);U(this,le,null),this.businessImportanceReport=null,this.scmType=null,this.inventoryReports={[S.GH_TOTAL_REPOSITORIES]:null,[S.GH_TOTAL_IDENTITIES]:null,[S.GH_TOTAL_ORGS]:null,[S.GH_INACTIVE_IDENTITIES]:null,[S.GH_REPOSITORIES_NO_BRANCH_PROTECTION]:null,[S.GH_AGGREGATED_REPOSITORIES]:null,[S.GH_CODEOWNER_ERRORS]:null,[S.GH_APP]:null,[S.GH_USER_REPO_PERMISSION]:null,[G.ADO_TOTAL_IDENTITIES]:null,[G.ADO_TOTAL_REPOSITORIES]:null,[G.ADO_EXCESSIVE_LICENSES]:null,[G.ADO_USER_ASSET_PERMISSION]:null},p.observable(this)}getInventoryReport(e){var s;return(s=this.inventoryReports[e])!=null?s:null}async loadReport(e,s={}){this.inventoryReports[e]=await J.getInventory(e,s)}async init(e={}){const s=await J.getInventoryReports(e);for(const r of s)this.inventoryReports[r.summary.queryType]=r}async initReport(e,s={}){const r=await J.getInventory(e,s);r&&(this.inventoryReports[e]=r)}async initSBOMReport(){var e,s;U(this,le,await J.getSBOMReport()),y(this,le)&&console.log(`SBOM report loaded. Size: ${(s=(e=y(this,le).findings)==null?void 0:e.length)!=null?s:-1}`)}async initBusinessImportanceReport(){this.businessImportanceReport=await J.getBusinessImportanceReport()}get totalIdentities(){var r,n,i,o;const e=(n=(r=this.getInventoryReport(S.GH_TOTAL_IDENTITIES))==null?void 0:r.summary.value)!=null?n:0,s=(o=(i=this.getInventoryReport(G.ADO_TOTAL_IDENTITIES))==null?void 0:i.summary.value)!=null?o:0;return e+s}get hasInventory(){return!!(this.getInventoryReport(S.GH_TOTAL_IDENTITIES)||this.getInventoryReport(G.ADO_TOTAL_IDENTITIES))}tryFindGitHubIdentityById(e){var r,n;if(!e)return null;const s=this.getInventoryReport(S.GH_TOTAL_IDENTITIES);return(n=(r=s==null?void 0:s.reportItems)==null?void 0:r.find(i=>i.identity===e))!=null?n:null}tryFindADOIdentityById(e){var r,n;if(!e)return null;e=e.toLowerCase();const s=this.getInventoryReport(G.ADO_TOTAL_IDENTITIES);return(n=(r=s==null?void 0:s.reportItems)==null?void 0:r.find(i=>i.principalName.toLowerCase()===e))!=null?n:null}tryFindGitHubIdentityByEmail(e){var r,n;if(!e)return null;e=e.toLowerCase();const s=this.getInventoryReport(S.GH_TOTAL_IDENTITIES);return(n=(r=s==null?void 0:s.reportItems)==null?void 0:r.find(i=>i.emails.map(o=>o.toLowerCase()).includes(e)))!=null?n:null}tryFindIdentityById(e){var s;return e?(s=this.tryFindGitHubIdentityById(e))!=null?s:this.tryFindADOIdentityById(e):null}tryFindIdentityByEmail(e){var s;return e?(s=this.tryFindGitHubIdentityByEmail(e))!=null?s:this.tryFindADOIdentityById(e):null}get sbomReport(){return y(this,le)}set sbomReport(e){U(this,le,e)}getAllOrgNames(){var s,r;const e=new Set;return(s=this.getInventoryReport(S.GH_TOTAL_ORGS))==null||s.reportItems.forEach(n=>e.add(n.orgName)),(r=this.getInventoryReport(G.ADO_TOTAL_REPOSITORIES))==null||r.reportItems.forEach(n=>e.add(n.orgName)),Array.from(e)}getAllRepoNames(){var s,r;const e=new Set;return(s=this.getInventoryReport(S.GH_TOTAL_REPOSITORIES))==null||s.reportItems.forEach(n=>e.add(n.repo)),(r=this.getInventoryReport(G.ADO_TOTAL_REPOSITORIES))==null||r.reportItems.forEach(n=>e.add(n.repoName)),Array.from(e)}getAllProjects(){var r;const e=(r=this.getInventoryReport(G.ADO_TOTAL_REPOSITORIES))==null?void 0:r.reportItems;return(e==null?void 0:e.map(n=>({org:n.orgName,id:n.projectId,name:n.projectName,fullName:`${n.orgName}/${n.projectName}`})).distinct(n=>n.fullName))||[]}getAllProjectNames(){var s;const e=new Set((s=this.getInventoryReport(G.ADO_TOTAL_REPOSITORIES))==null?void 0:s.reportItems.map(r=>r.projectName));return Array.from(e)}getAllUsers(){var s,r;return{github:new Map(((s=this.getInventoryReport(S.GH_TOTAL_IDENTITIES))==null?void 0:s.reportItems.map(n=>[n.identity,n]))||[]),"azure-devops":new Map(((r=this.getInventoryReport(G.ADO_TOTAL_IDENTITIES))==null?void 0:r.reportItems.map(n=>[n.principalName,n]))||[])}}getAllGroups(){return{github:new Map,"azure-devops":new Map}}},le=new WeakMap,so),Xt=new class{constructor(){this.isInitializedAtLeastOnce=!1,this.githubIdentityToNameMap=null,p.observable(this)}async init(){Ce.isInitializedAtLeastOnce||await Ce.init(),this.githubIdentityToNameMap=await this.getIdentityToNameMap($.GITHUB),this.isInitializedAtLeastOnce=!0}getGithubIdentityDisplayName(e){if(!this.githubIdentityToNameMap)return e;const s=this.githubIdentityToNameMap.get(e);return s!=null?s:e}async getIdentityToNameMap(e){var s,r;if(e===$.AZURE_DEVOPS)throw new Error("not implemented");if(e===$.GITHUB){const n="GH_TOTAL_IDENTITIES";await fe.initReport(n);const i=fe.getInventoryReport(n);Ce.isInitializedAtLeastOnce||await Ce.init();const o=new Map;for(const a of(s=i==null?void 0:i.reportItems)!=null?s:[]){const c=Ce.get(e,a.identity);c?o.set(a.identity,(r=c.name)!=null?r:""):a.names&&a.names.length>0?o.set(a.identity,a.names[0]):o.set(a.identity,a.identity)}return o}throw new Error(`Invalid SCM Type: ${e}`)}},ko=Object.getPrototypeOf(p.observable({}).__ob__).constructor;class Ld extends ko{constructor(e,s,r){super(e,s,r),!s&&e instanceof Map&&this.observeArray(e)}observeArray(e){super.observeArray(e instanceof Map?Array.from(e.values()):e)}}class We extends Map{constructor(e){var s;super(e),this._length=super.size,(s=this.__ob__)!=null||(this.__ob__=new Ld(this))}_notify(e){var s,r;this._length=super.size,(r=(s=this.__ob__)==null?void 0:s.dep)==null||r.notify({type:"map mutation",target:this,key:e})}get length(){return this._length}get size(){return this._length}clear(){super.clear(),this._notify("clear")}delete(e){const s=super.delete(e);return this._notify("delete"),s}set(e,s){var r;return p.observable(s),super.set(e,s),Array.isArray(s)&&((r=this.__ob__)==null||r.observeArray(s)),this._notify("set"),this}}const Go=new class{constructor(){this.dismissalItemFilterer=new xd,this.riskReports=new Map,this.filter=null,this.codeRiskReport=new We,p.observable(this)}async initReport(e,s={}){const[r,n]=await Promise.all([J.getRisk(e,s),Xt.init()]);if(!r||"error"in r){console.warn(`Failed to get risk report for ${e}`,r);return}this.dismissReportItems([r]),this.riskReports.set(e,r)}async init(e={}){const[s]=await Promise.all([J.getAllRisks(e),Xt.init()]);this.dismissReportItems(s);for(const r of s)this.riskReports.set(r.summary.queryType,r)}async getRiskByProjectId(e,s,r,n={},i=!0){const o=await J.getRiskByProjectId(e,s,r,n,i);return o||null}dismissReportItems(e){if(!!Vs.recentlyDismissedItems.size)for(const s of e)this.dismissalItemFilterer.filterOutDismissedItems(s,Array.from(Vs.recentlyDismissedItems.values()))}async initCodeRiskReport(e,s,r,n,i,o,a=!1){var u;const c=await Ls.getCodeRiskReport(a,e,s,r,n,i,o),l=this.generateFullRepoName(e,s,r,n);c&&(this.codeRiskReport.set(`${i}.${o}.${l}`,c),console.log(`CodeRisk report loaded. Size: ${(u=c==null?void 0:c.length)!=null?u:-1}`))}async initSingleCodeRiskFinding(e){var i;const s=await Ls.getCodeRiskSingleFindingReport(e),[r]=s||[];if(!r)return null;const n=this.generateFullRepoName(r.integrationType,r.integrationOrgId,r.project,r.repo);return s&&this.codeRiskReport.set(`${r.dataType}.${r.scanner}.${n}`,s),console.log(`CodeRisk report loaded. Size: ${(i=s==null?void 0:s.length)!=null?i:-1}`),s}generateFullRepoName(e,s,r,n){return e==="azure-devops"?`${e}/${s}/${r}/${n}`:`${e}/${s}/${n}`}},sr=new class{constructor(){this.jobs=null,this.timeout=null,p.observable(this)}async init(e=!1,s=!1){var r;!((r=w.user)!=null&&r.registered)||(this.jobs=await po.get(e),this.jobs&&(this.jobs=this.jobs.filter(n=>w.isArnicaAdmin?!0:!(n.type==="detect"&&n.status==="error"))),s&&this.hasIngestOrDetectJobsInProgress&&(this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>this.init(!0,!0),1e4)))}get hasIngestOrDetectJobsInProgress(){return this.hasJobsInProgress()}hasJobsInProgress(e=["ingest","detect"]){var s;return(s=this.jobs)==null?void 0:s.some(r=>e.includes(r.type)&&uo(r.status))}getJobsProgress(e=["ingest","detect"]){var n,i;const s=(i=(n=this.jobs)==null?void 0:n.filter(o=>e.includes(o.type)))!=null?i:[],r=s.filter(o=>Zl(o.status));return{total:s.length,concluded:r.length,ongoing:s.length-r.length,percent:(s.length!==0?r.length/s.length:0)*100}}},jo=new class{constructor(){this.members=[],p.observable(this)}async init(){var e;this.members=(e=w.user)!=null&&e.registered?await Ne.all():[]}},Ud=new class{constructor(){this.policy=null,p.observable(this)}async init(){this.policy=await Ms.getAll()}async getRules(e){var n;return{rules:(this.policy=(n=this.policy)!=null?n:await Ms.getAll()).rules.filter(i=>i.type===e)}}};var He;class tn{constructor(e){R(this,He,void 0);Object.assign(this,e),U(this,He,this.toJson()),this.validationErrors=new We}toJson(){const r=this,{validationErrors:e}=r,s=st(r,["validationErrors"]);return JSON.stringify(s)}isDirty(){return y(this,He)!==this.toJson()}reset(){const n=JSON.parse(y(this,He)),{validationErrors:s}=n,r=st(n,["validationErrors"]);Object.assign(this,r)}}He=new WeakMap;const kd=new class{constructor(){this._policies=new We,this._loading=!1,p.observable(this)}get loading(){return this._loading}get policies(){return this.getEntries()}get(e){return this._policies.get(e)||null}async save(e){const s=await Bt.save(e);return this._policies.set(e.sub,new tn(s)),s}getEntries(){return this.initPolicies(),this.getEntries=()=>[...this._policies.entries()],this.getEntries()}async initPolicies(){try{this._loading=!0;const e=await Bt.get();e.forEach(s=>this._policies.set(s,null)),await Promise.all(e.map(s=>this.loadPolicy(s)))}catch(e){console.error(e)}finally{this._loading=!1}}async loadPolicy(e){try{const s=await Bt.get(e);this._policies.set(s.sub,new tn(s))}catch(s){console.error(s)}}},Gd=new class{constructor(){this.githubMitigations=null,this.adoMitigations=null,p.observable(this)}async getGithubMitigationsFromRiskTypeAndResources(e,s){const r=s.chunk(10);return(await Promise.all(r.map(async i=>{const o={resources:i,queryType:e};return await F.generate("github",o)}))).flat()}async getOrgOwnerMitigationsFromRiskTypeAndResources(e,s){if(!(e in H))return null;const r=s.chunk(10);return(await Promise.all(r.map(async i=>await F.generateOrgOwners("github",i)))).flat()}async getADOMitigationsFromRiskTypeAndResources(e,s){const r=s.chunk(10);return(await Promise.all(r.map(async i=>{const o={resources:i,queryType:e};return await F.generate("ado",o)}))).flat()}async createGitHubMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.create("github",n)))).flat()}async createOrgOwnerMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createOrgOwner("github",n)))).flat()}async createGithubStaleUserMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createStaleUser("github",n)))).flat()}async createGithubStaleRepoMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createStaleRepo("github",n)))).flat()}async createGithubUnenforceablePolicyMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createUnenforceablePolicy("github",n)))).flat()}async createADOMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.create("ado",n)))).flat()}async createADOStaleUserMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createStaleUser("ado",n)))).flat()}async createADOStaleRepoMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createStaleRepo("ado",n)))).flat()}async createADOUnenforceablePolicyMitigation(e){return await F.createUnenforceablePolicy("ado",e)}async createMisconfiguredCodeownersMitigation(e){const s=e.chunk(10);return(await Promise.all(s.map(async n=>await F.createMisconfiguredCodeowners("github",n)))).flat()}async deleteMitigation(e){const s={assetIdSCMTypeAndResourceTypeLastIngestionTimestamp:e};await F.delete(s)}async revertMitigation(e,s){const r={assetIdSCMTypeAndResourceType:e,assetIdSCMTypeAndResourceTypeLastIngestionTimestamp:s};await F.revert(r)}async initGithubMitigations(){this.githubMitigations=await F.get("github")}async initADOMitigations(){this.adoMitigations=await F.get("ado")}},mt=new class{constructor(){this.insightsReport=null,this.insightsBySeverity=null,this.insightsByType=null,this.initialized=!1,p.observable(this)}async init(e=!1){var s;if(this.insightsReport=await Wt.get(e),this.insightsReport&&this.insightsReport.insights){this.insightsByType=this.insightsReport.insights.mapBy(r=>r.type),this.insightsReport.insights.sort((r,n)=>r.severity-n.severity),this.insightsBySeverity=[[],[],[],[]];for(const r of this.insightsReport.insights)r.severity>=1&&r.severity<=4&&((s=this.insightsBySeverity[r.severity-1])==null||s.push(r))}this.initialized=!0}async generateInsights(e){await Wt.generate(e)}getInsightBySeverity(e){var s,r;return(r=(s=this.insightsBySeverity)==null?void 0:s[e-1])!=null?r:null}getInsightByType(e){var s,r;return(r=(s=this.insightsByType)==null?void 0:s.get(e))!=null?r:null}},jd=new class{constructor(){this.filterStorage=new lo("secrets-filters"),this.secretsReport=null,p.observable(this)}get filters(){return _(_({},No),this.filterStorage.item)}set filters(e){this.filterStorage.item=e}resetFilters(){return this.filterStorage.item=null,this.filters}async init(){this.secretsReport=await J.get("secrets")}},Fd=new class{constructor(){this.permissionGrants=null,p.observable(this)}async init(){this.permissionGrants=await ho.get()}},Hd=1,Bd=365,Vd=new class{constructor(){this.inferenceReport=null,this.selectedDetectedAfterDays=null,p.observable(this)}async init(){this.selectedDetectedAfterDays||(this.selectedDetectedAfterDays=Q.enabled?Bd:Hd);const[e]=await Promise.all([J.get("inference",this.selectedDetectedAfterDays),Xt.init()]);this.inferenceReport=e!=null?e:[]}},qd=new class{constructor(){this._summary=null,p.observable(this)}get summary(){return this._summary}get identityCount(){return this.initIdentityCount(),fe.totalIdentities}async initIdentityCount(){return await Promise.all([fe.initReport(S.GH_TOTAL_IDENTITIES),fe.initReport(G.ADO_TOTAL_IDENTITIES)]),fe.totalIdentities}async refresh(){var e,s,r;try{this._summary=await Xs.getBillingSummary()}catch(n){V.isAxiosError(n)&&n.message&&E.error((r=(s=(e=n.response)==null?void 0:e.data)==null?void 0:s.message)!=null?r:n.message,{timeout:E.INDEFINITELY})}}},zd=new class{constructor(){this.apiKeys=null,p.observable(this)}async init(){this.apiKeys=await zt.getAPIKeys()}async createAPIKey(e){return await zt.createAPIKey(e)}async deleteAPIKey(e){return await zt.delete(e)}},Wd=300,Ke=new class{constructor(){this.cache=new Map,this.debounce=null,p.observable(this)}async tryGetFlag(e){return(await this.getFlags(e))[e]}async getFlags(...e){const s=e.filter(r=>!this.cache.has(r));if(s.length===0)return Object.fromEntries(e.map(r=>[r,this.cache.get(r)]));if(this.debounce)s.forEach(r=>this.debounce.keys.add(r));else{const r=this.debounce={keys:new Set(e),deferred:new no};setTimeout(async()=>{const n=r.keys;this.debounce=null;const i=await p.api.Flags.getFlags(...n);Object.entries(i).forEach(([o,a])=>this.cache.set(o,a)),r.deferred.resolve(i)},Wd)}return await this.debounce.deferred.promise}},qs=new class{constructor(){this.SUPPORTED_SCM_TYPES=[$.GITHUB,$.AZURE_DEVOPS],this.groupsByType=new We,this.groupsByResource=new We,p.observable(this)}indexGroups(e,s){for(const r of s)for(const n of r.resources){const i=at.sortKey({integrationType:Vt[e],integrationOrgId:n.org||"",project:n.project||"",repo:n.repo||""});this.groupsByResource.getOrSet(i,()=>[]).push(r)}}async init(){await Promise.all(this.SUPPORTED_SCM_TYPES.map(async e=>{const s=await it.get(e);this.groupsByType.set(e,s),this.indexGroups(e,s)}))}get(e){var s;return(s=this.groupsByType.get(e))!=null?s:null}async create(e,s){var n;const r={name:s,resources:[],owners:[],scm:e,type:"manual"};try{return await it.create(r)}catch(i){throw V.isAxiosError(i)&&((n=i.response)==null?void 0:n.status)===409?E.error(`A group with the name '${s}' already exists.`):E.error("An unknown error occurred. Please try again."),i}}async update(e,s){return s.type="manual",await it.update(e,s.sortKey,s)}async delete(e,s){await it.delete(e,s.sortKey)}},Y={read:1,reviewer:2,contributor:3,admin:4};var Kd=Object.defineProperty,Yd=Object.getOwnPropertyDescriptor,ds=(t,e,s,r)=>{for(var n=r>1?void 0:r?Yd(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Kd(e,s,n),n};let Ye=class extends p{emitEdit(){}emitClear(){}};ds([I({type:String,default:""})],Ye.prototype,"text",2);ds([cs("edit")],Ye.prototype,"emitEdit",1);ds([cs("clear")],Ye.prototype,"emitClear",1);Ye=ds([b],Ye);var Jd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"component asset-label"},[s("div",{staticClass:"cursor-pointer",on:{click:t.emitEdit}},[t._v(" "+t._s(t.text||"( Select )")+" "),s("v-btn",{staticClass:"hidden-lg-and-down",attrs:{icon:"",small:""}},[s("v-icon",{attrs:{small:"",title:"Edit"}},[t._v("mdi-dots-vertical")])],1)],1),s("v-btn",{attrs:{icon:"",small:""},on:{click:function(r){return r.stopPropagation(),t.emitClear.apply(null,arguments)}}},[t.text?s("v-icon",{attrs:{small:"",title:"Remove"}},[t._v("mdi-close")]):t._e()],1)],1)},Xd=[];const sn={};var Zd=P(Ye,Jd,Xd,!1,Qd,null,null,null);function Qd(t){for(let e in sn)this[e]=sn[e]}var Fo=function(){return Zd.exports}();const me={low:0,medium:1,high:2};class eh extends ko{constructor(e,s,r){super(e,s,r),!s&&e instanceof Set&&this.observeArray(e)}observeArray(e){super.observeArray(e instanceof Set?Array.from(e.values()):e)}}class th extends Set{constructor(e){var s;super(e),this._length=super.size,(s=this.__ob__)!=null||(this.__ob__=new eh(this))}_notify(e){var s,r;this._length=super.size,(r=(s=this.__ob__)==null?void 0:s.dep)==null||r.notify({type:"map mutation",target:this,key:e})}get length(){return this._length}get size(){return this._length}clear(){super.clear(),this._notify("clear")}add(e){return super.add(e),this._notify("add"),this}delete(e){const s=super.delete(e);return this._notify("delete"),s}}const sh={high:"error",medium:"warning",low:"info"},Ho={2:"mdi-chevron-up-box",1:"mdi-equal-box",0:"mdi-chevron-down-box","-1":"mdi-minus-box-outline"},rh={ACTIVE_ADMINS:"actively administrating this repository",FREQUENT_PR_REVIEWERS:"frequently reviewing pull requests",FREQUENT_COMMITTERS:"frequently contributing code",MANUAL:"a manual assignment in the product owners page"};class hs{constructor(){this.businessImportanceResourceMap=new Map,this.isShowDismissedEnabled=!1,this.newGroup=null,this.state=bs,this.assetOwnersMap=null,this.userFilters=new th}getImportanceIcon(e){return Ho[e]}get items(){var e,s;return(s=(e=this.state.Groups.get(this.scmType))==null?void 0:e.filter(r=>this.filterGroup(r)).map(r=>this.augmentImportance(r)))!=null?s:[]}filterGroup(e){return this.userFilters.size===0?!0:e.owners.some(s=>this.userFilters.has(s.id))}get userFiltersList(){return[...this.userFilters]}userIcon(){return"mdi-profile"}addFilter(e){this.userFilters.add(e)}removeFilter(e){this.userFilters.delete(e)}static businessImportanceSort(e,s){const r=me[e]||0,n=me[s]||0;return r-n}generateAssetOwnersMap(){const e=new Map;return this.items.forEach(s=>{const r=s.owners;s.resources.forEach(n=>{var a;const i=this.resourceId(n),o=this.getResourceImportance(n);if(o){const c=(a=e.get(i))==null?void 0:a.importance;(!c||me[o]>me[c])&&e.set(i,{importance:o,contributors:r,assetName:s.name})}})}),e}getAssetOwnerData(e){if(!this.assetOwnersMap)return null;if(e.org){const s=this.assetOwnersMap.get(e.org);if(s)return s}if(e.project){const s=this.assetOwnersMap.get(`${e.org}/${e.project}`);if(s)return s}if(e.repo){const s=this.assetOwnersMap.get(`${e.org}${e.project?"/"+e.project:""}/${e.repo}`);if(s)return s}return null}getResourceImportance(e){var r,n;const s=(n=e.importance)!=null?n:(r=this.businessImportanceResourceMap.get(this.resourceId(e)))==null?void 0:r.businessImportance.label;return e.repo?s!=null?s:"low":s!=null?s:null}getResourceImportanceScore(e){var s;return((s=this.businessImportanceResourceMap.get(this.resourceId(e)))==null?void 0:s.businessImportance.score)||null}async createGroup(e){var i,o,a,c;if(!((o=(i=this.state.Auth.user)==null?void 0:i.userInfo)==null?void 0:o.orgId))throw new Error("Could not find arnica organization id");const r=await this.state.Groups.create(this.scmType,e);this.augmentImportance(r);const n=(a=this.state.Groups.groupsByType)==null?void 0:a.get(this.scmType);return n&&(n.push(r),(c=this.state.Groups.groupsByType)==null||c.set(this.scmType,n)),r}displayReasonUserAdded(e){switch(e){case"ACTIVE_ADMINS":return"Active Admin";case"FREQUENT_PR_REVIEWERS":return"PR Reviewer";case"FREQUENT_COMMITTERS":return"Contributor";default:return"Manual"}}reasonUserProductOwner(e,s){return`${e} is classified as a product owner due to ${rh[s]}`}displayGroupType(e){return e.type.capitalize()}displayDaysSinceLastAction(e){return e&&(e>365||e<0)&&(e=null),e!=null?e:"N/A"}organizationsText(e){return` ${e} organization(s)`}repositoriesText(e){return`${e} ${e===1?"repository":"repositories"}`}getMaxGroupImportanceLevel(e){const s=e.map(r=>this.getGroupImportanceLevel(r)).nonNullable().maxBy(r=>me[r]);return s!=null?s:null}getMaxGroupImportance(e){const s=e.maxBy(r=>{var n;return me[(n=this.getGroupImportanceLevel(r))!=null?n:"low"]});return s!=null?s:null}getMaxGroupImportanceScore(e){const s=e.map(r=>this.getGroupImportanceScore(r)).nonNullable().maxBy(r=>r);return s!=null?s:null}getGroupImportanceLevel(e){var r;return(r=e.resources.map(n=>{var i;return(i=n.importance)!=null?i:this.getResourceImportance(n)}).nonNullable().maxBy(n=>me[n]))!=null?r:null}getGroupImportanceScore(e){return e.resources.map(r=>this.getResourceImportanceScore(r)).nonNullable().maxBy(r=>r)||null}getBusinessImportanceText(e){return(e==null?void 0:e.capitalize())||"Not set"}getBusinessImportanceColor(e){return e&&sh[e]||"grey"}async updateGroupName(e,s){e.name=s;const r=await this.state.Groups.update(this.scmType,e);this.augmentImportance(r)}async addOwner(e,s){if(e.owners.some(r=>r.id===s))throw new Error("This user is already a part of this group");e.owners.push({id:s})}async removeOwner(e,s){const r=e.owners.findIndex(n=>n.id===s);if(r===-1)throw new Error(`Owner ${s} could not be found in the group`);e.owners.splice(r,1)}async updateGroupOwners(e){const s=await this.state.Groups.update(this.scmType,e);this.augmentImportance(s),await this.init()}addAsset(e,s){const r=this.assets.get(s);if(!r)throw new Error("Unknown asset attempting to be added");if(e.resources.find(i=>this.resourceId(i)===s))throw new Error("The asset already exists on this group");e.resources.push(r)}async removeAsset(e,s){const r=e.resources.findIndex(n=>this.resourceId(n)===this.resourceId(s));if(r===-1)throw new Error(`Asset ${this.resourceId(s)} could not be found in the group`);e.resources.splice(r,1)}async updateGroupAssets(e){const s=await this.state.Groups.update(this.scmType,e);return await this.init(),this.augmentImportance(s)}async deleteGroup(e){await this.state.Dialog.confirm("Are you sure you want to remove the manual group?","Arnica will create automatic group(s) and resume management of those groups should you remove this manual group.")&&await this.state.Groups.delete(this.scmType,e),await this.init()}generateBusinessImportanceResourceMap(){var s,r;const e=(r=(s=this.state.InventoryReports.businessImportanceReport)==null?void 0:s.filter(n=>Me[n.integrationType]===this.scmType))!=null?r:[];this.businessImportanceResourceMap=e.mapBy(n=>{const i={org:n.integrationOrgId,project:n.project,repo:n.repo};return this.resourceId(i)})}augmentImportance(e){return"importance"in e||Object.defineProperty(e,"importance",{get:()=>me[this.getGroupImportanceLevel(e)||"low"],enumerable:!1}),e}async init(){var e,s;if(!((s=(e=this.state.Auth.user)==null?void 0:e.userInfo)!=null&&s.orgId)){this.state.Popup.warn("Please create an organization first");return}try{await Promise.all([this.state.Groups.init(),this.state.InventoryReports.initBusinessImportanceReport()]),this.assetOwnersMap=this.generateAssetOwnersMap(),this.generateBusinessImportanceResourceMap()}catch(r){console.error(r)}}}function nh(t){return t.importanceValue?Ho[t.importanceValue]:""}var ih=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,rr=(t,e,s,r)=>{for(var n=r>1?void 0:r?oh(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&ih(e,s,n),n};let gt=class extends p{get icon(){var t;return(t=this.importance.item)!=null&&t.importanceValue?nh(this.importance.item):""}get dropdownOptions(){return["high","medium","low"]}emitUpdated(t){return t}};rr([I({type:Object,default:{}})],gt.prototype,"importance",2);rr([cs("updated")],gt.prototype,"emitUpdated",1);gt=rr([b],gt);var ah=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-menu",{attrs:{"offset-y":"","close-on-content-click":""},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on;return[s("v-chip",t._g(t._b({attrs:{title:t.importance.title,label:"",color:t.importance.color,"text-color":"white"}},"v-chip",t.$attrs,!1),n),[t.icon?s("v-icon",t._b({},"v-icon",t.$attrs,!1),[t._v(t._s(t.icon))]):t._e(),t._v(" "+t._s(t.importance.text)+" "),t.importance.readonly?t._e():s("v-icon",t._b({attrs:{right:""}},"v-icon",t.$attrs,!1),[t._v("mdi-dots-vertical")])],1)]}}])},[t.importance.readonly?t._e():s("v-list",t._l(t.dropdownOptions,function(r,n){return s("v-list-item",{key:n,attrs:{link:"",dense:""},on:{click:function(i){return t.emitUpdated(r)}}},[s("v-list-item-title",{staticClass:"text-capitalize"},[t._v(t._s(r))])],1)}),1)],1)},ch=[];const rn={};var lh=P(gt,ah,ch,!1,uh,null,null,null);function uh(t){for(let e in rn)this[e]=rn[e]}var Bo=function(){return lh.exports}();const Vo=(t,e,s,r)=>{let n,i;return e.sort((o,a)=>(s[0]==="lastActivity"?(n=t.getUserLatestActivityTime(o.id),i=t.getUserLatestActivityTime(a.id)):s[0]==="reason"?(n=o[s[0]]||null,i=a[s[0]]||null):(n=t.displayName(o.id).toLocaleLowerCase(),i=t.displayName(a.id).toLocaleLowerCase()),n!==0&&!n?r[0]?-1:1:i!==0&&!i||n<i?r[0]?1:-1:r[0]?-1:1)),e};function ph(t,e,s){var o,a;const r=t.importance&&e.importance&&hs.businessImportanceSort(t.importance,e.importance);if(r)return r>0?1:-1;if(t.importance||e.importance)return t.importance?1:-1;const n=(o=s.getResourceImportanceScore(t))!=null?o:Number.NEGATIVE_INFINITY,i=(a=s.getResourceImportanceScore(e))!=null?a:Number.NEGATIVE_INFINITY;return n<i?-1:n>i?1:0}function dh(t,e,s){var c,l;const r=s.getGroupImportanceLevel(t),n=s.getGroupImportanceLevel(e),i=r&&n&&hs.businessImportanceSort(r,n);if(i)return i>0?1:-1;const o=t.resources.some(u=>u.importance),a=e.resources.some(u=>u.importance);if(o===a){const u=(c=s.getGroupImportanceScore(t))!=null?c:Number.NEGATIVE_INFINITY,h=(l=s.getGroupImportanceScore(e))!=null?l:Number.NEGATIVE_INFINITY;return u<h?-1:u>h?1:0}return o?1:-1}function hh(t,e,s){var i,o;const r=(i=t[s])!=null?i:null,n=(o=e[s])!=null?o:null;return r?n?r===n?0:r>n?-1:1:1:-1}function qo(t,e,s,r){for(let n=e.length-1;n>=0;n--){const i=e[n],o=s[n]?-1:1;i==="importance"?t.sort((a,c)=>r(a,c)*o):i&&t.sort((a,c)=>hh(a,c,i)*o)}return t}function zo(t,e,s,r){return qo(e,s,r,(n,i)=>ph(n,i,t))}function Hg(t,e,s,r){return qo(e,s,r,(n,i)=>dh(n,i,t))}var mh=Object.defineProperty,gh=Object.getOwnPropertyDescriptor,nr=(t,e,s,r)=>{for(var n=r>1?void 0:r?gh(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&mh(e,s,n),n};const fh=[{text:"Importance",value:"importance"},{text:"Organization",value:"org"},{text:"Project",value:"project"},{text:"Repository",value:"repo"},{text:"Actions",value:"actions",sortable:!1}];let ft=class extends p{get assets(){const t=new Set(this.model.assets.keys());return this.group.resources.forEach(e=>t.delete(X(e.org,e.project,e.repo))),Array.from(t)}get headers(){return fh}customSort(t,e,s){return zo(this.model,t,e,s)}getImportance(t){const e=this.model.getResourceImportance(t);return{color:this.model.getBusinessImportanceColor(e),text:this.model.getBusinessImportanceText(e)}}addAsset(){const t={org:"",importance:"low"};this.group.resources.push(t)}async onRemoveAsset(t){await this.model.removeAsset(this.group,t)}displaySelectedAsset(t){return X(t.org,t.project,t.repo)}setValue(t,e,s,r){this.$set(t,e,s),r==null||r.forEach(n=>this.$set(t,n,""))}async selectValue(t,e,s,r,n){const i=await this.$state.Dialog.select(r,`Select ${s}`,t[e]);typeof i=="string"&&this.setValue(t,e,i,n)}async onSelectOrg(t){await this.selectValue(t,"org","Organization",this.model.getOrgs().map(e=>({title:e,value:e})),["project","repo"])}async onSelectProject(t){if(!t.org){this.$state.Popup.warn("Please select an organization first");return}await this.selectValue(t,"project","Project",this.model.getProjects(t.org).map(e=>({title:e,value:e})),["repo"])}async onSelectRepo(t){if(!t.project){this.$state.Popup.warn("Please select a project first");return}await this.selectValue(t,"repo","Repository",this.model.getRepos(t.org,t.project).map(e=>({title:e,value:e})))}async onClearOrg(t){this.setValue(t,"org",null,["repo","project"])}async onClearProject(t){this.setValue(t,"project",null,["repo"])}async onClearRepo(t){this.setValue(t,"repo",null)}};nr([I({type:Object,required:!0})],ft.prototype,"model",2);nr([I({type:Object,required:!0})],ft.prototype,"group",2);ft=nr([b({components:{AssetImportanceMenu:Bo,AssetLabel:Fo}})],ft);var _h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"component edit-ado-assets-pane"},[s("v-card",{staticClass:"card-padding",attrs:{outlined:""}},[s("v-card-title",[t._v("Assets")]),s("v-data-table",{staticClass:"hide-page-count-select",attrs:{dense:"",height:224,headers:t.headers,items:t.group.resources,"item-value":"id","footer-props":{showFirstLastPage:!1},"sort-by":"importance","sort-desc":"true","custom-sort":t.customSort,"items-per-page":5},scopedSlots:t._u([{key:"item.importance",fn:function(r){var n=r.item;return[s("asset-importance-menu",{attrs:{small:"",importance:t.getImportance(n)},on:{updated:function(i){return t.$set(n,"importance",i)}}})]}},{key:"item.org",fn:function(r){var n=r.item;return[s("asset-label",{attrs:{text:n.org},on:{edit:function(){return t.onSelectOrg(n)},clear:function(){return t.onClearOrg(n)}}})]}},{key:"item.project",fn:function(r){var n=r.item;return[s("asset-label",{attrs:{text:n.project},on:{edit:function(){return t.onSelectProject(n)},clear:function(){return t.onClearProject(n)}}})]}},{key:"item.repo",fn:function(r){var n=r.item;return[s("asset-label",{attrs:{text:n.repo},on:{edit:function(){return t.onSelectRepo(n)},clear:function(){return t.onClearRepo(n)}}})]}},{key:"item.actions",fn:function(r){var n=r.item;return[s("v-btn",{attrs:{small:"",icon:"",title:"remove from group"},on:{click:function(i){return t.onRemoveAsset(n)}}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]}},{key:"body.append",fn:function(){return[s("tr",[s("td",{staticClass:"text-start",attrs:{colspan:"4"}}),s("td",{staticClass:"text-start"},[s("v-btn",{attrs:{small:"",icon:"",title:"Add asset"},on:{click:t.addAsset}},[s("v-icon",[t._v("mdi-plus")])],1)],1)])]},proxy:!0}])})],1)],1)},vh=[];const nn={};var yh=P(ft,_h,vh,!1,Ih,null,null,null);function Ih(t){for(let e in nn)this[e]=nn[e]}var wh=function(){return yh.exports}(),Eh=Object.defineProperty,bh=Object.getOwnPropertyDescriptor,ir=(t,e,s,r)=>{for(var n=r>1?void 0:r?bh(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Eh(e,s,n),n};const Ah=[{text:"Owner",value:"name"},{text:"Reason",value:"reason"},{text:"Last Activity",value:"lastActivity"},{text:"Actions",value:"actions",sortable:!1}];let _t=class extends p{get headers(){return Ah}customSort(t,e,s){return Vo(this.model,t,e,s)}lastActivity(t){const e=this.model.getUserLatestActivityTime(t.id),s=this.model.displayDaysSinceLastAction(e);return typeof s=="number"?s===0?"Today":s===1?"Yesterday":`${s} day(s) ago`:"N/A"}async onAddOwner(){const t=this.model.getAllUserPrincipalNames().filter(s=>!this.group.owners.some(r=>r.id===s)).map(s=>({avatar:this.model.getUserAvatarUrl(s),title:this.model.displayName(s),value:s})),e=await this.$state.Dialog.select(t,"Select Owner");typeof e=="string"&&this.group.owners.push({id:e})}async onRemoveOwner(t){await this.model.removeOwner(this.group,t.id)}};ir([I({type:Object,required:!0})],_t.prototype,"model",2);ir([I({type:Object,required:!0})],_t.prototype,"group",2);_t=ir([b],_t);var Oh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"component edit-ado-owners-pane"},[s("v-card",{staticClass:"card-padding",attrs:{outlined:""}},[s("v-card-title",[t._v("Owners")]),s("v-data-table",{staticClass:"hide-page-count-select",attrs:{dense:"",height:224,headers:t.headers,items:t.group.owners,"item-value":"id","custom-sort":t.customSort,"footer-props":{showFirstLastPage:!1},"items-per-page":5},scopedSlots:t._u([{key:"item.name",fn:function(r){var n=r.item;return[s("v-avatar",{staticClass:"avatar",attrs:{size:"16"}},[s("img",{attrs:{src:t.model.getUserAvatarUrl(n.id)}})]),t._v(" "+t._s(t.model.displayName(n.id))+" ")]}},{key:"item.reason",fn:function(r){var n=r.item;return[t._v(" "+t._s(t.model.displayReasonUserAdded(n.reason))+" ")]}},{key:"item.lastActivity",fn:function(r){var n=r.item;return[t._v(" "+t._s(t.lastActivity(n))+" ")]}},{key:"item.actions",fn:function(r){var n=r.item;return[s("v-btn",{attrs:{small:"",icon:"",title:"remove from group"},on:{click:function(i){return t.onRemoveOwner(n)}}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]}},t._l(t.headers,function(r){return{key:`header.${r.value}`,fn:function(){return[s("span",{key:r.text},[t._v(t._s(r.text))]),r.value==="lastActivity"?s("v-tooltip",{key:r.value,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[s("v-icon",t._g(t._b({staticClass:"vertical-align-baseline mx-1",attrs:{small:""}},"v-icon",o,!1),i),[t._v(" mdi-information-outline ")])]}}],null,!0)},[s("span",[t._v("Time since last observed activity within the organization")])]):t._e()]},proxy:!0}}),{key:"body.append",fn:function(){return[s("tr",[s("td",{staticClass:"text-start",attrs:{colspan:"3"}}),s("td",{staticClass:"text-start"},[s("v-btn",{attrs:{small:"",icon:"",title:"Add asset"},on:{click:t.onAddOwner}},[s("v-icon",[t._v("mdi-plus")])],1)],1)])]},proxy:!0}],null,!0)})],1)],1)},Rh=[];const on={};var Th=P(_t,Oh,Rh,!1,Sh,"e42d3a72",null,null);function Sh(t){for(let e in on)this[e]=on[e]}var $h=function(){return Th.exports}();class Ph extends hs{constructor(){super(...arguments),this.assets=new Map,this.resources=new Map,this.usersTotalIdentityMap=null,this.adoUsersAssetPermissionMap=null}get scmType(){return $.AZURE_DEVOPS}ownerMenuItems(e){return[{display:`Filter by ${this.displayName(e)}`,icon:"mdi-filter",onClick:()=>this.addFilter(e)}]}getUserAvatarUrl(e){var s;return((s=this.getUserTotalIdentityItem(e))==null?void 0:s.avatar)||""}getUserAccountUrl(e){return""}resourceText(e){const s=e.resources.filter(o=>o.org&&!o.project&&!o.repo).length,r=e.resources.filter(o=>o.repo).length,n=e.resources.filter(o=>o.project&&!o.repo).length,i=[];return s&&i.push(this.organizationsText(s)),n&&i.push(this.projectsText(n)),r&&i.push(this.repositoriesText(r)),i.join(" | ")}projectsText(e){return`${e} project(s)`}resourceId(e){return X(e.org,e.project,e.repo)}displayName(e){var r,n;const s=(r=this.usersTotalIdentityMap)==null?void 0:r.get(e);return(n=s==null?void 0:s.displayNames[0])!=null?n:e}displayPermission(e){switch(e){case"admin":return"Admin";case"contributor":return"Contributor";case"reviewer":return"Reviewer";case"read":return"Read";default:return"None"}}getAllUserPrincipalNames(){var e,s;return(s=(e=this.state.InventoryReports.getInventoryReport(G.ADO_TOTAL_IDENTITIES))==null?void 0:e.reportItems.filter(r=>!r.isBuildAgent).map(r=>r.principalName))!=null?s:[]}getUserTotalIdentityItem(e){var s,r;return(r=(s=this.usersTotalIdentityMap)==null?void 0:s.get(e))!=null?r:null}getUserLatestActivityTime(e){var s,r;return(r=(s=this.getUserTotalIdentityItem(e))==null?void 0:s.daysSinceLastAction)!=null?r:null}getUserHighestPermissionInGroup(e,s){let r=null;for(const n of s.resources){const i=this.getUserPermissionLevelToAsset(e,n.org,n.project,n.repo);!i||(!r||Y[i]>Y[r])&&(r=i)}return r}getUserPermissionLevelToAsset(e,s,r,n){var a,c,l,u,h,f,x,A,D;const i=X(s);let o=(l=(c=(a=this.adoUsersAssetPermissionMap)==null?void 0:a.get(e))==null?void 0:c.get(i))!=null?l:null;if(r){const j=X(s,r),O=(f=(h=(u=this.adoUsersAssetPermissionMap)==null?void 0:u.get(e))==null?void 0:h.get(j))!=null?f:null;(!o||O&&Y[O]>Y[o])&&(o=O)}if(n){const j=X(s,r,n),O=(D=(A=(x=this.adoUsersAssetPermissionMap)==null?void 0:x.get(e))==null?void 0:A.get(j))!=null?D:null;(!o||O&&Y[O]>Y[o])&&(o=O)}return o}generateUserTotalIdentityMap(){const e=this.state.InventoryReports.getInventoryReport(G.ADO_TOTAL_IDENTITIES);!e||(this.usersTotalIdentityMap=e.reportItems.mapBy(s=>s.principalName))}generateUserAssetPermissionMap(){const e=this.state.InventoryReports.getInventoryReport(G.ADO_USER_ASSET_PERMISSION);!e||(this.adoUsersAssetPermissionMap||(this.adoUsersAssetPermissionMap=new Map),e.reportItems.forEach(s=>{var i;const r=((i=this.adoUsersAssetPermissionMap)!=null?i:this.adoUsersAssetPermissionMap=new Map).getOrSet(s.identity,()=>new Map);if(s.asset.repo){const o=X(s.asset.org,s.asset.project,s.asset.repo);r.setOrUpdate(o,()=>s.permission,(a,c)=>Y[c]>Y[s.permission]?c:s.permission)}if(s.asset.project){const o=X(s.asset.org,s.asset.project);r.setOrUpdate(o,()=>s.permission,(a,c)=>Y[c]>Y[s.permission]?c:s.permission)}const n=Z(s.asset.org);r.setOrUpdate(n,()=>s.permission,(o,a)=>Y[a]>Y[s.permission]?a:s.permission)}))}generateAllAssetsMap(){var r,n;const e=(n=(r=this.state.InventoryReports.getInventoryReport(G.ADO_TOTAL_REPOSITORIES))==null?void 0:r.reportItems)!=null?n:[],s=this.resources;e.forEach(i=>{const o={org:i.orgName,project:i.projectName,repo:i.repoName};s.getOrSet(o.org,()=>new Map).getOrSet(o.project,()=>new Map).set(o.repo,o),this.assets.set(X(i.orgName),{org:i.orgName}),this.assets.set(X(i.orgName,i.projectName),{org:i.orgName,project:i.projectName}),this.assets.set(X(i.orgName,i.projectName,i.repoName),{org:i.orgName,project:i.projectName,repo:i.repoName})})}get editOwnersComponent(){return $h}get editAssetsComponent(){return wh}async init(){await super.init();try{await Promise.all([this.state.InventoryReports.loadReport(G.ADO_TOTAL_IDENTITIES),this.state.InventoryReports.loadReport(G.ADO_TOTAL_REPOSITORIES)]),this.generateUserTotalIdentityMap(),this.generateAllAssetsMap()}catch(e){console.error(e)}}getOrgs(){return Array.from(this.resources.keys())}getProjects(e){var s;return e&&Array.from(((s=this.resources.get(e))==null?void 0:s.keys())||[])||[]}getRepos(e,s){var r,n;return e&&s&&Array.from(((n=(r=this.resources.get(e))==null?void 0:r.get(s))==null?void 0:n.keys())||[])||[]}}const Ft={pull:1,triage:2,push:3,maintain:4,admin:5,orgOwner:6};class Zt{static organizationURL(e,s){return`${e}/${s}`}static repoUrl(e,s,r){return`${e}/${s}/${r}`}static repoBranchProtectionSettings(e,s,r){return`${e}/${s}/${r}/settings/branches`}static repoAdmins(e,s,r){return`${e}/${s}/${r}/settings/access?query=role%3Aadmin`}static identityURL(e,s){return`${e}/${s}`}static appURL(e,s,r){return`${e}/organizations/${r}/settings/installations/${s}`}static teamMembers(e,s,r){return`${e}/orgs/${s}/teams/${r}/members`}static allOrgMembers(e,s){return`${e}/orgs/${s}/people`}static repoAccessSettings(e,s,r){return`${e}/${s}/${r}/settings/access`}static branchSettingsURL(e,s,r){return`${e}/${s}/${r}/settings/branches`}static pullRequest(e,s,r,n){return`${e}/${s}/${r}/pull/${n}`}static codeOwners(e,s,r,n,i,o){return`${e}/${s}/${r}/blob/${n}/${Zt.getPathFromPathToCodeOwners(i)}${o?`#L${o})`:""}`}static getPathFromPathToCodeOwners(e){if(!e)throw new Error("pathToCodeOwners was not defined");return e==="docs"?"docs/CODEOWNERS":e===".github"?".github/CODEOWNERS":"CODEOWNERS"}static file(e,s,r,n,i,o){return`${e}/${s.encodeURI()}/${r.encodeURI()}/blob/${n.encodeURI()}/${i.encodeURI()}${o?`#L${o}`:""}`}}const Dh={[$.AZURE_DEVOPS]:"View in Azure DevOps",[$.GITHUB]:"View in GitHub"};function Ch(t){const e=Dh[t];if(!e)throw new Error(`Unsupported SCM Type: ${t}`);return e}var Nh=Object.defineProperty,Mh=Object.getOwnPropertyDescriptor,or=(t,e,s,r)=>{for(var n=r>1?void 0:r?Mh(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Nh(e,s,n),n};const xh=[{text:"Importance",value:"importance"},{text:"Organization",value:"org"},{text:"Repository",value:"repo"},{text:"Actions",value:"actions",sortable:!1}];let vt=class extends p{get assets(){const t=new Set(this.model.assets.keys());return this.group.resources.forEach(e=>t.delete(Z(e.org,e.repo))),Array.from(t)}get headers(){return xh}customSort(t,e,s){return zo(this.model,t,e,s)}getImportance(t){const e=this.model.getResourceImportance(t);return{color:this.model.getBusinessImportanceColor(e),text:this.model.getBusinessImportanceText(e)}}addAsset(){const t={org:""};this.group.resources.push(t)}async onRemoveAsset(t){await this.model.removeAsset(this.group,t),this.$set(this.group,"resources",this.group.resources)}displaySelectedAsset(t){return Z(t.org,t.repo)}setValue(t,e,s,r){this.$set(t,e,s),r==null||r.forEach(n=>this.$set(t,n,""))}async selectValue(t,e,s,r,n){const i=await this.$state.Dialog.select(r,`Select ${s}`,t[e]);typeof i=="string"&&this.setValue(t,e,i,n)}async onSelectOrg(t){await this.selectValue(t,"org","Organization",this.model.getResources().map(e=>({title:e,value:e})),["repo"])}async onSelectRepo(t){if(!t.org){this.$state.Popup.warn("Please select an organization first");return}await this.selectValue(t,"repo","Repository",this.model.getRepoResources(t.org).map(e=>({title:e,value:e})))}async onClearOrg(t){this.setValue(t,"org",null,["repo"])}async onClearRepo(t){this.setValue(t,"repo",null)}};or([I({type:Object,required:!0})],vt.prototype,"model",2);or([I({type:Object,required:!0})],vt.prototype,"group",2);vt=or([b({components:{AssetImportanceMenu:Bo,AssetLabel:Fo}})],vt);var Lh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"component edit-github-assets-pane"},[s("v-card",{staticClass:"card-padding",attrs:{outlined:""}},[s("v-card-title",[t._v("Assets")]),s("v-data-table",{staticClass:"hide-page-count-select",attrs:{dense:"",height:224,headers:t.headers,items:t.group.resources,"item-value":"id","footer-props":{showFirstLastPage:!1},"sort-by":"importance","sort-desc":"true","custom-sort":t.customSort,"items-per-page":5},scopedSlots:t._u([{key:"item.importance",fn:function(r){var n=r.item;return[s("asset-importance-menu",{attrs:{small:"",importance:t.getImportance(n)},on:{updated:function(i){return t.$set(n,"importance",i)}}})]}},{key:"item.org",fn:function(r){var n=r.item;return[s("asset-label",{attrs:{text:n.org},on:{edit:function(){return t.onSelectOrg(n)},clear:function(){return t.onClearOrg(n)}}})]}},{key:"item.repo",fn:function(r){var n=r.item;return[s("asset-label",{attrs:{text:n.repo},on:{edit:function(){return t.onSelectRepo(n)},clear:function(){return t.onClearRepo(n)}}})]}},{key:"item.actions",fn:function(r){var n=r.item;return[s("v-btn",{attrs:{small:"",icon:"",title:"Remove from group"},on:{click:function(i){return t.onRemoveAsset(n)}}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]}},{key:"body.append",fn:function(){return[s("tr",[s("td",{staticClass:"text-start",attrs:{colspan:"3"}}),s("td",{staticClass:"text-start"},[s("v-btn",{attrs:{small:"",icon:"",title:"Add asset"},on:{click:t.addAsset}},[s("v-icon",[t._v("mdi-plus")])],1)],1)])]},proxy:!0}])})],1)],1)},Uh=[];const an={};var kh=P(vt,Lh,Uh,!1,Gh,null,null,null);function Gh(t){for(let e in an)this[e]=an[e]}var jh=function(){return kh.exports}(),Fh=Object.defineProperty,Hh=Object.getOwnPropertyDescriptor,ar=(t,e,s,r)=>{for(var n=r>1?void 0:r?Hh(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Fh(e,s,n),n};const Bh=[{text:"Owner",value:"login"},{text:"Reason",value:"reason"},{text:"Last Activity",value:"lastActivity"},{text:"Actions",value:"actions",sortable:!1}];let yt=class extends p{get headers(){return Bh}customSort(t,e,s){return Vo(this.model,t,e,s)}lastActivity(t){const e=this.model.getUserLatestActivityTime(t.id),s=this.model.displayDaysSinceLastAction(e);return typeof s=="number"?s===0?"Today":s===1?"Yesterday":`${s} day(s) ago`:"N/A"}async onAddOwner(){const t=this.model.getAllUserLogins().filter(s=>!this.group.owners.some(r=>r.id===s)).map(s=>({avatar:this.model.getUserAvatarUrl(s),title:this.model.displayName(s),value:s})),e=await this.$state.Dialog.select(t,"Select Owner");typeof e=="string"&&this.group.owners.push({id:e})}async onRemoveOwner(t){await this.model.removeOwner(this.group,t.id)}};ar([I({type:Object,required:!0})],yt.prototype,"model",2);ar([I({type:Object,required:!0})],yt.prototype,"group",2);yt=ar([b],yt);var Vh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"component edit-github-owners-pane"},[s("v-card",{staticClass:"card-padding",attrs:{outlined:""}},[s("v-card-title",[t._v("Owners")]),s("v-data-table",{staticClass:"hide-page-count-select",attrs:{dense:"",height:224,headers:t.headers,items:t.group.owners,"item-value":"id","item-key":"login","custom-sort":t.customSort,"footer-props":{showFirstLastPage:!1},"items-per-page":5},scopedSlots:t._u([{key:"item.login",fn:function(r){var n=r.item;return[s("v-avatar",{staticClass:"avatar",attrs:{size:"16"}},[s("img",{attrs:{src:t.model.getUserAvatarUrl(n.id)}})]),t._v(" "+t._s(t.model.displayName(n.id))+" ")]}},{key:"item.reason",fn:function(r){var n=r.item;return[t._v(" "+t._s(t.model.displayReasonUserAdded(n.reason))+" ")]}},{key:"item.lastActivity",fn:function(r){var n=r.item;return[t._v(" "+t._s(t.lastActivity(n))+" ")]}},{key:"item.actions",fn:function(r){var n=r.item;return[s("v-btn",{attrs:{small:"",icon:"",title:"Remove from group"},on:{click:function(i){return t.onRemoveOwner(n)}}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]}},t._l(t.headers,function(r){return{key:`header.${r.value}`,fn:function(){return[s("span",{key:r.text},[t._v(t._s(r.text))]),r.value==="lastActivity"?s("v-tooltip",{key:r.value,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[s("v-icon",t._g(t._b({staticClass:"vertical-align-baseline mx-1",attrs:{small:""}},"v-icon",o,!1),i),[t._v(" mdi-information-outline ")])]}}],null,!0)},[s("span",[t._v("Time since last observed activity within the organization")])]):t._e()]},proxy:!0}}),{key:"body.append",fn:function(){return[s("tr",[s("td",{staticClass:"text-start",attrs:{colspan:"3"}}),s("td",{staticClass:"text-start"},[s("v-btn",{attrs:{small:"",icon:"",title:"Add asset"},on:{click:t.onAddOwner}},[s("v-icon",[t._v("mdi-plus")])],1)],1)])]},proxy:!0}],null,!0)})],1)],1)},qh=[];const cn={};var zh=P(yt,Vh,qh,!1,Wh,"2f30e6d8",null,null);function Wh(t){for(let e in cn)this[e]=cn[e]}var Kh=function(){return zh.exports}();class Yh extends hs{constructor(){super(...arguments),this.assets=new Map,this.resources=new Map,this.usersTotalIdentityMap=null,this.githubUsersAssetPermissionMap=null}get scmType(){return $.GITHUB}ownerMenuItems(e){var s;return[{display:Ch(this.scmType),url:(s=Zt.identityURL(vs,e))!=null?s:null},{display:`Filter by ${this.displayName(e)}`,icon:"mdi-filter",onClick:()=>this.addFilter(e)}]}getUserAvatarUrl(e){return`${vs}/${e}.png`}getUserAccountUrl(e){var s;return(s=Zt.identityURL(vs,e))!=null?s:null}resourceText(e){const s=e.resources.filter(i=>i.org&&!i.repo).length,r=e.resources.filter(i=>i.repo).length,n=[];return s&&n.push(this.organizationsText(s)),r&&n.push(this.repositoriesText(r)),n.join(" | ")}resourceId(e){return Z(e.org,e.repo)}displayPermission(e){switch(e){case"orgOwner":return"Org Owner";case"admin":return"Admin";case"maintain":return"Maintain";case"push":return"Write";case"triage":return"Triage";case"pull":return"Read";default:return"None"}}displayName(e){return this.state.ProfileNames.getGithubIdentityDisplayName(e)||e}getAllUserLogins(){var e,s;return(s=(e=this.state.InventoryReports.getInventoryReport(S.GH_TOTAL_IDENTITIES))==null?void 0:e.reportItems.map(r=>r.identity))!=null?s:[]}getUserTotalIdentityItem(e){var s,r;return(r=(s=this.usersTotalIdentityMap)==null?void 0:s.get(e))!=null?r:null}getUserLatestActivityTime(e){var s,r;return(r=(s=this.getUserTotalIdentityItem(e))==null?void 0:s.daysSinceLastAction)!=null?r:null}getUserHighestPermissionInGroup(e,s){let r=null;for(const n of s.resources){const i=this.getUserPermissionLevelToAsset(e,n.org,n.repo);!i||(!r||Ft[i]>Ft[r])&&(r=i)}return r}getUserPermissionLevelToAsset(e,s,r){var i,o,a;const n=Z(s,r);return(a=(o=(i=this.githubUsersAssetPermissionMap)==null?void 0:i.get(e))==null?void 0:o.get(n))!=null?a:null}generateUserTotalIdentityMap(){const e=this.state.InventoryReports.getInventoryReport(S.GH_TOTAL_IDENTITIES);!e||(this.usersTotalIdentityMap=e.reportItems.mapBy(s=>s.identity))}generateUserAssetPermissionMap(){var r;const e=this.state.InventoryReports.getInventoryReport(S.GH_USER_REPO_PERMISSION);if(!e)return;const s=(r=this.githubUsersAssetPermissionMap)!=null?r:this.githubUsersAssetPermissionMap=new Map;e.reportItems.forEach(n=>{const i=s.getOrSet(n.identity,()=>new Map),o=Z(n.orgName,n.repoName);i.set(o,n.permissionLevel);const a=Z(n.orgName);i.setOrUpdate(a,()=>n.permissionLevel,(c,l)=>Ft[l]>Ft[n.permissionLevel]?l:n.permissionLevel)})}generateAllAssetsMap(){var n,i,o,a;const e=this.resources;((i=(n=this.state.InventoryReports.getInventoryReport(S.GH_TOTAL_ORGS))==null?void 0:n.reportItems)!=null?i:[]).forEach(c=>e.getOrSet(c.orgName,()=>new Map)),((a=(o=this.state.InventoryReports.getInventoryReport(S.GH_TOTAL_REPOSITORIES))==null?void 0:o.reportItems)!=null?a:[]).forEach(c=>{const l={org:c.org,repo:c.repo};this.assets.set(Z(c.org,c.repo),l),e.getOrSet(c.org,()=>new Map).set(c.repo,l)})}get editOwnersComponent(){return Kh}get editAssetsComponent(){return jh}async init(){await super.init();try{await Promise.all([this.state.ProfileNames.init(),this.state.InventoryReports.loadReport(S.GH_TOTAL_IDENTITIES),this.state.InventoryReports.loadReport(S.GH_TOTAL_REPOSITORIES),this.state.InventoryReports.loadReport(S.GH_TOTAL_ORGS)]),this.generateUserTotalIdentityMap(),this.generateAllAssetsMap()}catch(e){console.error(e)}}getResources(){return Array.from(this.resources.keys())}getRepoResources(e){var s;return e&&Array.from(((s=this.resources.get(e))==null?void 0:s.keys())||[])||[]}}const ln={SECRET:"Secrets",CORRELATION:"Anomalies",INFERENCE:"Anomalies",SCA:"Code Risks",SAST:"Code Risks",IAC:"Code Risks",LICENSE:"Code Risks",REPUTATION:"Code Risks"};function Jh(t,e){return e?ln[t]:Object.keys(ge).some(s=>s===t)?t:ln[t]}const Bg={Secrets:"mdi-form-textbox-password","Code Risks":"mdi-code-json",Anomalies:"mdi-robot-confused",IAC:"mdi-factory",SCA:"mdi-package-variant-closed",SAST:"mdi-shield-bug-outline",LICENSE:"mdi-license",REPUTATION:"mdi-search-web"},Vg={[ge.SAST]:"SAST",[ge.SCA]:"SCA",[ge.IAC]:"IaC",[ge.LICENSE]:"License",[ge.REPUTATION]:"Reputation"},qg={Secrets:"Hard-coded secrets in code","Code Risks":"Other code risks (SCA, SAST, IaC)",Anomalies:"Anomalous activities",IAC:"Infrastructure as Code: Infrastructure as code (IaC) is the process of managing and provisioning computer data centers through machine-readable definition files, rather than physical hardware configuration or interactive configuration tools",SCA:"Software Composition Analysis: Software Composition Analysis (SCA) is a practice in the fields of Information technology and software engineering for analyzing custom-built software applications to detect embedded open-source software and detect if they are up-to-date, contain security flaws, or have licensing requirements",SAST:"Static Application Security Testing: Static analysis tools examine the text of a program syntactically. They look for a fixed set of patterns or rules in the source code.",LICENSE:"Open Source License Violations",REPUTATION:"Open Source Package Reputation"},zg={"Code Risks":Ie,Anomalies:Ao,Secrets:bo,SCA:Ie,IAC:Ie,SAST:Ie,LICENSE:Ie,REPUTATION:Ie};function Wg(t,e){var s;return(s=t.trends[e])!=null?s:[]}function Kg(t){var r,n;if(!(t!=null&&t.length))return 0;const e=(r=t.at(0))!=null?r:0;return((n=t.at(-1))!=null?n:e)-e}class Xh{constructor(){this._trends=null,this._productTrends=null,this.groupModels=new We,this.groupByLabel=!1,p.observable(this)}get trends(){return this._trends||(this.init(),this._trends=[]),this._trends}get productTrends(){return this._productTrends||(this.init(),this._productTrends=[]),this._productTrends}async init(){try{this.groupModels.set("github",new Yh),this.groupModels.set("azure-devops",new Ph);const[e]=await Promise.all([Wt.trends(),...this.groupModels.values().map(s=>s.init())]);this.updateImportance(e),this._trends=e,this._productTrends=this.getProductTrends(e)}catch{E.error("Oops! Failed to load trends")}}updateImportance(e){var r,n,i,o,a,c;for(const l of e){const u=this.groupModels.get(l.asset.integrationType);if(!u)continue;const h={org:l.asset.integrationOrgId,project:l.asset.project,repo:l.asset.repo},s=l.asset,{branch:f}=s,x=st(s,["branch"]),A=at.sortKey(x),D=qs.groupsByResource.get(A),j=D?(r=u.getMaxGroupImportanceLevel(D))!=null?r:"low":(n=u.getResourceImportance(h))!=null?n:"low",O=D?(i=u.getMaxGroupImportanceScore(D))!=null?i:0:(o=u.getResourceImportanceScore(h))!=null?o:0;(a=l.businessImportance)!=null||(l.businessImportance={label:j,score:O}),l.businessImportance.label=j,l.businessImportance.score=O,l.product=D&&((c=u.getMaxGroupImportance(D))==null?void 0:c.name)||null}}getProductTrends(e){var c,l;if(!(e!=null&&e.length))return[];const s=(l=(c=e[0])==null?void 0:c.timeUnit)!=null?l:"day",r=new Date().toISOString(),n=e.mapBy(u=>at.sortKey(L(_({},u.asset),{branch:void 0}))),i=new Map,o=Array.from(qs.groupsByType.values()).flat().mapBy(u=>u.sortKey);for(const[,u]of o){const h=Vt[u.scm];for(const{org:f,project:x,repo:A}of u.resources){const D=at.sortKey({integrationOrgId:f,project:x,repo:A||"",integrationType:h}),j=n.get(D);if(!!j)for(const[O,m]of Object.entries(j.trends)){const d=Jh(O,this.groupByLabel);if(!(m!=null&&m.length))continue;const g=i.getOrSet(u.sortKey,()=>new Map).getOrSet(d,()=>new Map);for(const[q,,W,z]of m)q>r||g.setOrUpdate(q,()=>[q,NaN,W,z],(Lt,[,,he,tt])=>[Lt,NaN,he+W,tt+z])}}}return i.map((u,h)=>{var j,O,m;const f=o.get(u),x=f&&this.groupModels.get(Vt[f.scm]);if(!f||!x)return null;const A=new Map;for(const[d,g]of h){if(!Array.from(g.keys()).map(he=>new Date(he).getTime()).length){console.debug("No trends for product",f.name,d);continue}let W=0;const z=Array.from(g.values());z.sort(([he],[tt])=>he.localeCompare(tt));for(const he of z){const[,,tt,Yo]=he;W+=tt-Yo,he[1]=W}const Lt=(j=z==null?void 0:z.at(-1))==null?void 0:j[0];Lt&&Xe().diff(Lt,s)>=1&&z.push([r,W,0,0]),A.set(d,z)}return{id:u,product:{name:f.name,sortKey:u,assets:f.resources.filter(d=>!!d.repo).map(d=>({integrationOrgId:d.org,integrationType:Vt[f.scm],project:d.project,repo:d.repo}))},get current(){return Object.keys(this.trends).reduce((d,g)=>{var q,W,z;return d[g]=(z=(W=(q=this.trends[g])==null?void 0:q.at(-1))==null?void 0:W[1])!=null?z:0,d},{})},trends:A.toRecord(),businessImportance:{label:(O=x.getGroupImportanceLevel(f))!=null?O:"low",score:(m=x.getGroupImportanceScore(f))!=null?m:0}}}).nonNullable()}}const Zh=new Xh;class Qt{constructor(e,s){this.route=e,this.parent=s}static from(e){return new Qt(e)}get title(){var e,s;return(s=(e=this.meta)==null?void 0:e.title)!=null?s:null}get icon(){var e,s;return(s=(e=this.meta)==null?void 0:e.icon)!=null?s:null}get frontIcon(){var e,s;return(s=(e=this.meta)==null?void 0:e.frontIcon)!=null?s:null}get link(){var n,i;const e=this.route.path,s=(i=(n=this.parent)==null?void 0:n.route.path)!=null?i:null;return(s?`${s}/${e}`:e).replace(/:.*/,"")}get children(){var e,s;return(s=(e=this.route.children)==null?void 0:e.map(r=>new Qt(r,this)))!=null?s:[]}get inactive(){return this.route.name===""}get disabled(){return this.tier.disabled}get tooltip(){return this.tier.tooltip}get sidebar(){var s,r;if(this.parent&&!this.parent.sidebar)return!1;let e=(r=(s=this.meta)==null?void 0:s.sidebar)!=null?r:!1;return e instanceof Ve&&(e=e.value),e instanceof ao&&(e=e.value),!!e}get meta(){var e;return(e=this.route.meta)!=null?e:null}get tier(){var s;const e=(s=this.meta)==null?void 0:s.tier;switch(typeof e){case"undefined":return{disabled:!1,tooltip:null};case"function":return{disabled:!e(ee),tooltip:null};case"object":{const r=e.enabled(ee);return{disabled:!r,tooltip:r?null:e.message}}default:return{disabled:!1,tooltip:null}}}}var Qh=Object.defineProperty,em=Object.getOwnPropertyDescriptor,tm=(t,e,s,r)=>{for(var n=r>1?void 0:r?em(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&Qh(e,s,n),n};let zs=class extends p{get sideBarNavItems(){return Oo.map(Qt.from)}};zs=tm([b({components:{ArnicaLogo:oo}})],zs);var sm=zs,rm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$state.Auth.authenticated?s("v-navigation-drawer",{directives:[{name:"show",rawName:"v-show",value:t.$state.Layout.drawer.show,expression:"$state.Layout.drawer.show"}],key:t.$state.Layout.drawer.anchored,staticClass:"component layout-component navigation-drawer",attrs:{floating:"",app:t.$state.Layout.drawer.show,permanent:"",width:"200px","expand-on-hover":!t.$state.Layout.drawer.anchored,"mini-variant":t.$state.Layout.drawer.mini},on:{"update:miniVariant":function(r){return t.$set(t.$state.Layout.drawer,"mini",r)},"update:mini-variant":function(r){return t.$set(t.$state.Layout.drawer,"mini",r)}}},[s("v-subheader",{staticClass:"d-flex justify-space-around"},[s("arnica-logo",{staticClass:"d-flex",attrs:{background:"dark",mini:t.$state.Layout.drawer.mini}})],1),s("div",{staticClass:"scoped-scroll"},[s("v-spacer"),s("v-list",{attrs:{dense:"",nav:""}},[t._l(t.sideBarNavItems,function(r){return[r.sidebar?s("div",{key:r.title,staticClass:"tooltip-wrapper",attrs:{title:r.tooltip}},[s("v-list-item",{attrs:{to:r.link,link:"",inactive:r.inactive,disabled:r.disabled}},[s("v-list-item-icon",[s("v-icon",[t._v(t._s(r.icon))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(r.title))])],1)],1)],1):t._e(),t._l(r.children,function(n){return[n.sidebar?s("div",{key:n.title,staticClass:"tooltip-wrapper",attrs:{title:n.tooltip}},[s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.$state.Layout.drawer.mini,expression:"!$state.Layout.drawer.mini"}],staticClass:"sub-menu-item",attrs:{link:"",to:n.link,disabled:n.disabled}},[s("v-list-item-icon",[s("v-icon",{attrs:{small:""}},[t._v(t._s(n.icon))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(n.title)+" "),n.frontIcon?s("v-icon",{attrs:{right:"","x-small":"",title:n.frontIcon.tooltip}},[t._v(t._s(n.frontIcon.icon))]):t._e()],1)],1)],1)],1):t._e()]})]})],2)],1),s("v-slide-y-reverse-transition",[s("v-footer",{directives:[{name:"show",rawName:"v-show",value:!t.$state.Layout.drawer.mini,expression:"!$state.Layout.drawer.mini"}],attrs:{fixed:"",color:"transparent"}},[s("v-btn",{attrs:{"x-small":"",plain:""},on:{click:function(r){return r.stopPropagation(),t.$state.Layout.drawer.togglePinned()}}},[t.$state.Layout.drawer.anchored?[s("v-icon",{attrs:{small:""}},[t._v("mdi-pin-off")]),t._v("Unpin ")]:[s("v-icon",{attrs:{small:""}},[t._v("mdi-pin")]),t._v("Pin ")]],2)],1)],1)],1):t._e()},nm=[];const un={};var im=P(sm,rm,nm,!1,om,null,null,null);function om(t){for(let e in un)this[e]=un[e]}var am=function(){return im.exports}(),cm=Object.defineProperty,lm=Object.getOwnPropertyDescriptor,Wo=(t,e,s,r)=>{for(var n=r>1?void 0:r?lm(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&cm(e,s,n),n};let es=class extends p{constructor(){super(...arguments),this.active=!1}get snackbar(){return this.active}set snackbar(t){var e,s;this.active=t,t||(s=(e=this.$state.Popup.message).onClose)==null||s.call(e)}get lines(){return this.$state.Popup.message.text.split(`
`)}onMessage(t){this.snackbar=!!t.text}goToRoute(){if(!this.$state.Popup.message.route)throw new Error("Unexpected undefined route");this.$router.push(this.$state.Popup.message.route),this.snackbar=!1}};Wo([Je("$state.Popup.message",{immediate:!0})],es.prototype,"onMessage",1);es=Wo([b],es);var um=es,pm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-snackbar",{staticClass:"component layout-component snackbar",attrs:{app:"",top:"",timeout:t.$state.Popup.message.timeout,color:t.$state.Popup.message.color},scopedSlots:t._u([{key:"action",fn:function(r){var n=r.attrs;return[s("v-btn",t._b({attrs:{text:""},on:{click:function(i){t.snackbar=!1}}},"v-btn",n,!1),[t._v("Close")]),t.$state.Popup.message.route?s("v-btn",{attrs:{text:""},on:{click:function(i){return t.goToRoute()}}},[t._v("View")]):t._e()]}}]),model:{value:t.snackbar,callback:function(r){t.snackbar=r},expression:"snackbar"}},[t.$state.Popup.message.html?s("div",{staticClass:"html-container",domProps:{innerHTML:t._s(t.$state.Popup.message.text)}}):s("div",{staticClass:"line-container"},t._l(t.lines,function(r,n){return s("span",{key:n},[t._v(t._s(r))])}),0)])},dm=[];const pn={};var hm=P(um,pm,dm,!1,mm,null,null,null);function mm(t){for(let e in pn)this[e]=pn[e]}var gm=function(){return hm.exports}(),fm=Object.defineProperty,_m=Object.getOwnPropertyDescriptor,Ko=(t,e,s,r)=>{for(var n=r>1?void 0:r?_m(e,s):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(r?o(e,s,n):o(n))||n);return r&&n&&fm(e,s,n),n};const vm=["click","mousedown","scroll","keypress","load"],ym=30;let ts=class extends p{constructor(){super(...arguments),this.showOverlay=new lo("showMobileOverlay",!0),this.lastActionTime=Date.now(),this.logOutTimer=0}get isMobile(){return this.$vuetify.breakpoint.name==="xs"}get showFullAppBar(){var t;return((t=this.$route.meta)==null?void 0:t.appBar)!==!1}async onSCMTypeChange(t){t&&await this.$state.Preferences.save({scmType:t})}async beforeMount(){if(window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)");this.$vuetify.theme.dark=t.matches,t.addEventListener("change",async e=>{this.$vuetify.theme.dark=e.matches,await this.$state.Preferences.save({dark:e.matches})})}await this.$state.Notifications.init()}created(){vm.forEach(t=>{window.addEventListener(t,this.setLastActionTime.bind(this))},!1),this.logOutTimer=window.setInterval(this.checkLogOut,60*1e3)}async checkLogOut(){Date.now()-this.lastActionTime>ym*60*1e3&&(window.clearInterval(this.logOutTimer),await this.$state.Auth.signOut())}async setLastActionTime(){this.lastActionTime=Date.now()}};Ko([Je("$state.Layout.scmType")],ts.prototype,"onSCMTypeChange",1);ts=Ko([b({components:{AppBar:ml,NavigationDrawer:am,AppFooter:bl,SnackBar:gm,LoadingCentered:Fl,ActionDialog:ec,DemoSnackBar:Cl,Tooltip:wa,OverlaySimpleMessage:$a}})],ts);var Im=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[t.showOverlay.item&&t.isMobile?s("overlay-simple-message",{attrs:{"button-text":"Proceed Anyways",title:"Mobile View Not Supported",text:"This site is best experienced on a higher resolution device."},on:{close:function(r){t.showOverlay.item=!1}}}):[t.$state.Layout.appLoaded?t.showFullAppBar?[s("app-bar"),s("navigation-drawer"),s("v-main",{attrs:{"expand-left":!t.$state.Layout.drawer.show}},[s("v-container",{staticClass:"full-height app-container-padding",attrs:{fluid:""}},[s("v-slide-x-transition",{attrs:{mode:"out-in"}},[s("router-view")],1)],1)],1),s("app-footer"),s("snack-bar"),s("demo-snack-bar"),s("action-dialog"),s("tooltip")]:[s("app-bar"),s("router-view")]:s("loading-centered")]],2)},wm=[];const dn={};var Em=P(ts,Im,wm,!1,bm,"4933f538",null,null);function bm(t){for(let e in dn)this[e]=dn[e]}var Am=function(){return Em.exports}();p.config.productionTip=!1;new p(L(_({},ed),{render:t=>t(Am)})).$mount("#app");export{We as $,Ae as A,Zt as B,ge as C,Pm as D,Vm as E,Bm as F,S as G,fs as H,_e as I,ou as J,vs as K,Fl as L,_s as M,up as N,pp as O,E as P,da as Q,vc as R,$ as S,N as T,xt as U,Ch as V,xe as W,Z as X,B as Y,Vt as Z,v as _,C as a,qm as a0,kt as a1,cu as a2,zm as a3,Oe as a4,X as a5,lo as a6,Ke as a7,qt as a8,jt as a9,Fu as aA,th as aB,Ao as aC,Wg as aD,Kg as aE,Hu as aF,Jh as aG,zg as aH,me as aI,ng as aa,Bu as ab,dg as ac,gg as ad,mp as ae,Bg as af,qg as ag,Vg as ah,Os as ai,_g as aj,fg as ak,Po as al,J as am,T as an,te as ao,la as ap,Bo as aq,hg as ar,ug as as,ju as at,pg as au,ig as av,og as aw,Xl as ax,at as ay,mg as az,w as b,Eg as c,wg as d,Cd as e,Sm as f,Zl as g,Wl as h,Hm as i,zd as j,G as k,Me as l,yo as m,P as n,cp as o,Vr as p,Hg as q,$m as r,ua as s,Fm as t,Yh as u,Ph as v,ne as w,lp as x,en as y,H as z};
